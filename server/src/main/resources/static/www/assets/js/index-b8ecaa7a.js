import{t as K,v as $,w as k,x as G,R as n,a as c,F as U,B as h,j as e,T as Z,l as H}from"./index-5f51ca44.js";import{S as J}from"./SaveFab-142d182a.js";import{u as L,a as M}from"./hooks-1f293e4f.js";import{a as W,E as y}from"./index-30e337fd.js";import{C as Q}from"./Container-87c2bf1f.js";import{T as w}from"./Typography-6ee06c79.js";import{P as S}from"./Paper-cffb93af.js";import{G as t}from"./Grid-8800b093.js";import{T as a}from"./TextField-fd5a3e96.js";import{A as X}from"./Alert-368acf87.js";import"./Fab-998d6591.js";import"./ButtonBase-8b0d506c.js";import"./createReactComponent-ea0485c8.js";import"./useTheme-90c811d5.js";import"./Grow-62fe4847.js";import"./utils-7d94707b.js";import"./Modal-3eb94ddf.js";import"./List-91c3af84.js";import"./createSvgIcon-1a708d24.js";function Y(z){return async d=>{d(K()),W.post(y.ACCOUNT,z).then(r=>{d($()),window.location.href="/login"}).catch(r=>{let p="errore";r.response?p=r.response.data:p=r.message,d(k(p))})}}function _(z,d){return async r=>{W.get(`${y.AZIENDE}/esiste?paese=${z}&codice=${d}`).then(p=>{p.data,r(G(p.data))})}}const Ce=()=>{const z=L(),{esiste:d}=M(i=>i.aziende),[r,p]=n.useState({fname:"",lname:"",email:"",password:"",passwordRepeat:""}),[o,E]=n.useState({fname:!0,lname:!0,email:!0,password:!0,passwordRepeat:!0}),b=i=>{const{name:s,value:l}=i.target;p({...r,[s]:l}),E({...o,[s]:l.toString().length<1})};n.useEffect(()=>{E({...o,password:r.password!==r.passwordRepeat||r.password.toString().length<1,passwordRepeat:r.password!==r.passwordRepeat||r.passwordRepeat.toString().length<1})},[r]);const[u,T]=n.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[f,R]=n.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0}),A=i=>{const{name:s,value:l}=i.target;T({...u,[s]:l}),R({...f,[s]:l.toString().length<1})};n.useEffect(()=>{z(_(u.idFiscaleIVAPaese,u.idFiscaleIVACodice))},[u]);const[g,N]=n.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[m,P]=n.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),C=i=>{const{name:s,value:l,required:I}=i.target;N({...g,[s]:l}),I&&P({...m,[s]:l.toString().length<1})},[F,V]=n.useState({nome:""}),[x,j]=n.useState({nome:!0}),O=i=>{V({...F,nome:i.target.value}),j({...x,nome:i.target.value.toString().length<1})},[B,D]=n.useState(!0);n.useEffect(()=>{const i=!Object.values(o).every(v=>v===!1),s=!Object.values(f).every(v=>v===!1),l=!Object.values(m).every(v=>v===!1),I=!Object.values(x).every(v=>v===!1);D(i||s||l||I)},[o,f,m,x]);const q=()=>{const i={account:{fname:r.fname,lname:r.lname,email:r.email,password:r.password},azienda:u,sede:g,negozio:{...F}};z(Y(i))};return c(U,{children:[c(Q,{children:[c(h,{mb:4,children:[e(Z,{theme:H,children:e(w,{variant:"h1",component:"h1",align:"center",mt:3,children:"minigest"})}),e(w,{variant:"h6",component:"p",align:"center",gutterBottom:!0,children:"registrati"})]}),e(h,{mb:3,children:e(S,{children:c(h,{p:2,children:[e(w,{variant:"h6",gutterBottom:!0,children:"Dati personali"}),c(t,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(t,{item:!0,xs:12,sm:6,children:e(a,{label:"Nome",name:"fname",value:r.fname,error:o.fname,fullWidth:!0,onChange:b})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{label:"Cognome",name:"lname",value:r.lname,error:o.lname,fullWidth:!0,onChange:b})}),e(t,{item:!0,xs:12,children:e(a,{label:"Email",name:"email",value:r.email,error:o.email,fullWidth:!0,onChange:b,type:"email"})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{label:"Password",name:"password",value:r.password,error:o.password,fullWidth:!0,onChange:b,type:"password",helperText:o.password?"le password devono coincidere":""})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{label:"Ripeti password",name:"passwordRepeat",value:r.passwordRepeat,error:o.passwordRepeat,fullWidth:!0,onChange:b,type:"password",helperText:o.passwordRepeat?"le password devono coincidere":""})})]})]})})}),e(h,{mb:3,children:e(S,{children:c(h,{p:2,children:[e(w,{variant:"h6",gutterBottom:!0,children:"Aggiungi la tua azienda"}),c(t,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(t,{item:!0,xs:12,children:e(a,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:u.denominazione,error:f.denominazione,fullWidth:!0,onChange:A})}),e(t,{item:!0,xs:2,children:e(a,{label:"Nazione",name:"idFiscaleIVAPaese",value:u.idFiscaleIVAPaese,error:f.idFiscaleIVAPaese,fullWidth:!0,onChange:A})}),e(t,{item:!0,xs:10,children:e(a,{label:"Partita IVA",name:"idFiscaleIVACodice",value:u.idFiscaleIVACodice,error:f.idFiscaleIVACodice,fullWidth:!0,onChange:A})}),e(t,{item:!0,xs:12,children:e(X,{severity:d?"error":"success",children:d?"Azienda gi√† presente":"Azienda disponibile per essere registrata"})}),e(t,{item:!0,xs:12,children:e(a,{label:"Codice Fiscale",name:"codiceFiscale",value:u.codiceFiscale,error:f.codiceFiscale,fullWidth:!0,onChange:A})})]})]})})}),e(h,{mb:3,children:e(S,{children:c(h,{p:2,children:[e(w,{gutterBottom:!0,variant:"h6",children:"Aggiungi la sede della tua azienda"}),c(t,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(t,{item:!0,xs:10,children:e(a,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:g.indirizzo,error:m.indirizzo,required:!0,onChange:C})}),e(t,{item:!0,xs:2,children:e(a,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:g.numeroCivico,error:m.numeroCivico,onChange:C})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{fullWidth:!0,label:"CAP",name:"cap",value:g.cap,error:m.cap,required:!0,onChange:C})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{fullWidth:!0,label:"Comune",name:"comune",value:g.comune,error:m.comune,required:!0,onChange:C})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{fullWidth:!0,label:"Provincia",name:"provincia",value:g.provincia,error:m.provincia,onChange:C,helperText:"Esempio: BS"})}),e(t,{item:!0,xs:12,sm:6,children:e(a,{fullWidth:!0,label:"Nazione",name:"nazione",value:g.nazione,error:m.nazione,onChange:C,required:!0,helperText:"Esempio: IT"})})]})]})})}),e(h,{mb:16,children:e(S,{children:c(h,{p:2,children:[e(w,{gutterBottom:!0,variant:"h6",children:"Aggiungi il nome del tuo negozio"}),e(a,{fullWidth:!0,label:"Nome Negozio",name:"nome",value:F.nome,error:x.nome,onChange:O})]})})})]}),e(J,{handleClick:q,disabled:B||d})]})};export{Ce as default};
