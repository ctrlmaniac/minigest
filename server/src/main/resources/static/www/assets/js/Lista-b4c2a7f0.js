import{a4 as j,a5 as L,Q as Y,R as h,a8 as $,j as e,a1 as k,a as s,F as N,B as l,Y as G}from"./index-5f51ca44.js";import{u as H,a as x}from"./hooks-1f293e4f.js";import{A as M}from"./AddFab-97602b3a.js";import{E as U}from"./ErrorScreen-79d85a92.js";import{r as W}from"./remove-84b91fdc.js";import{E as z,a as Q}from"./index-30e337fd.js";import{T as C}from"./Typography-6ee06c79.js";import{P as T}from"./Paper-cffb93af.js";import{G as p}from"./Grid-8800b093.js";import{T as v}from"./TextField-fd5a3e96.js";import{A as V,I as f}from"./Alert-368acf87.js";import{T as _,a as E,b as a,c as q}from"./TableRow-500111fc.js";import{T as J}from"./TableHead-1b4dafed.js";import{I as w}from"./IconFile-137ddfc0.js";import{I as y}from"./IconEdit-b9bb8973.js";import{I as A}from"./IconTrash-e38c8d7f.js";import"./Container-87c2bf1f.js";import"./Fab-998d6591.js";import"./ButtonBase-8b0d506c.js";import"./createReactComponent-ea0485c8.js";import"./useTheme-90c811d5.js";import"./Grow-62fe4847.js";import"./utils-7d94707b.js";import"./Modal-3eb94ddf.js";import"./List-91c3af84.js";import"./createSvgIcon-1a708d24.js";function K(c){return async o=>{let i=`${z.CHIUSURE_FISCALI}?${c}`;Q.get(i).then(n=>{o(j(n.data))}).catch(n=>{o(L(n.message))})}}const Te=()=>{const c=H(),o=Y(),{selected:i}=x(r=>r.negozi),{list:n,listing:D,listError:g}=x(r=>r.chiusureFiscali),P=r=>{c(W(r))},[t,B]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,R]=$({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()});const I=r=>{const{name:u,value:b}=r.target;B({...t,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{R({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()})},[i,t]),h.useEffect(()=>{c(K(S.toString()))},[S]),D?e(k,{}):g?e(U,{message:g}):s(N,{children:[s(l,{mb:3,children:[e(C,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),s(C,{children:["Stai visualizzando le chiusure fiscali del negozio: ",i==null?void 0:i.nome]})]}),e(l,{mb:3,children:e(T,{children:e(l,{p:2,children:s(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),G.isEmpty(n)?e(V,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(T,{children:e(l,{p:2,children:s(_,{children:[e(J,{children:s(E,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F."}),e(a,{sx:{width:50},align:"center",children:e(w,{})}),e(a,{sx:{width:50},align:"center",children:e(y,{})}),e(a,{sx:{width:50},align:"center",children:e(A,{})})]})}),e(q,{children:n==null?void 0:n.map(r=>s(E,{children:[e(a,{children:r.data}),e(a,{children:r.totale}),e(a,{children:r.numeroDocFisc}),e(a,{children:e(f,{color:"info",onClick:()=>o(`/app/docfisc/chiusure-fiscali/dettagli/${r.id}`),children:e(w,{})})}),e(a,{children:e(f,{color:"warning",onClick:()=>o(`/app/docfisc/chiusure-fiscali/modifica/${r.id}`),children:e(y,{})})}),e(a,{children:e(f,{color:"error",onClick:()=>P(r.id),children:e(A,{})})})]},r.id))})]})})})}),e(M,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{Te as default};
