import{r as K,_ as I,q as Q,d as H,a as n,M as T,N as _,Q as J,S as X,U as Y,V as ee,R as w,j as S,F as re,W as ne}from"./index-49429419.js";import{c as te,a as U,E as L,u as ie,b as ae,T as f}from"./index-59b89f4e.js";import{g as oe,a as se,s as ce,e as le,c as ue,b as de,B as $}from"./Box-e278b5b3.js";import{P as B}from"./Paper-3f5a8f4b.js";import{T as G}from"./Typography-1601c625.js";import{A as pe}from"./Alert-afddd797.js";import"./ButtonBase-56292b25.js";const me=K.createContext(),q=me;function ge(e){return oe("MuiGrid",e)}const fe=[0,1,2,3,4,5,6,7,8,9,10],he=["column-reverse","column","row-reverse","row"],ve=["nowrap","wrap-reverse","wrap"],E=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],V=se("MuiGrid",["root","container","item","zeroMinWidth",...fe.map(e=>`spacing-xs-${e}`),...he.map(e=>`direction-xs-${e}`),...ve.map(e=>`wrap-xs-${e}`),...E.map(e=>`grid-xs-${e}`),...E.map(e=>`grid-sm-${e}`),...E.map(e=>`grid-md-${e}`),...E.map(e=>`grid-lg-${e}`),...E.map(e=>`grid-xl-${e}`)]),xe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function N(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function we({theme:e,ownerState:t}){let r;return e.breakpoints.keys.reduce((a,i)=>{let o={};if(t[i]&&(r=t[i]),!r)return a;if(r===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=T({values:t.columns,breakpoints:e.breakpoints.values}),s=typeof l=="object"?l[i]:l;if(s==null)return a;const p=`${Math.round(r/s*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const u=e.spacing(t.columnSpacing);if(u!=="0px"){const v=`calc(${p} + ${N(u)})`;c={flexBasis:v,maxWidth:v}}}o=I({flexBasis:p,flexGrow:0,maxWidth:p},c)}return e.breakpoints.values[i]===0?Object.assign(a,o):a[e.breakpoints.up(i)]=o,a},{})}function Ce({theme:e,ownerState:t}){const r=T({values:t.direction,breakpoints:e.breakpoints.values});return _({theme:e},r,a=>{const i={flexDirection:a};return a.indexOf("column")===0&&(i[`& > .${V.item}`]={maxWidth:"none"}),i})}function Z({breakpoints:e,values:t}){let r="";Object.keys(t).forEach(i=>{r===""&&t[i]!==0&&(r=i)});const a=Object.keys(e).sort((i,o)=>e[i]-e[o]);return a.slice(0,a.indexOf(r))}function ze({theme:e,ownerState:t}){const{container:r,rowSpacing:a}=t;let i={};if(r&&a!==0){const o=T({values:a,breakpoints:e.breakpoints.values});let l;typeof o=="object"&&(l=Z({breakpoints:e.breakpoints.values,values:o})),i=_({theme:e},o,(s,p)=>{var c;const u=e.spacing(s);return u!=="0px"?{marginTop:`-${N(u)}`,[`& > .${V.item}`]:{paddingTop:N(u)}}:(c=l)!=null&&c.includes(p)?{}:{marginTop:0,[`& > .${V.item}`]:{paddingTop:0}}})}return i}function be({theme:e,ownerState:t}){const{container:r,columnSpacing:a}=t;let i={};if(r&&a!==0){const o=T({values:a,breakpoints:e.breakpoints.values});let l;typeof o=="object"&&(l=Z({breakpoints:e.breakpoints.values,values:o})),i=_({theme:e},o,(s,p)=>{var c;const u=e.spacing(s);return u!=="0px"?{width:`calc(100% + ${N(u)})`,marginLeft:`-${N(u)}`,[`& > .${V.item}`]:{paddingLeft:N(u)}}:(c=l)!=null&&c.includes(p)?{}:{width:"100%",marginLeft:0,[`& > .${V.item}`]:{paddingLeft:0}}})}return i}function Se(e,t,r={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[r[`spacing-xs-${String(e)}`]];const a=[];return t.forEach(i=>{const o=e[i];Number(o)>0&&a.push(r[`spacing-${i}-${String(o)}`])}),a}const $e=ce("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:a,direction:i,item:o,spacing:l,wrap:s,zeroMinWidth:p,breakpoints:c}=r;let u=[];a&&(u=Se(l,c,t));const v=[];return c.forEach(m=>{const z=r[m];z&&v.push(t[`grid-${m}-${String(z)}`])}),[t.root,a&&t.container,o&&t.item,p&&t.zeroMinWidth,...u,i!=="row"&&t[`direction-xs-${String(i)}`],s!=="wrap"&&t[`wrap-xs-${String(s)}`],...v]}})(({ownerState:e})=>I({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),Ce,ze,be,we);function Ae(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const r=[];return t.forEach(a=>{const i=e[a];if(Number(i)>0){const o=`spacing-${a}-${String(i)}`;r.push(o)}}),r}const We=e=>{const{classes:t,container:r,direction:a,item:i,spacing:o,wrap:l,zeroMinWidth:s,breakpoints:p}=e;let c=[];r&&(c=Ae(o,p));const u=[];p.forEach(m=>{const z=e[m];z&&u.push(`grid-${m}-${String(z)}`)});const v={root:["root",r&&"container",i&&"item",s&&"zeroMinWidth",...c,a!=="row"&&`direction-xs-${String(a)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...u]};return de(v,ge,t)},ye=K.forwardRef(function(t,r){const a=Q({props:t,name:"MuiGrid"}),{breakpoints:i}=te(),o=le(a),{className:l,columns:s,columnSpacing:p,component:c="div",container:u=!1,direction:v="row",item:m=!1,rowSpacing:z,spacing:x=0,wrap:j="wrap",zeroMinWidth:b=!1}=o,A=H(o,xe),O=z||x,y=p||x,M=K.useContext(q),k=u?s||12:M,F={},P=I({},A);i.keys.forEach(h=>{A[h]!=null&&(F[h]=A[h],delete P[h])});const R=I({},o,{columns:k,container:u,direction:v,item:m,rowSpacing:O,columnSpacing:y,wrap:j,zeroMinWidth:b,spacing:x},F,{breakpoints:i.keys}),g=We(R);return n(q.Provider,{value:k,children:n($e,I({ownerState:R,className:ue(g.root,l),as:c,ref:r},P))})}),d=ye;function Ne(e){return async t=>{t(J()),U.post(L.ACCOUNT,e).then(r=>{t(X()),window.location.href="/app"}).catch(r=>{let a="errore";r.response?a=r.response.data:a=r.message,t(Y(a))})}}function Ee(e,t){return async r=>{U.get(`${L.AZIENDE}/esiste?paese=${e}&codice=${t}`).then(a=>{a.data,r(ee(a.data))})}}const Ge=()=>{const e=ie(),{esiste:t}=ae(g=>g.aziende),[r,a]=w.useState({fname:"",lname:"",email:"",password:"",passwordRepeat:""}),[i,o]=w.useState({fname:!0,lname:!0,email:!0,password:!0,passwordRepeat:!0}),l=g=>{const{name:h,value:C}=g.target;a({...r,[h]:C}),o({...i,[h]:C.toString().length<1})};w.useEffect(()=>{o({...i,password:r.password!==r.passwordRepeat||r.password.toString().length<1,passwordRepeat:r.password!==r.passwordRepeat||r.passwordRepeat.toString().length<1})},[r]);const[s,p]=w.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[c,u]=w.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0}),v=g=>{const{name:h,value:C}=g.target;p({...s,[h]:C}),u({...c,[h]:C.toString().length<1})};w.useEffect(()=>{e(Ee(s.idFiscaleIVAPaese,s.idFiscaleIVACodice))},[s]);const[m,z]=w.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[x,j]=w.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),b=g=>{const{name:h,value:C,required:D}=g.target;z({...m,[h]:C}),D&&j({...x,[h]:C.toString().length<1})},[A,O]=w.useState({nome:""}),[y,M]=w.useState({nome:!0}),k=g=>{O({...A,nome:g.target.value}),M({...y,nome:g.target.value.toString().length<1})},[F,P]=w.useState(!0);w.useEffect(()=>{const g=!Object.values(i).every(W=>W===!1),h=!Object.values(c).every(W=>W===!1),C=!Object.values(x).every(W=>W===!1),D=!Object.values(y).every(W=>W===!1);P(g||h||C||D)},[i,c,x,y]);const R=()=>{const g={account:{fname:r.fname,lname:r.lname,email:r.email,password:r.password},azienda:s,sede:m,negozio:{...A}};e(Ne(g))};return S(re,{children:[n($,{mb:3,children:n(B,{children:S($,{p:2,children:[n(G,{variant:"h6",gutterBottom:!0,children:"Dati personali"}),S(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[n(d,{item:!0,xs:12,sm:6,children:n(f,{label:"Nome",name:"fname",value:r.fname,error:i.fname,fullWidth:!0,onChange:l})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{label:"Cognome",name:"lname",value:r.lname,error:i.lname,fullWidth:!0,onChange:l})}),n(d,{item:!0,xs:12,children:n(f,{label:"Email",name:"email",value:r.email,error:i.email,fullWidth:!0,onChange:l,type:"email"})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{label:"Password",name:"password",value:r.password,error:i.password,fullWidth:!0,onChange:l,type:"password",helperText:i.password?"le password devono coincidere":""})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{label:"Ripeti password",name:"passwordRepeat",value:r.passwordRepeat,error:i.passwordRepeat,fullWidth:!0,onChange:l,type:"password",helperText:i.passwordRepeat?"le password devono coincidere":""})})]})]})})}),n($,{mb:3,children:n(B,{children:S($,{p:2,children:[n(G,{variant:"h6",gutterBottom:!0,children:"Aggiungi la tua azienda"}),S(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[n(d,{item:!0,xs:12,children:n(f,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:s.denominazione,error:c.denominazione,fullWidth:!0,onChange:v})}),n(d,{item:!0,xs:2,children:n(f,{label:"Nazione",name:"idFiscaleIVAPaese",value:s.idFiscaleIVAPaese,error:c.idFiscaleIVAPaese,fullWidth:!0,onChange:v})}),n(d,{item:!0,xs:10,children:n(f,{label:"Partita IVA",name:"idFiscaleIVACodice",value:s.idFiscaleIVACodice,error:c.idFiscaleIVACodice,fullWidth:!0,onChange:v})}),n(d,{item:!0,xs:12,children:n(pe,{severity:t?"error":"success",children:t?"Azienda gi√† presente":"Azienda disponibile per essere registrata"})}),n(d,{item:!0,xs:12,children:n(f,{label:"Codice Fiscale",name:"codiceFiscale",value:s.codiceFiscale,error:c.codiceFiscale,fullWidth:!0,onChange:v})})]})]})})}),n($,{mb:3,children:n(B,{children:S($,{p:2,children:[n(G,{gutterBottom:!0,variant:"h6",children:"Aggiungi la sede della tua azienda"}),S(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[n(d,{item:!0,xs:10,children:n(f,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:m.indirizzo,error:x.indirizzo,required:!0,onChange:b})}),n(d,{item:!0,xs:2,children:n(f,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:m.numeroCivico,error:x.numeroCivico,onChange:b})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{fullWidth:!0,label:"CAP",name:"cap",value:m.cap,error:x.cap,required:!0,onChange:b})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{fullWidth:!0,label:"Comune",name:"comune",value:m.comune,error:x.comune,required:!0,onChange:b})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{fullWidth:!0,label:"Provincia",name:"provincia",value:m.provincia,error:x.provincia,onChange:b,helperText:"Esempio: BS"})}),n(d,{item:!0,xs:12,sm:6,children:n(f,{fullWidth:!0,label:"Nazione",name:"nazione",value:m.nazione,error:x.nazione,onChange:b,required:!0,helperText:"Esempio: IT"})})]})]})})}),n($,{mb:16,children:n(B,{children:S($,{p:2,children:[n(G,{gutterBottom:!0,variant:"h6",children:"Aggiungi il nome del tuo negozio"}),n(f,{fullWidth:!0,label:"Nome Negozio",name:"nome",value:A.nome,error:y.nome,onChange:k})]})})}),n(ne,{handleClick:R,disabled:F||t})]})};export{Ge as default};
