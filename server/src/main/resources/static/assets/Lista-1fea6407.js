import{a3 as j,a4 as L,N,R as h,a7 as $,j as e,Z as k,a as s,F as Y,B as l,V as G}from"./index-7862eb00.js";import{u as H,a as x}from"./hooks-d3ca2a4c.js";import{A as M}from"./AddFab-0816e9c4.js";import{E as U}from"./ErrorScreen-eca8d1bc.js";import{r as V}from"./remove-f83537bf.js";import{E as W,a as z}from"./index-30e337fd.js";import{T as C}from"./Typography-a27d4a59.js";import{P as T}from"./Paper-7dd8998f.js";import{G as p}from"./Grid-242ecbb1.js";import{T as v}from"./TextField-1bd45967.js";import{A as Z,I as f}from"./Alert-5fa013c6.js";import{T as _,a as E,b as a,c as q}from"./TableRow-ee613352.js";import{T as J}from"./TableHead-a97793ca.js";import{I as w}from"./IconFile-e16c7ffb.js";import{I as y}from"./IconEdit-4dc4133c.js";import{I as A}from"./IconTrash-67afca16.js";import"./Container-ae15322d.js";import"./Fab-7f11b1aa.js";import"./ButtonBase-52577508.js";import"./createReactComponent-ec120697.js";import"./useTheme-eae15486.js";import"./Grow-c742a7e6.js";import"./utils-682c87a5.js";import"./Modal-d6c190e6.js";import"./List-1ac29d19.js";import"./createSvgIcon-8230f01b.js";function K(c){return async o=>{let i=`${W.CHIUSURE_FISCALI}?${c}`;z.get(i).then(n=>{o(j(n.data))}).catch(n=>{o(L(n.message))})}}const Te=()=>{const c=H(),o=N(),{selected:i}=x(r=>r.negozi),{list:n,listing:D,listError:g}=x(r=>r.chiusureFiscali),P=r=>{c(V(r))},[t,B]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,R]=$({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()});const I=r=>{const{name:u,value:b}=r.target;B({...t,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{R({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()})},[i,t]),h.useEffect(()=>{c(K(S.toString()))},[S]),D?e(k,{}):g?e(U,{message:g}):s(Y,{children:[s(l,{mb:3,children:[e(C,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),s(C,{children:["Stai visualizzando le chiusure fiscali del negozio: ",i==null?void 0:i.nome]})]}),e(l,{mb:3,children:e(T,{children:e(l,{p:2,children:s(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),G.isEmpty(n)?e(Z,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(T,{children:e(l,{p:2,children:s(_,{children:[e(J,{children:s(E,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F."}),e(a,{sx:{width:50},align:"center",children:e(w,{})}),e(a,{sx:{width:50},align:"center",children:e(y,{})}),e(a,{sx:{width:50},align:"center",children:e(A,{})})]})}),e(q,{children:n==null?void 0:n.map(r=>s(E,{children:[e(a,{children:r.data}),e(a,{children:r.totale}),e(a,{children:r.numeroDocFisc}),e(a,{children:e(f,{color:"info",onClick:()=>o(`/app/docfisc/chiusure-fiscali/dettagli/${r.id}`),children:e(w,{})})}),e(a,{children:e(f,{color:"warning",onClick:()=>o(`/app/docfisc/chiusure-fiscali/modifica/${r.id}`),children:e(y,{})})}),e(a,{children:e(f,{color:"error",onClick:()=>P(r.id),children:e(A,{})})})]},r.id))})]})})})}),e(M,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{Te as default};
