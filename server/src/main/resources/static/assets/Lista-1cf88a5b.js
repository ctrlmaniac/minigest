import{aM as z,aN as B,N as M,R as m,a7 as N,j as e,Z as j,a as i,F as q,B as l,V as R}from"./index-7862eb00.js";import{A as $}from"./AddFab-0816e9c4.js";import{E as L}from"./ErrorScreen-eca8d1bc.js";import{a as O,E as W}from"./index-30e337fd.js";import{u as Y,a as T}from"./hooks-d3ca2a4c.js";import{T as v}from"./Typography-a27d4a59.js";import{P as F}from"./Paper-7dd8998f.js";import{G as h}from"./Grid-242ecbb1.js";import{T as x,F as G,I as V,S as k}from"./TextField-1bd45967.js";import{M as A}from"./MenuItem-b1dd1e6e.js";import{A as H,I as U}from"./Alert-5fa013c6.js";import{T as Z,a as E,b as a,c as J}from"./TableRow-ee613352.js";import{T as K}from"./TableHead-a97793ca.js";import{I as C}from"./IconFile-e16c7ffb.js";import"./Container-ae15322d.js";import"./Fab-7f11b1aa.js";import"./ButtonBase-52577508.js";import"./createReactComponent-ec120697.js";import"./useTheme-eae15486.js";import"./Grow-c742a7e6.js";import"./utils-682c87a5.js";import"./Modal-d6c190e6.js";import"./List-1ac29d19.js";import"./createSvgIcon-8230f01b.js";import"./listItemIconClasses-91dfb537.js";import"./listItemTextClasses-66e1b50f.js";function Q(u,p){return async n=>{O.get(`${W.FATTURE}/acquisto/${u}?${p}`).then(o=>n(z(o.data))).catch(o=>n(B(o.message)))}}const xe=()=>{const u=Y(),p=M(),{selected:n}=T(r=>r.aziende),{list:o,listError:g,listing:y}=T(r=>r.fatture),[t,f]=m.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,order:"data"}),[c,S]=m.useState({anno:!1,mese:!1});let[b,w]=N({anno:t.anno.toString(),mese:t.mese.toString(),order:"data"});const D=r=>{const{name:s,value:I}=r.target;f({...t,[s]:I});const d=parseInt(I);s==="anno"&&S({...c,anno:d<1970||d>new Date().getFullYear()}),s==="mese"&&S({...c,mese:d<1||d>12})},P=r=>{const{value:s}=r.target;f({...t,order:s})};return m.useEffect(()=>{w({anno:t.anno.toString(),mese:t.mese.toString(),order:t.order})},[n,t]),m.useEffect(()=>{n&&u(Q(n.id,b.toString()))},[n,b]),y?e(j,{}):g?e(L,{message:g}):i(q,{children:[i(l,{mb:3,children:[e(v,{variant:"h3",gutterBottom:!0,children:"Fatture Acquisto"}),i(v,{children:["Stai visualizzando le fatture dell'azienda ",n==null?void 0:n.denominazione]})]}),e(l,{mb:3,children:e(F,{children:e(l,{p:2,children:i(h,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(h,{item:!0,xs:12,sm:6,children:e(x,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:c.anno,onChange:D,inputProps:{max:new Date().getFullYear()}})}),e(h,{item:!0,xs:12,sm:6,children:e(x,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:c.mese,onChange:D,inputProps:{min:1,max:12}})}),e(h,{item:!0,xs:12,sm:6,children:i(G,{fullWidth:!0,children:[e(V,{children:"Ordina per data/data SDI"}),i(k,{value:t.order,label:"Ordina per data/data SDI",name:"order",onChange:P,children:[e(A,{value:"data",children:"Data fattura"}),e(A,{value:"sdi",children:"Data SDI"})]})]})})]})})})}),e(l,{children:e(F,{children:e(l,{p:2,children:R.isEmpty(o)?e(H,{severity:"info",children:"Non ci sono fatture, aggiunge una!"}):i(Z,{children:[e(K,{children:i(E,{children:[e(a,{children:"Tipo"}),e(a,{children:"Data"}),e(a,{children:"Data SDI"}),e(a,{children:"Cedente"}),e(a,{children:"Numero"}),e(a,{children:"Totale"}),e(a,{sx:{width:50},align:"center",children:e(C,{})})]})}),e(J,{children:o==null?void 0:o.map(r=>i(E,{children:[e(a,{children:r.tipoDocumento.codice}),e(a,{children:r.data}),e(a,{children:r.dataSDI}),e(a,{children:r.cedente.denominazione}),e(a,{children:r.numero}),i(a,{children:["â‚¬ ",r.totale]}),e(a,{align:"center",children:e(U,{color:"info",onClick:()=>p(`/app/docfisc/fatture/dettagli/${r.id}`),children:e(C,{})})})]},r.id))})]})})})}),e($,{href:"/app/docfisc/fatture/aggiungi"})]})};export{xe as default};
