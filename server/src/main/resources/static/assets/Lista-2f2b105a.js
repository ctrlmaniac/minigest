import{aJ as z,aK as B,D as j,R as m,a4 as L,j as e,P as M,a as i,F as R,B as l,L as V}from"./index-761b4989.js";import{A as $}from"./AddFab-736de467.js";import{E as N}from"./ErrorScreen-83758a8b.js";import{a as O,E as W}from"./index-30e337fd.js";import{u as Y,a as I}from"./hooks-9000e4c8.js";import{T}from"./Typography-4033f764.js";import{P as F}from"./Paper-1026d494.js";import{G as h}from"./Grid-c7d0a2fe.js";import{T as x,F as G,I as k,S as H}from"./TextField-294b3173.js";import{M as E}from"./MenuItem-b4c5c630.js";import{A as J,I as K}from"./Alert-caf42b59.js";import{T as U,a as C,b as a,c as q}from"./TableRow-f3e30aef.js";import{T as Q}from"./TableHead-7c58f24d.js";import{I as y}from"./IconFile-fd1b92d0.js";import"./Container-e078e984.js";import"./Fab-0c52d3ca.js";import"./ButtonBase-242e16e9.js";import"./createReactComponent-62a25815.js";import"./useTheme-167c9bfa.js";import"./Grow-3595db16.js";import"./utils-b42c4e0c.js";import"./Modal-c33af6cc.js";import"./List-ff5ffe2c.js";import"./createSvgIcon-1320d625.js";import"./listItemIconClasses-9fc1742f.js";import"./listItemTextClasses-bb0c9a1c.js";function X(p,u){return async n=>{O.get(`${W.FATTURE}/vendita/${p}?${u}`).then(o=>n(z(o.data))).catch(o=>n(B(o.message)))}}const xe=()=>{const p=Y(),u=j(),{selected:n}=I(r=>r.aziende),{list:o,listError:g,listing:A}=I(r=>r.fatture),[t,f]=m.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,order:"data"}),[d,S]=m.useState({anno:!1,mese:!1});let[D,P]=L({anno:t.anno.toString(),mese:t.mese.toString(),order:"data"});const b=r=>{const{name:s,value:v}=r.target;f({...t,[s]:v});const c=parseInt(v);s==="anno"&&S({...d,anno:c<1970||c>new Date().getFullYear()}),s==="mese"&&S({...d,mese:c<1||c>12})},w=r=>{const{value:s}=r.target;f({...t,order:s})};return m.useEffect(()=>{P({anno:t.anno.toString(),mese:t.mese.toString(),order:t.order})},[n,t]),m.useEffect(()=>{n&&p(X(n.id,D.toString()))},[n,D]),A?e(M,{}):g?e(N,{message:g}):i(R,{children:[i(l,{mb:3,children:[e(T,{variant:"h3",gutterBottom:!0,children:"Fatture Vendita"}),i(T,{children:["Stai visualizzando le fatture dell'azienda ",n==null?void 0:n.denominazione]})]}),e(l,{mb:3,children:e(F,{children:e(l,{p:2,children:i(h,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(h,{item:!0,xs:12,sm:6,children:e(x,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:d.anno,onChange:b,inputProps:{max:new Date().getFullYear()}})}),e(h,{item:!0,xs:12,sm:6,children:e(x,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:d.mese,onChange:b,inputProps:{min:1,max:12}})}),e(h,{item:!0,xs:12,sm:6,children:i(G,{fullWidth:!0,children:[e(k,{children:"Ordina per data/data SDI"}),i(H,{value:t.order,label:"Ordina per data/data SDI",name:"order",onChange:w,children:[e(E,{value:"data",children:"Data fattura"}),e(E,{value:"sdi",children:"Data SDI"})]})]})})]})})})}),e(l,{children:e(F,{children:e(l,{p:2,children:V.isEmpty(o)?e(J,{severity:"info",children:"Non ci sono fatture, aggiunge una!"}):i(U,{children:[e(Q,{children:i(C,{children:[e(a,{children:"Tipo"}),e(a,{children:"Data"}),e(a,{children:"Data SDI"}),e(a,{children:"Committente"}),e(a,{children:"Numero"}),e(a,{children:"Totale"}),e(a,{sx:{width:50},align:"center",children:e(y,{})})]})}),e(q,{children:o==null?void 0:o.map(r=>i(C,{children:[e(a,{children:r.tipoDocumento.codice}),e(a,{children:r.data}),e(a,{children:r.dataSDI}),e(a,{children:r.committente.denominazione}),e(a,{children:r.numero}),i(a,{children:["â‚¬ ",r.totale]}),e(a,{align:"center",children:e(K,{color:"info",onClick:()=>u(`/app/docfisc/fatture/dettagli/${r.id}`),children:e(y,{})})})]},r.id))})]})})})}),e($,{href:"/app/docfisc/fatture/aggiungi"})]})};export{xe as default};
