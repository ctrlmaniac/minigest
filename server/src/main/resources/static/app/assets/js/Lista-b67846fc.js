import{aC as z,aD as B,d as j,R as m,a1 as q,j as e,o as M,C as N,b as i,F as R,l as $,a2 as O}from"./index-67254d02.js";import{a as W,E as Y}from"./index-c44c1a12.js";import{u as G,a as T,B as l,T as v}from"./hooks-fccfb499.js";import{P as C}from"./Paper-3e81e2e3.js";import{G as h}from"./Grid-92817418.js";import{T as F,F as L,I as k,S as H}from"./TextField-4add7af0.js";import{M as x}from"./MenuItem-19546251.js";import{A as U}from"./Alert-7c7d6f34.js";import{T as V,a as A,b as r,c as _}from"./TableRow-b83a5f3c.js";import{T as J}from"./TableHead-ce5d8a6b.js";import{I as y}from"./IconFile-b8e5e73f.js";import{I as K}from"./IconButton-3fae5024.js";import"./useTheme-b4ae5703.js";import"./Grow-de51d2e5.js";import"./utils-2b3ff743.js";import"./TransitionGroupContext-9ce3bcfc.js";import"./Modal-36c42f6c.js";import"./List-02219cef.js";import"./createSvgIcon-6b855daf.js";import"./ButtonBase-4000f0af.js";import"./listItemIconClasses-137a45b4.js";import"./listItemTextClasses-b9eaa055.js";import"./createReactComponent-d33df1ab.js";function Q(u,p){return async n=>{W.get(`${Y.FATTURE}/acquisto/${u}?${p}`).then(o=>n(z(o.data))).catch(o=>n(B(o.message)))}}const Te=()=>{const u=G(),p=j(),{selected:n}=T(a=>a.aziende),{list:o,listError:g,listing:E}=T(a=>a.fatture),[t,f]=m.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,order:"data"}),[c,S]=m.useState({anno:!1,mese:!1});let[D,w]=q({anno:t.anno.toString(),mese:t.mese.toString(),order:"data"});const b=a=>{const{name:s,value:I}=a.target;f({...t,[s]:I});const d=parseInt(I);s==="anno"&&S({...c,anno:d<1970||d>new Date().getFullYear()}),s==="mese"&&S({...c,mese:d<1||d>12})},P=a=>{const{value:s}=a.target;f({...t,order:s})};return m.useEffect(()=>{w({anno:t.anno.toString(),mese:t.mese.toString(),order:t.order})},[n,t]),m.useEffect(()=>{n&&u(Q(n.id,D.toString()))},[n,D]),E?e(M,{}):g?e(N,{message:g}):i(R,{children:[i(l,{mb:3,children:[e(v,{variant:"h3",gutterBottom:!0,children:"Fatture Acquisto"}),i(v,{children:["Stai visualizzando le fatture dell'azienda ",n==null?void 0:n.denominazione]})]}),e(l,{mb:3,children:e(C,{children:e(l,{p:2,children:i(h,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(h,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:c.anno,onChange:b,inputProps:{max:new Date().getFullYear()}})}),e(h,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:c.mese,onChange:b,inputProps:{min:1,max:12}})}),e(h,{item:!0,xs:12,sm:6,children:i(L,{fullWidth:!0,children:[e(k,{children:"Ordina per data/data SDI"}),i(H,{value:t.order,label:"Ordina per data/data SDI",name:"order",onChange:P,children:[e(x,{value:"data",children:"Data fattura"}),e(x,{value:"sdi",children:"Data SDI"})]})]})})]})})})}),e(l,{children:e(C,{children:e(l,{p:2,children:$.isEmpty(o)?e(U,{severity:"info",children:"Non ci sono fatture, aggiunge una!"}):i(V,{children:[e(J,{children:i(A,{children:[e(r,{children:"Tipo"}),e(r,{children:"Data"}),e(r,{children:"Data SDI"}),e(r,{children:"Cedente"}),e(r,{children:"Numero"}),e(r,{children:"Totale"}),e(r,{sx:{width:50},align:"center",children:e(y,{})})]})}),e(_,{children:o==null?void 0:o.map(a=>i(A,{children:[e(r,{children:a.tipoDocumento.codice}),e(r,{children:a.data}),e(r,{children:a.dataSDI}),e(r,{children:a.cedente.denominazione}),e(r,{children:a.numero}),i(r,{children:["â‚¬ ",a.totale]}),e(r,{align:"center",children:e(K,{color:"info",onClick:()=>p(`/docfisc/fatture/dettagli/${a.id}`),children:e(y,{})})})]},a.id))})]})})})}),e(O,{href:"/docfisc/fatture/aggiungi"})]})};export{Te as default};
