import{V as R,W as M,d as j,R as h,a1 as N,j as e,o as $,C as L,b as s,F as W,l as Y,a2 as z}from"./index-67254d02.js";import{u as G,a as S,B as l,T as b}from"./hooks-fccfb499.js";import{r as H}from"./remove-19ce6820.js";import{E as U,a as V}from"./index-c44c1a12.js";import{P as x}from"./Paper-3e81e2e3.js";import{G as p}from"./Grid-92817418.js";import{T as y}from"./TextField-4add7af0.js";import{A as _}from"./Alert-7c7d6f34.js";import{T as q,a as T,b as i,c as J}from"./TableRow-b83a5f3c.js";import{T as K}from"./TableHead-ce5d8a6b.js";import{I as E}from"./IconFile-b8e5e73f.js";import{c as O}from"./createReactComponent-d33df1ab.js";import{I as w}from"./IconTrash-ef31679c.js";import{I as g}from"./IconButton-3fae5024.js";import"./useTheme-b4ae5703.js";import"./Grow-de51d2e5.js";import"./utils-2b3ff743.js";import"./TransitionGroupContext-9ce3bcfc.js";import"./Modal-36c42f6c.js";import"./List-02219cef.js";import"./createSvgIcon-6b855daf.js";import"./ButtonBase-4000f0af.js";var D=O("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);function Q(c){return async o=>{let r=`${U.CHIUSURE_FISCALI}?${c}`;V.get(r).then(t=>{o(R(t.data))}).catch(t=>{o(M(t.message))})}}const Ie=()=>{const c=G(),o=j(),{selected:r}=S(a=>a.negozi),{list:t,listing:A,listError:f}=S(a=>a.chiusureFiscali),P=a=>{c(H(a))},[n,k]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,v]=h.useState({anno:!1,mese:!1});let[C,B]=N({negozio:r==null?void 0:r.id,anno:n.anno.toString(),mese:n.mese.toString()});const F=a=>{const{name:u,value:I}=a.target;k({...n,[u]:I});const d=parseInt(I);u==="anno"&&v({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&v({...m,mese:d<1||d>12})};return h.useEffect(()=>{B({negozio:r==null?void 0:r.id,anno:n.anno.toString(),mese:n.mese.toString()})},[r,n]),h.useEffect(()=>{c(Q(C.toString()))},[C]),A?e($,{}):f?e(L,{message:f}):s(W,{children:[s(l,{mb:3,children:[e(b,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),s(b,{children:["Stai visualizzando le chiusure fiscali del negozio: ",r==null?void 0:r.nome]})]}),e(l,{mb:3,children:e(x,{children:e(l,{p:2,children:s(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(y,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:n.anno,error:m.anno,onChange:F,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(y,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:n.mese,error:m.mese,onChange:F,inputProps:{min:1,max:12}})})]})})})}),Y.isEmpty(t)?e(_,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(x,{children:e(l,{p:2,children:s(q,{children:[e(K,{children:s(T,{children:[e(i,{children:"Data"}),e(i,{children:"Totale"}),e(i,{children:"N.D.F."}),e(i,{sx:{width:50},align:"center",children:e(E,{})}),e(i,{sx:{width:50},align:"center",children:e(D,{})}),e(i,{sx:{width:50},align:"center",children:e(w,{})})]})}),e(J,{children:t==null?void 0:t.map(a=>s(T,{children:[e(i,{children:a.data}),e(i,{children:a.totale}),e(i,{children:a.numeroDocFisc}),e(i,{children:e(g,{color:"info",onClick:()=>o(`/docfisc/chiusure-fiscali/dettagli/${a.id}`),children:e(E,{})})}),e(i,{children:e(g,{color:"warning",onClick:()=>o(`/docfisc/chiusure-fiscali/modifica/${a.id}`),children:e(D,{})})}),e(i,{children:e(g,{color:"error",onClick:()=>P(a.id),children:e(w,{})})})]},a.id))})]})})})}),e(z,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{Ie as default};
