import{t as B,v as q,w as D,R as o,a as c,F as K,B as u,j as e,T as k,l as G}from"./index-7862eb00.js";import{S as U}from"./SaveFab-d7db3c27.js";import{a as H,E as J}from"./index-30e337fd.js";import{u as L}from"./hooks-d3ca2a4c.js";import{C as M}from"./Container-ae15322d.js";import{T as C}from"./Typography-a27d4a59.js";import{P as A}from"./Paper-7dd8998f.js";import{G as a}from"./Grid-242ecbb1.js";import{T as t}from"./TextField-1bd45967.js";import"./Fab-7f11b1aa.js";import"./ButtonBase-52577508.js";import"./createReactComponent-ec120697.js";import"./useTheme-eae15486.js";import"./Grow-c742a7e6.js";import"./utils-682c87a5.js";import"./Modal-d6c190e6.js";import"./List-1ac29d19.js";import"./createSvgIcon-8230f01b.js";function Q(S){return async r=>{r(B()),H.post(J.ACCOUNT,S).then(g=>{r(q()),window.location.href="/login"}).catch(g=>{let i="errore";g.response?i=g.response.data:i=g.message,r(D(i))})}}const he=()=>{const S=L(),[r,g]=o.useState({fname:"",lname:"",email:"",password:"",passwordRepeat:""}),[i,I]=o.useState({fname:!0,lname:!0,email:!0,password:!0,passwordRepeat:!0}),z=n=>{const{name:s,value:l}=n.target;g({...r,[s]:l}),I({...i,[s]:l.toString().length<1})};o.useEffect(()=>{I({...i,password:r.password!==r.passwordRepeat||r.password.toString().length<1,passwordRepeat:r.password!==r.passwordRepeat||r.passwordRepeat.toString().length<1})},[r]);const[f,W]=o.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[h,E]=o.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0}),w=n=>{const{name:s,value:l}=n.target;W({...f,[s]:l}),E({...h,[s]:l.toString().length<1})},[m,T]=o.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[d,R]=o.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),v=n=>{const{name:s,value:l,required:F}=n.target;T({...m,[s]:l}),F&&R({...d,[s]:l.toString().length<1})},[x,y]=o.useState({nome:""}),[b,N]=o.useState({nome:!0}),P=n=>{y({...x,nome:n.target.value}),N({...b,nome:n.target.value.toString().length<1})},[j,V]=o.useState(!0);o.useEffect(()=>{const n=!Object.values(i).every(p=>p===!1),s=!Object.values(h).every(p=>p===!1),l=!Object.values(d).every(p=>p===!1),F=!Object.values(b).every(p=>p===!1);V(n||s||l||F)},[i,h,d,b]);const O=()=>{const n={account:{fname:r.fname,lname:r.lname,email:r.email,password:r.password},azienda:f,sede:m,negozio:{...x}};S(Q(n))};return c(K,{children:[c(M,{children:[c(u,{mb:4,children:[e(k,{theme:G,children:e(C,{variant:"h1",component:"h1",align:"center",mt:3,children:"minigest"})}),e(C,{variant:"h6",component:"p",align:"center",gutterBottom:!0,children:"registrati"})]}),e(u,{mb:3,children:e(A,{children:c(u,{p:2,children:[e(C,{variant:"h6",gutterBottom:!0,children:"Dati personali"}),c(a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(a,{item:!0,xs:12,sm:6,children:e(t,{label:"Nome",name:"fname",value:r.fname,error:i.fname,fullWidth:!0,onChange:z})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{label:"Cognome",name:"lname",value:r.lname,error:i.lname,fullWidth:!0,onChange:z})}),e(a,{item:!0,xs:12,children:e(t,{label:"Email",name:"email",value:r.email,error:i.email,fullWidth:!0,onChange:z,type:"email"})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{label:"Password",name:"password",value:r.password,error:i.password,fullWidth:!0,onChange:z,type:"password",helperText:i.password?"le password devono coincidere":""})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{label:"Ripeti password",name:"passwordRepeat",value:r.passwordRepeat,error:i.passwordRepeat,fullWidth:!0,onChange:z,type:"password",helperText:i.passwordRepeat?"le password devono coincidere":""})})]})]})})}),e(u,{mb:3,children:e(A,{children:c(u,{p:2,children:[e(C,{variant:"h6",gutterBottom:!0,children:"Aggiungi la tua azienda"}),c(a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(a,{item:!0,xs:12,children:e(t,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:f.denominazione,error:h.denominazione,fullWidth:!0,onChange:w})}),e(a,{item:!0,xs:2,children:e(t,{label:"Nazione",name:"idFiscaleIVAPaese",value:f.idFiscaleIVAPaese,error:h.idFiscaleIVAPaese,fullWidth:!0,onChange:w})}),e(a,{item:!0,xs:10,children:e(t,{label:"Partita IVA",name:"idFiscaleIVACodice",value:f.idFiscaleIVACodice,error:h.idFiscaleIVACodice,fullWidth:!0,onChange:w})}),e(a,{item:!0,xs:12,children:e(t,{label:"Codice Fiscale",name:"codiceFiscale",value:f.codiceFiscale,error:h.codiceFiscale,fullWidth:!0,onChange:w})})]})]})})}),e(u,{mb:3,children:e(A,{children:c(u,{p:2,children:[e(C,{gutterBottom:!0,variant:"h6",children:"Aggiungi la sede della tua azienda"}),c(a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(a,{item:!0,xs:10,children:e(t,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:m.indirizzo,error:d.indirizzo,required:!0,onChange:v})}),e(a,{item:!0,xs:2,children:e(t,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:m.numeroCivico,error:d.numeroCivico,onChange:v})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"CAP",name:"cap",value:m.cap,error:d.cap,required:!0,onChange:v})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Comune",name:"comune",value:m.comune,error:d.comune,required:!0,onChange:v})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Provincia",name:"provincia",value:m.provincia,error:d.provincia,onChange:v,helperText:"Esempio: BS"})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Nazione",name:"nazione",value:m.nazione,error:d.nazione,onChange:v,required:!0,helperText:"Esempio: IT"})})]})]})})}),e(u,{mb:16,children:e(A,{children:c(u,{p:2,children:[e(C,{gutterBottom:!0,variant:"h6",children:"Aggiungi il nome del tuo negozio"}),e(t,{fullWidth:!0,label:"Nome Negozio",name:"nome",value:x.nome,error:b.nome,onChange:P})]})})})]}),e(U,{handleClick:O,disabled:j})]})};export{he as default};
