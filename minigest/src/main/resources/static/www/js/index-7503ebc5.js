import{r as O,_ as F,v as Y,c as J,a as i,Y as T,Z as D,$ as Q,R as z,j as S,F as q,a0 as X}from"./index-00a32bb3.js";import{e as ee,a as U,E as Z,u as ne,b as K,T as x}from"./index-e2b8dcc8.js";import{a as ie}from"./exists-ad1d3336.js";import{g as re,a as te,s as oe,e as ae,c as se,b as ce,B as A}from"./Box-6ac249dd.js";import{P as R,A as _}from"./Alert-eb07ba65.js";import{T as E}from"./Typography-13f90806.js";import"./ButtonBase-91bfc194.js";const le=O.createContext(),L=le;function ue(e){return re("MuiGrid",e)}const de=[0,1,2,3,4,5,6,7,8,9,10],pe=["column-reverse","column","row-reverse","row"],me=["nowrap","wrap-reverse","wrap"],V=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],P=te("MuiGrid",["root","container","item","zeroMinWidth",...de.map(e=>`spacing-xs-${e}`),...pe.map(e=>`direction-xs-${e}`),...me.map(e=>`wrap-xs-${e}`),...V.map(e=>`grid-xs-${e}`),...V.map(e=>`grid-sm-${e}`),...V.map(e=>`grid-md-${e}`),...V.map(e=>`grid-lg-${e}`),...V.map(e=>`grid-xl-${e}`)]),ge=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function I(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function fe({theme:e,ownerState:t}){let r;return e.breakpoints.keys.reduce((n,a)=>{let o={};if(t[a]&&(r=t[a]),!r)return n;if(r===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const d=T({values:t.columns,breakpoints:e.breakpoints.values}),u=typeof d=="object"?d[a]:d;if(u==null)return n;const c=`${Math.round(r/u*1e8)/1e6}%`;let m={};if(t.container&&t.item&&t.columnSpacing!==0){const s=e.spacing(t.columnSpacing);if(s!=="0px"){const v=`calc(${c} + ${I(s)})`;m={flexBasis:v,maxWidth:v}}}o=F({flexBasis:c,flexGrow:0,maxWidth:c},m)}return e.breakpoints.values[a]===0?Object.assign(n,o):n[e.breakpoints.up(a)]=o,n},{})}function he({theme:e,ownerState:t}){const r=T({values:t.direction,breakpoints:e.breakpoints.values});return D({theme:e},r,n=>{const a={flexDirection:n};return n.indexOf("column")===0&&(a[`& > .${P.item}`]={maxWidth:"none"}),a})}function H({breakpoints:e,values:t}){let r="";Object.keys(t).forEach(a=>{r===""&&t[a]!==0&&(r=a)});const n=Object.keys(e).sort((a,o)=>e[a]-e[o]);return n.slice(0,n.indexOf(r))}function xe({theme:e,ownerState:t}){const{container:r,rowSpacing:n}=t;let a={};if(r&&n!==0){const o=T({values:n,breakpoints:e.breakpoints.values});let d;typeof o=="object"&&(d=H({breakpoints:e.breakpoints.values,values:o})),a=D({theme:e},o,(u,c)=>{var m;const s=e.spacing(u);return s!=="0px"?{marginTop:`-${I(s)}`,[`& > .${P.item}`]:{paddingTop:I(s)}}:(m=d)!=null&&m.includes(c)?{}:{marginTop:0,[`& > .${P.item}`]:{paddingTop:0}}})}return a}function ve({theme:e,ownerState:t}){const{container:r,columnSpacing:n}=t;let a={};if(r&&n!==0){const o=T({values:n,breakpoints:e.breakpoints.values});let d;typeof o=="object"&&(d=H({breakpoints:e.breakpoints.values,values:o})),a=D({theme:e},o,(u,c)=>{var m;const s=e.spacing(u);return s!=="0px"?{width:`calc(100% + ${I(s)})`,marginLeft:`-${I(s)}`,[`& > .${P.item}`]:{paddingLeft:I(s)}}:(m=d)!=null&&m.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${P.item}`]:{paddingLeft:0}}})}return a}function we(e,t,r={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[r[`spacing-xs-${String(e)}`]];const n=[];return t.forEach(a=>{const o=e[a];Number(o)>0&&n.push(r[`spacing-${a}-${String(o)}`])}),n}const ze=oe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:n,direction:a,item:o,spacing:d,wrap:u,zeroMinWidth:c,breakpoints:m}=r;let s=[];n&&(s=we(d,m,t));const v=[];return m.forEach(w=>{const h=r[w];h&&v.push(t[`grid-${w}-${String(h)}`])}),[t.root,n&&t.container,o&&t.item,c&&t.zeroMinWidth,...s,a!=="row"&&t[`direction-xs-${String(a)}`],u!=="wrap"&&t[`wrap-xs-${String(u)}`],...v]}})(({ownerState:e})=>F({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),he,xe,ve,fe);function Ce(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const r=[];return t.forEach(n=>{const a=e[n];if(Number(a)>0){const o=`spacing-${n}-${String(a)}`;r.push(o)}}),r}const be=e=>{const{classes:t,container:r,direction:n,item:a,spacing:o,wrap:d,zeroMinWidth:u,breakpoints:c}=e;let m=[];r&&(m=Ce(o,c));const s=[];c.forEach(w=>{const h=e[w];h&&s.push(`grid-${w}-${String(h)}`)});const v={root:["root",r&&"container",a&&"item",u&&"zeroMinWidth",...m,n!=="row"&&`direction-xs-${String(n)}`,d!=="wrap"&&`wrap-xs-${String(d)}`,...s]};return ce(v,ue,t)},Se=O.forwardRef(function(t,r){const n=Y({props:t,name:"MuiGrid"}),{breakpoints:a}=ee(),o=ae(n),{className:d,columns:u,columnSpacing:c,component:m="div",container:s=!1,direction:v="row",item:w=!1,rowSpacing:h,spacing:W=0,wrap:C="wrap",zeroMinWidth:G=!1}=o,b=J(o,ge),y=h||W,j=c||W,M=O.useContext(L),N=s?u||12:M,k={},B=F({},b);a.keys.forEach(f=>{b[f]!=null&&(k[f]=b[f],delete B[f])});const l=F({},o,{columns:N,container:s,direction:v,item:w,rowSpacing:y,columnSpacing:j,wrap:C,zeroMinWidth:G,spacing:W},k,{breakpoints:a.keys}),g=be(l);return i(L.Provider,{value:N,children:i(ze,F({ownerState:l,className:se(g.root,d),as:m,ref:r},B))})}),p=Se;function Ae(e="IT",t=""){return async r=>{U.get(`${Z.AZIENDE}/exists?nazione=${e}&codice=${t}`).then(n=>{r(Q(n.data))}).catch(n=>{let a=!1;n.response?a=n.response.data:a=!1,console.log(a)})}}function $e(e){return async t=>{U.post(`${Z.AUTH}/register`,e).then(r=>{console.log(r),window.location.href="/app"}).catch(r=>{console.log(r);let n="Errore";r.response?n=r.response.data:n="Errore",console.log(n)})}}const Ne=()=>{const e=ne(),{exists:t}=K(l=>l.account),{exists:r}=K(l=>l.aziende),[n,a]=z.useState({nome:"",cognome:"",email:"",password:"",passwordRepeat:""}),[o,d]=z.useState({nome:!0,cognome:!0,email:!0,password:!0,passwordRepeat:!0});z.useEffect(()=>{e(ie(n.email))},[n]);const u=l=>{const{value:g,name:f}=l.target;a({...n,[f]:g}),d({...o,[f]:g.toString().length<1})};z.useEffect(()=>{d({...o,password:n.password!==n.passwordRepeat||n.password.toString().length<1,passwordRepeat:n.password!==n.passwordRepeat||n.passwordRepeat.toString().length<1})},[n]);const[c,m]=z.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[s,v]=z.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0});z.useEffect(()=>{e(Ae(c.idFiscaleIVAPaese,c.idFiscaleIVACodice))},[c]);const w=l=>{const{name:g,value:f}=l.target;m({...c,[g]:f}),r?(v({...s,denominazione:!1,codiceFiscale:!1}),(g==="idFiscaleIVACodice"||g=="idFiscaleIVAPaese")&&v({...s,[g]:f.toString().length<1})):v({...s,[g]:f.toString().length<1})},[h,W]=z.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[C,G]=z.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),b=l=>{const{name:g,value:f,required:$}=l.target;W({...h,[g]:f}),$&&G({...C,[g]:f.toString().length<1})},[y,j]=z.useState({nome:""}),M=l=>{const{value:g}=l.target;j({...y,nome:g})},[N,k]=z.useState(!0);z.useEffect(()=>{const l=!Object.values(o).every($=>$===!1),g=r?!1:!Object.values(s).every($=>$===!1),f=r?!1:!Object.values(C).every($=>$===!1);console.log(l,g,f),k(l||g||f)},[r,o,s,C]);const B=()=>{let l={nome:n.nome,cognome:n.cognome,email:n.email,password:n.password};r?l={...l,addMeTo:{idFiscaleIVAPaese:c.idFiscaleIVAPaese,idFiscaleIVACodice:c.idFiscaleIVACodice}}:l={...l,azienda:{...c,sede:{...h},negozi:[{...y}]}},e($e(l))};return S(q,{children:[i(A,{mb:3,children:i(R,{children:S(A,{p:2,children:[i(E,{variant:"h6",gutterBottom:!0,children:"Dati Personali"}),S(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",spacing:2,children:[i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Nome",name:"nome",value:n.nome,error:o.nome,onChange:u,required:!0})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Cognome",name:"cognome",value:n.cognome,error:o.cognome,onChange:u,required:!0})}),S(p,{item:!0,xs:12,children:[i(x,{fullWidth:!0,label:"Email",name:"email",value:n.email,error:o.email,onChange:u,type:"email",required:!0}),n.email.toString().length>0&&i(_,{severity:t?"error":"success",variant:"outlined",children:t?"Account già registrato!":"Account disponibile"})]}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Password",name:"password",value:n.password,error:o.password,onChange:u,type:"password",helperText:o.password?"le password devono coincidere":"password conforme",required:!0})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Ripeti Password",name:"passwordRepeat",value:n.passwordRepeat,error:o.passwordRepeat,onChange:u,type:"password",helperText:o.password?"le password devono coincidere":"password conforme",required:!0})})]})]})})}),i(A,{mb:3,children:i(R,{children:S(A,{p:2,children:[i(E,{variant:"h6",gutterBottom:!0,children:"Aggiungi la tua azienda"}),S(p,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[i(p,{item:!0,xs:12,children:i(x,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:c.denominazione,error:s.denominazione,fullWidth:!0,onChange:w})}),i(p,{item:!0,xs:2,children:i(x,{label:"Nazione",name:"idFiscaleIVAPaese",value:c.idFiscaleIVAPaese,error:s.idFiscaleIVAPaese,fullWidth:!0,onChange:w})}),i(p,{item:!0,xs:10,children:i(x,{label:"Partita IVA",name:"idFiscaleIVACodice",value:c.idFiscaleIVACodice,error:s.idFiscaleIVACodice,fullWidth:!0,onChange:w})}),i(p,{item:!0,xs:12,children:c.idFiscaleIVAPaese.toString().length>0&&c.idFiscaleIVACodice.toString().length>0&&i(_,{severity:r?"error":"success",variant:"outlined",children:r?"Azienda già esistente! Dovrai essere aggiunto manualmente da un nostro moderatore!":"Azienda disponibile"})}),i(p,{item:!0,xs:12,children:i(x,{label:"Codice Fiscale",name:"codiceFiscale",value:c.codiceFiscale,error:s.codiceFiscale,fullWidth:!0,onChange:w})})]})]})})}),!r&&S(q,{children:[i(A,{mb:3,children:i(R,{children:S(A,{p:2,children:[i(E,{gutterBottom:!0,variant:"h6",children:"Aggiungi la sede della tua azienda"}),S(p,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[i(p,{item:!0,xs:10,children:i(x,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:h.indirizzo,error:C.indirizzo,required:!0,onChange:b})}),i(p,{item:!0,xs:2,children:i(x,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:h.numeroCivico,error:C.numeroCivico,onChange:b})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"CAP",name:"cap",value:h.cap,error:C.cap,required:!0,onChange:b})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Comune",name:"comune",value:h.comune,error:C.comune,required:!0,onChange:b})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Provincia",name:"provincia",value:h.provincia,error:C.provincia,onChange:b,helperText:"Esempio: BS"})}),i(p,{item:!0,xs:12,sm:6,children:i(x,{fullWidth:!0,label:"Nazione",name:"nazione",value:h.nazione,error:C.nazione,onChange:b,required:!0,helperText:"Esempio: IT"})})]})]})})}),i(A,{mb:16,children:i(R,{children:S(A,{p:2,children:[i(E,{gutterBottom:!0,variant:"h6",children:"Aggiungi il nome del tuo negozio"}),i(E,{variant:"subtitle1",gutterBottom:!0,children:"Se non hai un negozio non aggiungerlo"}),i(x,{fullWidth:!0,label:"Nome Negozio",name:"nome",value:y.nome,onChange:M})]})})})]}),i(X,{onClick:B,disabled:N||t})]})};export{Ne as default};
