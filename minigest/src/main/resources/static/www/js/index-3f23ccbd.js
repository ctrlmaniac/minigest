import{E as F,G as P,H as T,I as W,R as o,a as e,F as j,j as f}from"./index-238283c1.js";import{a as k,E as B,u as D,b as L,T as g}from"./index-f0dc1343.js";import{a as R}from"./exists-cefee72a.js";import{l as U}from"./lodash-d0fa4ec6.js";import{C as H}from"./Container-4a28c9d0.js";import{P as I}from"./ButtonBase-7d301f46.js";import{B as c}from"./Box-5629869d.js";import{A as w}from"./Alert-5b7fcd54.js";import{F as G,C as N}from"./FormControlLabel-22d04b95.js";import{B as v}from"./Button-12c0442b.js";import{L as O}from"./LinearProgress-478735fd.js";import"./Typography-19065848.js";function V(l){return async r=>{r(F()),k.post(`${B.AUTH}/login`,l).then(t=>{r(P(t.data)),setTimeout(()=>{window.location.href="/app"},1e3)}).catch(t=>{let n="Errore";t.response?n=t.response.data:n="Errore",r(T(n))})}}const se=()=>{const l=W(),r=D(),{exists:t,login:n,loginError:b,loginResponse:m}=L(s=>s.account),[a,x]=o.useState({email:"",password:""}),[i,E]=o.useState({email:!0,password:!0}),[S,C]=o.useState(!1),[y,A]=o.useState(!0),d=s=>{const{name:p,value:h}=s.target;x({...a,[p]:h}),E({...i,[p]:h.toString().length<1})};o.useEffect(()=>{A(!Object.values(i).every(s=>s===!1))},[i]),o.useEffect(()=>{r(R(a.email))},[a]);const u=s=>{s.preventDefault(),r(V(a))};return e(j,{children:f(H,{maxWidth:"xs",children:[e(I,{children:e("form",{onSubmit:u,method:"post",children:f(c,{p:2,children:[e(g,{fullWidth:!0,label:"Email",name:"email",value:a.email,error:i.email,onChange:d,margin:"normal"}),a.email.toString().length>1&&e(w,{severity:t?"success":"error",variant:"outlined",children:t?"Utente esistente!":"Utente non esistente!"}),e(g,{fullWidth:!0,label:"Password",name:"password",value:a.password,error:i.password,onChange:d,margin:"normal",type:S?"text":"password"}),e(G,{value:"mostra password",control:e(N,{onChange:s=>C(s.target.checked)}),label:"mostra password"}),e(c,{mt:1,mb:2,children:e(v,{fullWidth:!0,variant:"contained",type:"submit",disabled:y||!t,onClick:u,children:"Accedi"})}),e(c,{children:e(v,{fullWidth:!0,variant:"text",onClick:()=>l("/account/password/forgot"),children:"password dimenticata"})}),!U.isEmpty(m)&&e(w,{severity:b?"error":"success",sx:{marginTop:2},variant:"outlined",children:m})]})})}),n&&e(O,{})]})})};export{se as default};
