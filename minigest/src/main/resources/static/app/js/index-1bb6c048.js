import{a_ as w,a$ as P,b0 as $,ao as k,i as B,R as h,aL as j,l as f,j as e,V as R,d as o,F as x,b1 as q,b2 as N,af as V}from"./index-4508a384.js";import{a as W,E as Y,I as G}from"./index-638748d8.js";import{f as L,e as y,B as l,T as M,P as T}from"./hooks-feb29949.js";import{A as D}from"./Alert-79195361.js";import{A as H}from"./AlertTitle-025f351d.js";import{I as Q}from"./IconBuildingWarehouse-6e7a8085.js";import{G as u}from"./Grid-b984e7a0.js";import{T as F}from"./TextField-0bc7661e.js";import{F as U}from"./FormControlLabel-eb60d8d7.js";import{C as _}from"./Checkbox-0b121ea0.js";import{T as J,a as E,b as i,c as K}from"./TableRow-89215d33.js";import{T as O}from"./TableHead-4c925618.js";import{I as X,a as Z,b as ee}from"./IconInfoCircle-677b1f73.js";import{I as z}from"./IconFile-bb82f1a6.js";import"./createReactComponent-3ef021e5.js";import"./Grow-e4ee19b9.js";import"./useFormControl-3c13f0cf.js";function ne(r,p,c="sdi=false"){return async s=>{s(w()),W.get(`${Y.FATTURE}/${r}/${p}?${c}`).then(t=>{s(P(t.data))}).catch(t=>{let a="Errore";t.response?a=t.response.data:a="Errore",s($(a))})}}const Ce=()=>{const{mode:r}=k(),p=L(),c=B(),{list:s}=y(n=>n.fatture),{selected:t}=y(n=>n.aziende),[a,v]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,sdi:!1}),[d,b]=h.useState({anno:!1,mese:!1}),[C,A]=j({sdi:a.sdi.toString(),anno:a.anno.toString(),mese:a.mese.toString()}),I=n=>{const{name:g,value:S}=n.target;v({...a,[g]:S});const m=parseInt(S);g==="anno"&&b({...d,anno:m<1970||m>new Date().getFullYear()}),g==="mese"&&b({...d,mese:m<1||m>12})};return h.useEffect(()=>{A({anno:a.anno.toString(),mese:a.mese.toString(),sdi:a.sdi.toString()})},[a]),h.useEffect(()=>{f.isEmpty(t)||(r==="vendita"||r==="acquisto")&&p(ne(r,t.id,C.toString()))},[r,t,C]),r!=="acquisto"&&r!=="vendita"?e(R,{message:"Pagina non trovata!"}):o(x,{children:[e(l,{mb:3,children:o(M,{variant:"h3",children:["Fatture ",r]})}),f.isEmpty(t)?e(l,{mb:3,children:o(D,{severity:"error",variant:"outlined",children:[e(H,{children:"Devi selezionare un'azienda!"}),"Per visualizzare le fatture devi prima selezionare un'azienda! Clicca sull'icona in alto a sinistra ",e(Q,{})," per selezionarne una!"]})}):o(x,{children:[e(l,{mb:3,children:e(T,{children:e(l,{p:2,children:o(u,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[e(u,{item:!0,xs:12,sm:6,children:e(F,{label:"Anno",name:"anno",value:a.anno,error:d.anno,onChange:I,type:"number",inputProps:{step:1,min:1970,max:new Date().getFullYear()},fullWidth:!0})}),e(u,{item:!0,xs:12,sm:6,children:e(F,{label:"Mese",name:"mese",value:a.mese,error:d.mese,onChange:I,type:"number",inputProps:{step:1,min:1,max:12},fullWidth:!0})}),e(u,{item:!0,xs:12,children:e(U,{value:"ordina per data sdi",control:e(_,{onChange:n=>v({...a,sdi:n.target.checked})}),label:"ordina per data sdi"})})]})})})}),f.isEmpty(s)?e(D,{severity:"info",variant:"outlined",children:"Non ci sono fatture, aggiungine una!"}):e(l,{mb:3,children:e(T,{children:e(l,{p:3,children:o(J,{children:[e(O,{children:o(E,{children:[e(i,{children:"Documento"}),e(i,{children:"Data"}),e(i,{children:"Data SDI"}),e(i,{children:r==="vendita"?"Committente":"Cedente"}),e(i,{children:"Numero"}),e(i,{sx:{width:50},align:"center",children:e(X,{})}),e(i,{sx:{width:50},align:"center",children:e(z,{})})]})}),e(K,{children:s==null?void 0:s.map(n=>o(E,{children:[e(i,{children:n.tipoDocumento.codice}),e(i,{children:n.data}),e(i,{children:n.dataSDI}),e(i,{children:r==="vendita"?n.committente.denominazione:n.cedente.denominazione}),e(i,{children:n.numero}),e(i,{children:n.evasa?e(Z,{color:q[500]}):e(ee,{color:N[500]})}),e(i,{children:e(G,{color:"info",onClick:()=>c(`/docfisc/fatture/dettagli/${n.id}`),children:e(z,{})})})]},n.id))})]})})})}),e(V,{onClick:()=>c("/docfisc/fatture/aggiungi")})]})]})};export{Ce as default};
