import{aE as k,aF as w,aG as K,i as $,R as p,d as P,F as M,j as e,l as A,ai as Z,av as H,at as J,B as L,V as Q}from"./index-6a75a5de.js";import{g as U}from"./get-8c7062d6.js";import{f as W,e as T,B as F,T as X,P as Y}from"./hooks-8b6b3ce5.js";import{a as _}from"./exists-e894e15d.js";import{a as ee,E as ie}from"./index-db9e3c6a.js";import{G as a}from"./Grid-f0b91695.js";import{T as t}from"./TextField-09f22a56.js";import{A as y}from"./Alert-863a23eb.js";import{S as ae}from"./Snackbar-c915bc05.js";import"./Grow-234efcfb.js";import"./useFormControl-ec2a69e6.js";function ne(i,f){return async r=>{r(k()),ee.put(`${ie.AZIENDE}/${i}`,f).then(s=>{r(w(s.data))}).catch(s=>{let u="Errore";s.response?u=s.response.data:u="Errore",r(K(u))})}}const re=({dettagli:i})=>{var E,I,b,x,V,S;const f=$(),r=W(),{exists:s,putting:u,putError:C,putResponse:g}=T(l=>l.aziende),[n,j]=p.useState({denominazione:i.denominazione,idFiscaleIVAPaese:i.idFiscaleIVAPaese,idFiscaleIVACodice:i.idFiscaleIVACodice,codiceFiscale:i.codiceFiscale}),[h,N]=p.useState({denominazione:!1,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!1,codiceFiscale:!1});p.useEffect(()=>{r(_(n.idFiscaleIVAPaese,n.idFiscaleIVACodice))},[n]);const v=l=>{const{name:o,value:d}=l.target;j({...n,[o]:d}),N({...h,[o]:d.toString().length<1})},[m,q]=p.useState({indirizzo:(E=i.sede)==null?void 0:E.indirizzo,numeroCivico:(I=i.sede)==null?void 0:I.numeroCivico,cap:(b=i.sede)==null?void 0:b.cap,comune:(x=i.sede)==null?void 0:x.comune,provincia:(V=i.sede)==null?void 0:V.provincia,nazione:(S=i.sede)==null?void 0:S.nazione}),[c,B]=p.useState({indirizzo:!1,numeroCivico:!1,cap:!1,comune:!1,provincia:!1,nazione:!1}),z=l=>{const{name:o,value:d,required:G}=l.target;q({...m,[o]:d}),G&&B({...c,[o]:d.toString().length<1})},[D,O]=p.useState(!0);p.useEffect(()=>{const l=!Object.values(h).every(d=>d===!1),o=!Object.values(c).every(d=>d===!1);O(l||o)},[h,c]);const R=()=>{var o;const l={...n,sede:{id:(o=i.sede)==null?void 0:o.id,...m}};r(ne(i.id,l)),setTimeout(()=>{r(H()),f("/aziende")},1e3)};return P(M,{children:[e(F,{mb:3,children:e(X,{variant:"h3",children:"Aggiungi Azienda"})}),e(F,{mb:3,children:e(Y,{children:e(F,{p:2,children:P(a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(a,{item:!0,xs:12,children:e(t,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:n.denominazione,error:h.denominazione,fullWidth:!0,onChange:v})}),e(a,{item:!0,xs:2,children:e(t,{label:"Nazione",name:"idFiscaleIVAPaese",value:n.idFiscaleIVAPaese,error:h.idFiscaleIVAPaese,fullWidth:!0,onChange:v})}),e(a,{item:!0,xs:10,children:e(t,{label:"Partita IVA",name:"idFiscaleIVACodice",value:n.idFiscaleIVACodice,error:h.idFiscaleIVACodice,fullWidth:!0,onChange:v})}),e(a,{item:!0,xs:12,children:n.idFiscaleIVAPaese!==i.idFiscaleIVAPaese&&n.idFiscaleIVACodice!==i.idFiscaleIVACodice&&e(y,{severity:s?"error":"success",children:s?"Azienda giÃ  esistente!":"Azienda disponibile"})}),e(a,{item:!0,xs:12,children:e(t,{label:"Codice Fiscale",name:"codiceFiscale",value:n.codiceFiscale,error:h.codiceFiscale,fullWidth:!0,onChange:v})}),e(a,{item:!0,xs:10,children:e(t,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:m.indirizzo,error:c.indirizzo,required:!0,onChange:z})}),e(a,{item:!0,xs:2,children:e(t,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:m.numeroCivico,error:c.numeroCivico,onChange:z})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"CAP",name:"cap",value:m.cap,error:c.cap,required:!0,onChange:z})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Comune",name:"comune",value:m.comune,error:c.comune,required:!0,onChange:z})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Provincia",name:"provincia",value:m.provincia,error:c.provincia,onChange:z,helperText:"Esempio: BS"})}),e(a,{item:!0,xs:12,sm:6,children:e(t,{fullWidth:!0,label:"Nazione",name:"nazione",value:m.nazione,error:c.nazione,onChange:z,required:!0,helperText:"Esempio: IT"})})]})})})}),e(ae,{open:!A.isEmpty(g),children:e(y,{severity:C?"error":"info",children:g})}),e(Z,{onClick:R,disabled:s||D,loading:u})]})},ze=()=>{const i=W(),{id:f}=J(),{dettagli:r,getting:s,getError:u}=T(C=>C.aziende);return p.useEffect(()=>{A.isEmpty(f)||i(U(f))},[]),s?e(L,{}):!A.isEmpty(u)||A.isEmpty(r)?e(Q,{message:u||"Errore di caricamento"}):e(re,{dettagli:r})};export{ze as default};
