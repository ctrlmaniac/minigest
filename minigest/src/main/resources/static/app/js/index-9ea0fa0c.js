import{bk as m,bl as h,bm as g,i as E,R as b,d as c,F as S,j as a,l as f,b6 as y}from"./index-8a79851f.js";import{f as C,E as F}from"./index-cc2949c7.js";import{f as v,e as x,B as i,T as A,P as T}from"./hooks-ce677624.js";import{B}from"./Button-9693a81a.js";import{L as R}from"./LinearProgress-a07e8e93.js";import{S as j}from"./Snackbar-fcd96b2d.js";import{A as k}from"./Alert-80b7652b.js";import"./Grow-1ef8b3d3.js";function D(r){return async e=>{e(m()),C.post(`${F.FATTURE}/upload`,r).then(t=>{e(h(t.data))}).catch(t=>{let o="Errore";t.response?o=t.response.data:o="Errore",e(g(o))})}}const I=()=>{const r=E(),e=v(),{uploading:t,uploadError:o,response:n,dettagli:l}=x(s=>s.fatture),[p,u]=b.useState();return c(S,{children:[a(i,{mb:3,children:a(A,{variant:"h3",children:"Carica Fattura"})}),a(i,{children:a(T,{children:c(i,{p:2,children:[a("input",{type:"file",name:"file",id:"file",onChange:s=>{const{files:d}=s.target;d&&u(d[0])}}),a(B,{variant:"contained",onClick:()=>{if(p){const s=new FormData;s.append("file",p),e(D(s)),o||f.isEmpty(l)||setTimeout(()=>{r("/docfisc/fatture/dettagli/"+l.id)},2e3)}},children:"Carica"}),t&&a(R,{})]})})}),a(j,{open:!f.isEmpty(n),autoHideDuration:2e3,onClose:()=>e(y()),children:a(k,{severity:"info",children:n})})]})};export{I as default};
