import{f as I,l as s,j as n,F as v,b as e,R as z,Z as G,$ as H,a0 as P,a1 as X,a2 as Z,a3 as _,a4 as J,a5 as K}from"./index-b0edc525.js";import{d as g,P as T,B as f,T as h,e as B}from"./hooks-f9dc248c.js";import{A as p}from"./Alert-bf912103.js";import{A as E}from"./AlertTitle-cc53b190.js";import{I as b}from"./IconBuildingWarehouse-8cf92b18.js";import{a as k,T as M}from"./TextField-11ad0b6f.js";import{L as N,a as W}from"./ListItemText-ae245545.js";import{p as O}from"./post-52b146ee.js";import{B as D}from"./Button-5e2f45ca.js";import{I as L}from"./IconBuildingStore-e617b86f.js";import{a as q,E as R,I as A}from"./index-c1f533ec.js";import{T as $,a as C,b as a,c as F}from"./TableRow-1c21061b.js";import{T as U}from"./TableHead-339200f6.js";import{I as x}from"./IconFile-f40274b7.js";import{l as Q}from"./list-3b9aa8f5.js";import{I as Y,a as ee,b as ie}from"./IconInfoCircle-1ea9dc07.js";import{G as y}from"./Grid-6e4f877e.js";import"./createReactComponent-9058c6b6.js";import"./useFormControl-1aadaf80.js";import"./Portal-3b6c3c12.js";import"./Grow-f5e1a89c.js";import"./useControlled-467ac937.js";const te=()=>{var d;const o=I(),{selected:l}=g(t=>t.aziende),{dettagli:i}=g(t=>t.account);let r=e(h,{children:"Caricamento in corso..."});return s.isEmpty(i==null?void 0:i.aziende)?r=e(h,{children:"Contatta il moderatore per farti aggiungere alla tua azienda!"}):r=n(v,{children:[s.isEmpty(l)&&n(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}),e(k,{children:(d=i==null?void 0:i.aziende)==null?void 0:d.map(t=>e(N,{selected:!s.isEmpty(l)&&t.id===l.id,onClick:()=>o(`/aziende/dettagli/${t.id}`),children:e(W,{primary:t.denominazione})},t.id))})]}),e(T,{sx:{height:"100%"},children:n(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Le tue aziende"}),r]})})},re=()=>{const o=B(),l=I(),{selected:i}=g(u=>u.aziende),{selected:r}=g(u=>u.negozi),[d,t]=z.useState(""),[c,m]=z.useState(!0),j=u=>{const{value:w}=u.target;t(w),m(w.toString().length<1)},V=()=>{s.isEmpty(i)?alert("Errore!"):o(O({nome:d,azienda:i}))};let S=e(h,{children:"Caricamento in corso..."});return s.isEmpty(i)?S=n(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):s.isEmpty(i.negozi)?S=n(v,{children:[e(h,{children:"Devi aggiungere almeno un negozio!"}),n(h,{children:["Il negozio verrà aggiunto a ",i.denominazione]}),e(M,{label:"Nome negozio",fullWidth:!0,value:d,error:c,required:!0,margin:"normal",onChange:j}),e(D,{fullWidth:!0,variant:"contained",disabled:c,onClick:V,children:"Salva"})]}):S=n(v,{children:[s.isEmpty(r)&&n(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}),e(k,{children:i.negozi.map(u=>e(N,{selected:!s.isEmpty(r)&&u.id===r.id,onClick:()=>l("/negozi"),children:e(W,{primary:u.nome})},u.id))})]}),e(T,{sx:{height:"100%"},children:n(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"I tuoi negozi"}),S]})})};function ne(o){return async l=>{l(G()),q.get(`${R.CHIUSURE_FISCALI}/last7?negozio=${o}`).then(i=>{l(H(i.data))}).catch(i=>{let r="Errore";i.response?r=i.response.data:r="Errore",l(P(r))})}}const ae=()=>{const o=I(),l=B(),{selected:i}=g(m=>m.negozi),{list:r,listError:d,response:t}=g(m=>m.chiusureFiscali);z.useEffect(()=>{s.isEmpty(i)||l(ne(i.id))},[i]);let c=e(h,{children:"caricamento in corso..."});return s.isEmpty(i)?c=n(p,{severity:"error",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}):d?c=e(p,{severity:"error",variant:"outlined",children:t||"Errore di caricamento"}):s.isEmpty(r)?c=e(p,{severity:"info",variant:"outlined",children:"Non ci sono chiusure fiscali"}):c=n($,{children:[e(U,{children:n(C,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F"}),e(a,{sx:{width:50},align:"center",children:e(A,{children:e(x,{})})})]})}),e(F,{children:r.map(m=>n(C,{children:[e(a,{children:m.data}),n(a,{children:["€ ",m.totale]}),e(a,{children:m.numeroDocFisc}),e(a,{sx:{width:50},align:"center",children:e(A,{color:"info",onClick:()=>o(`/docfisc/chiusure-fiscali/dettagli/${m.id}`),children:e(x,{})})})]},m.id))})]}),e(v,{children:e(T,{children:n(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime chiusure fiscali"}),c,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/chiusure-fiscali"),children:"Vai alla lista"})})]})})})},le=()=>{const o=I(),l=B(),{listError:i,list:r,response:d}=g(c=>c.scadenzario);z.useEffect(()=>{l(Q())},[]);let t=e(h,{children:"caricamento in corso..."});return i?t=e(p,{severity:"error",variant:"outlined",children:d||"Errore di caricamento"}):s.isEmpty(r)?t=e(p,{severity:"success",variant:"outlined",children:"Non hai scadenze!"}):t=e($,{children:e(F,{children:r.map(c=>n(C,{children:[e(a,{sx:{width:50},align:"center",children:e(A,{color:"primary",onClick:()=>o(`/${c.tipo==="fattura"?"docfisc/":""}${c.tipo}/dettagli/${c.id}`),children:e(x,{})})}),e(a,{sx:{width:100},children:c.tipo}),e(a,{children:c.dataScadenza}),n(a,{align:"right",children:["€ ",c.totale]})]},c.id))})}),e(v,{children:e(T,{children:n(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Scadenzario"}),t,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/scadenzario"),children:"Vai allo scadenzario"})})]})})})};function oe(o){return async l=>{l(X()),q.get(`${R.FATTURE}/last10?committente=${o}`).then(i=>{l(Z(i.data))}).catch(i=>{let r="Errore";i.response?r=i.response.data:r="Errore",l(_(r))})}}const ce=()=>{const o=I(),l=B(),{selected:i}=g(t=>t.aziende),{list:r}=g(t=>t.fatture);z.useEffect(()=>{s.isEmpty(i)||l(oe(i.id))},[i]);let d=e(h,{children:"Caricamento in corso..."});return s.isEmpty(i)?d=n(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):s.isEmpty(r)?d=e(p,{severity:"info",variant:"outlined",children:"Non hai fatture acquisto! Aggiungine una per vederla qua!"}):d=n(v,{children:[e(f,{sx:{overflowX:"auto"},mb:2,children:n($,{children:[e(U,{children:n(C,{children:[e(a,{align:"center",sx:{width:50},children:e(x,{})}),e(a,{children:"Doc."}),e(a,{children:"Data"}),e(a,{children:"Cedente"}),e(a,{align:"right",children:"Totale"}),e(a,{align:"center",sx:{width:50},children:e(Y,{})})]})}),e(F,{children:r==null?void 0:r.map(t=>n(C,{children:[e(a,{align:"center",children:e(A,{color:"primary",onClick:()=>o("/docfisc/fatture/dettagli/"+t.id),children:e(x,{})})}),e(a,{sx:{width:100},children:t.tipoDocumento.codice}),e(a,{sx:{width:150},children:t.data}),e(a,{children:t.cedente.denominazione}),e(a,{align:"right",children:t.totale}),e(a,{align:"center",children:t.evasa?e(ee,{color:J[500]}):e(ie,{color:K[500]})})]},t.id))})]})}),e(f,{sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/fatture/acquisto"),children:"Vai alla lista"})})]}),e(T,{children:n(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime fatture acquisto"}),d]})})},Fe=()=>{const{selected:o}=g(l=>l.aziende);return e(v,{children:n(y,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"stretch",spacing:2,children:[e(y,{item:!0,xs:12,sm:6,children:e(re,{})}),e(y,{item:!0,xs:12,sm:6,children:e(te,{})}),!s.isEmpty(o)&&e(y,{item:!0,xs:12,children:e(ae,{})}),e(y,{item:!0,xs:12,children:e(ce,{})}),e(y,{item:!0,xs:12,children:e(le,{})})]})})};export{Fe as default};
