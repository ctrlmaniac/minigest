import{i as C,l as s,d as r,F as f,j as e,R as E,Z as U,$ as G,a0 as H}from"./index-2aee8fbc.js";import{e as g,P as I,B as v,T as h,f as D}from"./hooks-ac52b7c3.js";import{A as p}from"./Alert-442bcf26.js";import{A as x}from"./AlertTitle-aa3a6f5b.js";import{I as F}from"./IconBuildingWarehouse-8d2522b9.js";import{a as k,T as P}from"./TextField-2b7385a2.js";import{L as N,a as W}from"./ListItemText-b9742c00.js";import{p as V}from"./post-f213ac84.js";import{B as b}from"./Button-61285a26.js";import{I as L}from"./IconBuildingStore-d808538a.js";import{a as q,E as Z,I as T}from"./index-d540e9b2.js";import{T as $,a as B,b as d,c as w}from"./TableRow-4c838dfa.js";import{T as _}from"./TableHead-d6dd838d.js";import{I as S}from"./IconFile-096a5c9f.js";import{l as J}from"./list-84595e2e.js";import{G as z}from"./Grid-75cf535a.js";import"./createReactComponent-c382b839.js";import"./Grow-60e7aeaa.js";const K=()=>{var u;const l=C(),{selected:o}=g(n=>n.aziende),{dettagli:i}=g(n=>n.account);let t=e(h,{children:"Caricamento in corso..."});return s.isEmpty(i==null?void 0:i.aziende)?t=e(h,{children:"Devi aggiungere un'azienda!"}):t=r(f,{children:[s.isEmpty(o)&&r(p,{severity:"info",variant:"outlined",children:[e(x,{children:"Devi selezionare un'azienda!"}),"Clicca su ",e(F,{})," per selezionarne una!"]}),e(k,{children:(u=i==null?void 0:i.aziende)==null?void 0:u.map(n=>e(N,{selected:!s.isEmpty(o)&&n.id===o.id,onClick:()=>l(`/aziende/dettagli/${n.id}`),children:e(W,{primary:n.denominazione})},n.id))})]}),e(I,{sx:{height:"100%"},children:r(v,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Le tue aziende"}),t]})})},M=()=>{const l=D(),o=C(),{selected:i}=g(m=>m.aziende),{selected:t}=g(m=>m.negozi),[u,n]=E.useState(""),[a,c]=E.useState(!0),j=m=>{const{value:A}=m.target;n(A),c(A.toString().length<1)},R=()=>{s.isEmpty(i)?alert("Errore!"):l(V({nome:u,azienda:i}))};let y=e(h,{children:"Caricamento in corso..."});return s.isEmpty(i)?y=r(p,{severity:"info",variant:"outlined",children:[e(x,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(F,{})," per selezionarne una!"]}):s.isEmpty(i.negozi)?y=r(f,{children:[e(h,{children:"Devi aggiungere almeno un negozio!"}),r(h,{children:["Il negozio verrà aggiunto a ",i.denominazione]}),e(P,{label:"Nome negozio",fullWidth:!0,value:u,error:a,required:!0,margin:"normal",onChange:j}),e(b,{fullWidth:!0,variant:"contained",disabled:a,onClick:R,children:"Salva"})]}):y=r(f,{children:[s.isEmpty(t)&&r(p,{severity:"info",variant:"outlined",children:[e(x,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}),e(k,{children:i.negozi.map(m=>e(N,{selected:!s.isEmpty(t)&&m.id===t.id,onClick:()=>o("/negozi"),children:e(W,{primary:m.nome})},m.id))})]}),e(I,{sx:{height:"100%"},children:r(v,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"I tuoi negozi"}),y]})})};function O(l){return async o=>{o(U()),q.get(`${Z.CHIUSURE_FISCALI}?negozio=${l}`).then(i=>{o(G(i.data))}).catch(i=>{let t="Errore";i.response?t=i.response.data:t="Errore",o(H(t))})}}const Q=()=>{const l=C(),o=D(),{selected:i}=g(c=>c.negozi),{list:t,listError:u,response:n}=g(c=>c.chiusureFiscali);E.useEffect(()=>{s.isEmpty(i)||o(O(i.id))},[i]);let a=e(h,{children:"caricamento in corso..."});return s.isEmpty(i)?a=r(p,{severity:"error",variant:"outlined",children:[e(x,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}):u?a=e(p,{severity:"error",variant:"outlined",children:n||"Errore di caricamento"}):s.isEmpty(t)?a=e(p,{severity:"info",variant:"outlined",children:"Non ci sono chiusure fiscali"}):a=r($,{children:[e(_,{children:r(B,{children:[e(d,{children:"Data"}),e(d,{children:"Totale"}),e(d,{children:"N.D.F"}),e(d,{sx:{width:50},align:"center",children:e(T,{children:e(S,{})})})]})}),e(w,{children:t.map(c=>r(B,{children:[e(d,{children:c.data}),r(d,{children:["€ ",c.totale]}),e(d,{children:c.numeroDocFisc}),e(d,{sx:{width:50},align:"center",children:e(T,{color:"info",onClick:()=>l(`/docfisc/chiusure-fiscali/dettagli/${c.id}`),children:e(S,{})})})]},c.id))})]}),e(f,{children:e(I,{children:r(v,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime chiusure fiscali"}),a,e(v,{mt:2,sx:{textAlign:"right"},children:e(b,{onClick:()=>l("/docfisc/chiusure-fiscali"),children:"Vai alla lista"})})]})})})},X=()=>{const l=C(),o=D(),{listError:i,list:t,response:u}=g(a=>a.scadenzario);E.useEffect(()=>{o(J())},[]);let n=e(h,{children:"caricamento in corso..."});return i?n=e(p,{severity:"error",variant:"outlined",children:u||"Errore di caricamento"}):s.isEmpty(t)?n=e(p,{severity:"success",variant:"outlined",children:"Non hai scadenze!"}):n=e($,{children:e(w,{children:t.map(a=>r(B,{children:[e(d,{sx:{width:50},align:"center",children:e(T,{color:"primary",onClick:()=>l(`/docfisc/fatture/dettagli/${a.fattura.id}`),children:e(S,{})})}),e(d,{children:a.data}),r(d,{align:"right",children:["€ ",a.importo]})]},a.id))})}),e(f,{children:e(I,{children:r(v,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Scadenzario"}),n,e(v,{mt:2,sx:{textAlign:"right"},children:e(b,{onClick:()=>l("/scadenzario"),children:"Vai allo scadenzario"})})]})})})},ve=()=>e(f,{children:r(z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"stretch",spacing:2,children:[e(z,{item:!0,xs:12,sm:6,children:e(M,{})}),e(z,{item:!0,xs:12,sm:6,children:e(K,{})}),e(z,{item:!0,xs:12,children:e(Q,{})}),e(z,{item:!0,xs:12,children:e(X,{})})]})});export{ve as default};
