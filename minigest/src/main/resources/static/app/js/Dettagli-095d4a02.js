import{b3 as C,b4 as A,b5 as B,at as R,f as w,R as S,l as d,b as e,B as z,V as E,j as r,F as N,a4 as j,a5 as k,au as P,b6 as x}from"./index-740a6878.js";import{g as V}from"./get-8a4cf7f1.js";import{e as $,d as q,B as l,T as m,P as p}from"./hooks-18cf1700.js";import{a as G,E as H}from"./index-db60e9b4.js";import{G as v}from"./Grid-f0b11242.js";import{A as h}from"./Alert-85c30c87.js";import{F as L}from"./Fab-c4d5ab41.js";import{T as u,c as g,a,b as i}from"./TableRow-89f58786.js";import{T as b}from"./TableHead-b4ed6370.js";import{I as M,a as U,b as X}from"./IconInfoCircle-110e4ddc.js";import{S as _}from"./Snackbar-17246dc3.js";import"./Grow-d6fafe96.js";import"./createReactComponent-49648c72.js";function J(s){return async o=>{o(C()),G.delete(`${H.FATTURE}/${s}`).then(c=>{o(A(c.data))}).catch(c=>{let n="Errore";c.response?n=c.response.data:n="Errore",o(B(n))})}}const oe=()=>{const{id:s}=R(),o=$(),c=w(),{dettagli:n,getting:D,getError:I,response:f,removing:T,removeError:y}=q(t=>t.fatture);S.useEffect(()=>{d.isEmpty(s)||o(V(s))},[s]);const F=()=>{o(J(s)),setTimeout(()=>{x(),y||c(-1)},1e3)};return D?e(z,{}):I?e(E,{message:f||"Fattura non trovata"}):d.isEmpty(n)?e(E,{message:"Fattura non trovata"}):r(N,{children:[e(l,{mb:3,children:e(m,{variant:"h3",children:"Dettagli Fattura"})}),e(l,{mb:3,children:r(v,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[e(v,{item:!0,xs:12,sm:6,children:e(h,{variant:"outlined",severity:n.evasa?"success":"error",children:n.evasa?"Fattura pagata":"Fattura da pagare"})}),e(v,{item:!0,xs:12,sm:6,children:d.isEmpty(n.filepath)?e(h,{severity:"info",variant:"outlined",children:"Non hai caricato nessun file!"}):e(l,{sx:{textAlign:"right"},children:e(L,{variant:"extended",onClick:()=>window.open("/"+n.filepath,"_blank"),children:"Visualizza XML"})})})]})}),e(l,{mb:3,children:e(p,{children:e(l,{p:2,children:e(u,{children:r(g,{children:[r(a,{children:[e(i,{sx:{width:50},children:n.tipoDocumento.codice}),e(i,{children:n.tipoDocumento.descrizione})]}),r(a,{children:[e(i,{children:"Cedente"}),e(i,{children:n.cedente.denominazione})]}),r(a,{children:[e(i,{children:"Committente"}),e(i,{children:n.committente.denominazione})]}),r(a,{children:[e(i,{children:"Data"}),e(i,{children:n.data})]}),r(a,{children:[e(i,{children:"Data SDI"}),e(i,{children:n.dataSDI})]}),r(a,{children:[e(i,{children:"Numero"}),e(i,{children:n.numero})]}),r(a,{children:[e(i,{children:"Totale"}),r(i,{children:["€ ",n.totale]})]})]})})})})}),e(l,{mb:3,children:d.isEmpty(n.reparti)?e(h,{variant:"outlined",severity:"error",children:"Non ci sono reparti!"}):e(p,{children:r(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo reparti"}),r(u,{children:[e(b,{children:r(a,{children:[e(i,{children:"Aliquota"}),e(i,{children:"Imponibile"}),e(i,{children:"Imposta"})]})}),e(g,{children:n.reparti.map(t=>r(a,{children:[r(i,{children:[t.aliquota," %"]}),r(i,{children:[t.imponibile," €"]}),r(i,{children:[t.imposta," €"]})]},t.id))})]})]})})}),e(l,{mb:3,children:d.isEmpty(n.scadenze)?e(h,{variant:"outlined",severity:"info",children:"Non ci sono scadenze!"}):e(p,{children:r(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo scadenze"}),r(u,{children:[e(b,{children:r(a,{children:[e(i,{children:"Data"}),e(i,{children:"Importo"}),e(i,{align:"center",sx:{width:50},children:e(M,{})})]})}),e(g,{children:n.scadenze.map(t=>r(a,{children:[e(i,{children:t.data}),r(i,{children:[t.importo," €"]}),e(i,{align:"center",sx:{width:50},children:t.pagato?e(U,{color:j[500]}):e(X,{color:k[500]})})]},t.id))})]})]})})}),e(l,{mb:3,children:d.isEmpty(n.pagamenti)?e(h,{variant:"outlined",severity:"info",children:"Non ci sono pagamenti!"}):e(p,{children:r(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo pagamenti"}),r(u,{children:[e(b,{children:r(a,{children:[e(i,{children:"Data"}),e(i,{children:"Importo"})]})}),e(g,{children:n.pagamenti.map(t=>r(a,{children:[e(i,{children:t.data}),r(i,{children:[t.importo," €"]})]},t.id))})]})]})})}),e(P,{handleEdit:()=>c(`/docfisc/fatture/modifica/${n.id}`),handleDelete:F,loading:T}),e(_,{open:!d.isEmpty(f),autoHideDuration:2e3,onClose:()=>o(x()),children:e(h,{severity:y?"error":"success",children:f})})]})};export{oe as default};
