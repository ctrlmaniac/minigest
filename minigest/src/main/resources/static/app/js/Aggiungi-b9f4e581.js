import{aA as y,aB as T,aC as j,f as N,R as m,j as F,F as q,b as e,l as D,ai as B,av as O}from"./index-cdd6c92c.js";import{a as R}from"./exists-f1b83021.js";import{e as k,d as w,B as v,T as G,P as K}from"./hooks-7529384b.js";import{a as Z,E as $}from"./index-2712c8cb.js";import{G as n}from"./Grid-0170c88c.js";import{T as o}from"./TextField-c74aca9e.js";import{A as S}from"./Alert-ed83c53c.js";import{S as H}from"./Snackbar-57b782e6.js";import"./Grow-63e57ca1.js";import"./useFormControl-745ed0b2.js";import"./Portal-6e248c94.js";import"./useControlled-168d430d.js";function J(f){return async u=>{u(y()),Z.post(`${$.AZIENDE}`,f).then(l=>{u(T(l.data))}).catch(l=>{let p="Errore";l.response?p=l.response.data:p="Errore",u(j(p))})}}const te=()=>{const f=N(),u=k(),{exists:l,posting:p,postError:I,postResponse:A}=w(s=>s.aziende),[r,b]=m.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[c,C]=m.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0});m.useEffect(()=>{u(R(r.idFiscaleIVAPaese,r.idFiscaleIVACodice))},[r]);const g=s=>{const{name:t,value:i}=s.target;b({...r,[t]:i}),C({...c,[t]:i.toString().length<1}),t==="idFiscaleIVAPaese"&&C({...c,idFiscaleIVAPaese:i.toString().length!=2})},[d,x]=m.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[a,z]=m.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),h=s=>{const{name:t,value:i,required:W}=s.target;x({...d,[t]:i}),z({...a,[t]:W&&i.toString().length<1}),t==="cap"&&z({...a,cap:i.toString().length!==5}),t==="provincia"&&z({...a,provincia:i.toString().length>0?i.toString().length!==2:!1}),t==="nazione"&&z({...a,nazione:i.toString().length!==2})},[E,V]=m.useState(!0);m.useEffect(()=>{const s=!Object.values(c).every(i=>i===!1),t=!Object.values(a).every(i=>i===!1);V(s||t)},[c,a]);const P=()=>{const s={...r,sede:d};u(J(s)),setTimeout(()=>{u(O()),f("/aziende")},1e3)};return F(q,{children:[e(v,{mb:3,children:e(G,{variant:"h3",children:"Aggiungi Azienda"})}),e(v,{mb:3,children:e(K,{children:e(v,{p:2,children:F(n,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(n,{item:!0,xs:12,children:e(o,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:r.denominazione,error:c.denominazione,fullWidth:!0,onChange:g})}),e(n,{item:!0,xs:2,children:e(o,{label:"Nazione",name:"idFiscaleIVAPaese",value:r.idFiscaleIVAPaese,error:c.idFiscaleIVAPaese,fullWidth:!0,onChange:g})}),e(n,{item:!0,xs:10,children:e(o,{label:"Partita IVA",name:"idFiscaleIVACodice",value:r.idFiscaleIVACodice,error:c.idFiscaleIVACodice,fullWidth:!0,onChange:g})}),e(n,{item:!0,xs:12,children:r.idFiscaleIVAPaese.toString().length>0&&r.idFiscaleIVACodice.toString().length>0&&e(S,{severity:l?"error":"success",children:l?"Azienda gi√† esistente!":"Azienda disponibile"})}),e(n,{item:!0,xs:12,children:e(o,{label:"Codice Fiscale",name:"codiceFiscale",value:r.codiceFiscale,error:c.codiceFiscale,fullWidth:!0,onChange:g})}),e(n,{item:!0,xs:10,children:e(o,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:d.indirizzo,error:a.indirizzo,required:!0,onChange:h})}),e(n,{item:!0,xs:2,children:e(o,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:d.numeroCivico,error:a.numeroCivico,onChange:h})}),e(n,{item:!0,xs:12,sm:6,children:e(o,{fullWidth:!0,label:"CAP",name:"cap",value:d.cap,error:a.cap,required:!0,onChange:h})}),e(n,{item:!0,xs:12,sm:6,children:e(o,{fullWidth:!0,label:"Comune",name:"comune",value:d.comune,error:a.comune,required:!0,onChange:h})}),e(n,{item:!0,xs:12,sm:6,children:e(o,{fullWidth:!0,label:"Provincia",name:"provincia",value:d.provincia,error:a.provincia,onChange:h,helperText:"Esempio: BS"})}),e(n,{item:!0,xs:12,sm:6,children:e(o,{fullWidth:!0,label:"Nazione",name:"nazione",value:d.nazione,error:a.nazione,onChange:h,required:!0,helperText:"Esempio: IT"})})]})})})}),e(H,{open:!D.isEmpty(A),children:e(S,{severity:I?"error":"info",children:A})}),e(B,{onClick:P,disabled:l||E,loading:p})]})};export{te as default};
