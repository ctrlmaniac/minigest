import{bk as m,bl as h,bm as g,i as E,R as b,d as c,F as S,j as a,l as f,b6 as y}from"./index-94156edf.js";import{f as C,E as F}from"./index-ceaeaac0.js";import{f as v,e as x,B as n,T as A,P as B}from"./hooks-bf5842b6.js";import{B as R}from"./Button-9b78c890.js";import{L as T}from"./LinearProgress-354055ec.js";import{S as j}from"./Snackbar-0e19bbae.js";import{A as k}from"./Alert-9526df75.js";import"./Grow-91bcfd76.js";function D(r){return async e=>{e(m()),C.post(`${F.FATTURE}/upload`,r).then(t=>{e(h(t.data))}).catch(t=>{let o="Errore";t.response?o=t.response.data:o="Errore",e(g(o))})}}const I=()=>{const r=E(),e=v(),{uploading:t,uploadError:o,response:i,dettagli:l}=x(s=>s.fatture),[p,u]=b.useState();return c(S,{children:[a(n,{mb:3,children:a(A,{variant:"h3",children:"Carica Fattura"})}),a(n,{children:a(B,{children:c(n,{p:2,children:[a("input",{type:"file",name:"file",id:"file",onChange:s=>{const{files:d}=s.target;d&&u(d[0])}}),a(R,{variant:"contained",onClick:()=>{if(p){const s=new FormData;s.append("file",p),e(D(s)),!f.isEmpty(l)&&!o&&r("/docfisc/fatture/dettagli/"+l.id)}},children:"Carica"}),t&&a(T,{})]})})}),a(j,{open:!f.isEmpty(i),autoHideDuration:2e3,onClose:()=>e(y()),children:a(k,{severity:"info",children:i})})]})};export{I as default};
