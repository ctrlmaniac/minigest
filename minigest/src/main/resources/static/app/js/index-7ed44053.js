import{bk as u,bl as f,bm as m,f as h,R as g,j as d,F as b,b as a,l as E,b6 as S}from"./index-cdd6c92c.js";import{f as C,E as F}from"./index-2712c8cb.js";import{e as y,d as v,B as n,T as x,P as A}from"./hooks-7529384b.js";import{B as T}from"./Button-e124f07a.js";import{L as B}from"./LinearProgress-633fc854.js";import{S as R}from"./Snackbar-57b782e6.js";import{A as j}from"./Alert-ed83c53c.js";import"./Grow-63e57ca1.js";function k(r){return async e=>{e(u()),C.post(`${F.FATTURE}/upload`,r).then(t=>{e(f(t.data))}).catch(t=>{let o="Errore";t.response?o=t.response.data:o="Errore",e(m(o))})}}const I=()=>{const r=h(),e=y(),{uploading:t,uploadError:o,response:i,dettagli:D}=v(s=>s.fatture),[l,c]=g.useState();return d(b,{children:[a(n,{mb:3,children:a(x,{variant:"h3",children:"Carica Fattura"})}),a(n,{children:a(A,{children:d(n,{p:2,children:[a("input",{type:"file",name:"file",id:"file",onChange:s=>{const{files:p}=s.target;p&&c(p[0])}}),a(T,{variant:"contained",onClick:()=>{if(l){const s=new FormData;s.append("file",l),e(k(s)),o||setTimeout(()=>{r("/docfisc/fatture")},2e3)}},children:"Carica"}),t&&a(B,{})]})})}),a(R,{open:!E.isEmpty(i),autoHideDuration:2e3,onClose:()=>e(S()),children:a(j,{severity:"info",children:i})})]})};export{I as default};
