import{aA as y,aB as T,aC as j,i as N,R as m,d as A,F as q,j as e,l as D,ai as B,av as O}from"./index-6a75a5de.js";import{a as R}from"./exists-e894e15d.js";import{f as k,e as w,B as f,T as G,P as K}from"./hooks-8b6b3ce5.js";import{a as Z,E as $}from"./index-db9e3c6a.js";import{G as i}from"./Grid-f0b91695.js";import{T as r}from"./TextField-09f22a56.js";import{A as C}from"./Alert-863a23eb.js";import{S as H}from"./Snackbar-c915bc05.js";import"./Grow-234efcfb.js";import"./useFormControl-ec2a69e6.js";function J(z){return async c=>{c(y()),Z.post(`${$.AZIENDE}`,z).then(o=>{c(T(o.data))}).catch(o=>{let p="Errore";o.response?p=o.response.data:p="Errore",c(j(p))})}}const re=()=>{const z=N(),c=k(),{exists:o,posting:p,postError:F,postResponse:v}=w(t=>t.aziende),[a,I]=m.useState({denominazione:"",idFiscaleIVAPaese:"IT",idFiscaleIVACodice:"",codiceFiscale:""}),[d,b]=m.useState({denominazione:!0,idFiscaleIVAPaese:!1,idFiscaleIVACodice:!0,codiceFiscale:!0});m.useEffect(()=>{c(R(a.idFiscaleIVAPaese,a.idFiscaleIVACodice))},[a]);const g=t=>{const{name:u,value:s}=t.target;I({...a,[u]:s}),b({...d,[u]:s.toString().length<1})},[l,x]=m.useState({indirizzo:"",numeroCivico:"",cap:"",comune:"",provincia:"",nazione:"IT"}),[n,S]=m.useState({indirizzo:!0,numeroCivico:!1,cap:!0,comune:!0,provincia:!1,nazione:!1}),h=t=>{const{name:u,value:s,required:W}=t.target;x({...l,[u]:s}),W&&S({...n,[u]:s.toString().length<1})},[E,V]=m.useState(!0);m.useEffect(()=>{const t=!Object.values(d).every(s=>s===!1),u=!Object.values(n).every(s=>s===!1);V(t||u)},[d,n]);const P=()=>{const t={...a,sede:l};c(J(t)),setTimeout(()=>{c(O()),z("/aziende")},1e3)};return A(q,{children:[e(f,{mb:3,children:e(G,{variant:"h3",children:"Aggiungi Azienda"})}),e(f,{mb:3,children:e(K,{children:e(f,{p:2,children:A(i,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e(i,{item:!0,xs:12,children:e(r,{label:"Denominazione o Nome e Cognome",name:"denominazione",value:a.denominazione,error:d.denominazione,fullWidth:!0,onChange:g})}),e(i,{item:!0,xs:2,children:e(r,{label:"Nazione",name:"idFiscaleIVAPaese",value:a.idFiscaleIVAPaese,error:d.idFiscaleIVAPaese,fullWidth:!0,onChange:g})}),e(i,{item:!0,xs:10,children:e(r,{label:"Partita IVA",name:"idFiscaleIVACodice",value:a.idFiscaleIVACodice,error:d.idFiscaleIVACodice,fullWidth:!0,onChange:g})}),e(i,{item:!0,xs:12,children:a.idFiscaleIVAPaese.toString().length>0&&a.idFiscaleIVACodice.toString().length>0&&e(C,{severity:o?"error":"success",children:o?"Azienda gi√† esistente!":"Azienda disponibile"})}),e(i,{item:!0,xs:12,children:e(r,{label:"Codice Fiscale",name:"codiceFiscale",value:a.codiceFiscale,error:d.codiceFiscale,fullWidth:!0,onChange:g})}),e(i,{item:!0,xs:10,children:e(r,{fullWidth:!0,label:"Indirizzo",name:"indirizzo",value:l.indirizzo,error:n.indirizzo,required:!0,onChange:h})}),e(i,{item:!0,xs:2,children:e(r,{fullWidth:!0,label:"N. Civico",name:"numeroCivico",value:l.numeroCivico,error:n.numeroCivico,onChange:h})}),e(i,{item:!0,xs:12,sm:6,children:e(r,{fullWidth:!0,label:"CAP",name:"cap",value:l.cap,error:n.cap,required:!0,onChange:h})}),e(i,{item:!0,xs:12,sm:6,children:e(r,{fullWidth:!0,label:"Comune",name:"comune",value:l.comune,error:n.comune,required:!0,onChange:h})}),e(i,{item:!0,xs:12,sm:6,children:e(r,{fullWidth:!0,label:"Provincia",name:"provincia",value:l.provincia,error:n.provincia,onChange:h,helperText:"Esempio: BS"})}),e(i,{item:!0,xs:12,sm:6,children:e(r,{fullWidth:!0,label:"Nazione",name:"nazione",value:l.nazione,error:n.nazione,onChange:h,required:!0,helperText:"Esempio: IT"})})]})})})}),e(H,{open:!D.isEmpty(v),children:e(C,{severity:F?"error":"info",children:v})}),e(B,{onClick:P,disabled:o||E,loading:p})]})};export{re as default};
