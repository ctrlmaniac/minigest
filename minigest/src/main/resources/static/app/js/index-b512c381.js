import{_ as u,r as B,b as O,d as h,j as o,a as w,E as pe,e as ae,aX as me,aY as he,aZ as fe,ai as be,i as ge,R as L,aI as Ce,l as _,V as ve,F as Z,a_ as ke,a$ as ye,a9 as xe}from"./index-8d810eb5.js";import{c as V,a as Pe,E as Ie,I as Fe}from"./index-369028e4.js";import{g as q,d as j,s as M,i as Se,a as N,b as W,r as $e,T as H,f as Be,e as J,B as $,P as K}from"./hooks-29c1883f.js";import{A as ee}from"./Alert-ac51448d.js";import{A as Re}from"./AlertTitle-a40df185.js";import{I as ze}from"./IconBuildingWarehouse-143fe000.js";import{G as T}from"./Grid-a6d2df67.js";import{c as we,e as se,f as Ee,T as oe}from"./TextField-19a3feee.js";import{T as Le,b as ne,c as d,a as Te}from"./TableRow-7bd9e227.js";import{T as De}from"./TableHead-49d1eeb5.js";import{I as Ne,a as Me,b as Ae}from"./IconInfoCircle-f8acb4ef.js";import{I as te}from"./IconFile-3089cb0b.js";import"./createReactComponent-fd9b34e9.js";function _e(e){return q("PrivateSwitchBase",e)}j("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ue=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],He=e=>{const{classes:n,checked:r,disabled:l,edge:t}=e,a={root:["root",r&&"checked",l&&"disabled",t&&`edge${w(t)}`],input:["input"]};return W(a,_e,n)},Oe=M(Se)(({ownerState:e})=>u({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Ve=M("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),qe=B.forwardRef(function(n,r){const{autoFocus:l,checked:t,checkedIcon:a,className:C,defaultChecked:c,disabled:v,disableFocusRipple:p=!1,edge:k=!1,icon:y,id:s,inputProps:f,inputRef:m,name:i,onBlur:x,onChange:F,onFocus:P,readOnly:E,required:R=!1,tabIndex:S,type:b,value:Y}=n,re=O(n,Ue),[G,le]=we({controlled:t,default:Boolean(c),name:"SwitchBase",state:"checked"}),I=se(),ie=g=>{P&&P(g),I&&I.onFocus&&I.onFocus(g)},ce=g=>{x&&x(g),I&&I.onBlur&&I.onBlur(g)},de=g=>{if(g.nativeEvent.defaultPrevented)return;const X=g.target.checked;le(X),F&&F(g,X)};let z=v;I&&typeof z>"u"&&(z=I.disabled);const ue=b==="checkbox"||b==="radio",A=u({},n,{checked:G,disabled:z,disableFocusRipple:p,edge:k}),Q=He(A);return h(Oe,u({component:"span",className:N(Q.root,C),centerRipple:!0,focusRipple:!p,disabled:z,tabIndex:null,role:void 0,onFocus:ie,onBlur:ce,ownerState:A,ref:r},re,{children:[o(Ve,u({autoFocus:l,checked:t,defaultChecked:c,className:Q.input,disabled:z,id:ue&&s,name:i,onChange:de,readOnly:E,ref:m,required:R,ownerState:A,tabIndex:S,type:b},b==="checkbox"&&Y===void 0?{}:{value:Y},f)),G?a:y]}))}),je=qe,We=V(o("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ye=V(o("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ge=V(o("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Qe(e){return q("MuiCheckbox",e)}const Xe=j("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),U=Xe,Ze=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Je=e=>{const{classes:n,indeterminate:r,color:l}=e,t={root:["root",r&&"indeterminate",`color${w(l)}`]},a=W(t,Qe,n);return u({},n,a)},Ke=M(je,{shouldForwardProp:e=>$e(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,r.indeterminate&&n.indeterminate,r.color!=="default"&&n[`color${w(r.color)}`]]}})(({theme:e,ownerState:n})=>u({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${n.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pe(n.color==="default"?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},n.color!=="default"&&{[`&.${U.checked}, &.${U.indeterminate}`]:{color:(e.vars||e).palette[n.color].main},[`&.${U.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),eo=o(Ye,{}),oo=o(We,{}),no=o(Ge,{}),to=B.forwardRef(function(n,r){var l,t;const a=ae({props:n,name:"MuiCheckbox"}),{checkedIcon:C=eo,color:c="primary",icon:v=oo,indeterminate:p=!1,indeterminateIcon:k=no,inputProps:y,size:s="medium",className:f}=a,m=O(a,Ze),i=p?k:v,x=p?k:C,F=u({},a,{color:c,indeterminate:p,size:s}),P=Je(F);return o(Ke,u({type:"checkbox",inputProps:u({"data-indeterminate":p},y),icon:B.cloneElement(i,{fontSize:(l=i.props.fontSize)!=null?l:s}),checkedIcon:B.cloneElement(x,{fontSize:(t=x.props.fontSize)!=null?t:s}),ownerState:F,ref:r,className:N(P.root,f)},m,{classes:P}))}),ao=to;function so(e){return q("MuiFormControlLabel",e)}const ro=j("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),D=ro,lo=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],io=e=>{const{classes:n,disabled:r,labelPlacement:l,error:t}=e,a={root:["root",r&&"disabled",`labelPlacement${w(l)}`,t&&"error"],label:["label",r&&"disabled"]};return W(a,so,n)},co=M("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[{[`& .${D.label}`]:n.label},n.root,n[`labelPlacement${w(r.labelPlacement)}`]]}})(({theme:e,ownerState:n})=>u({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${D.disabled}`]:{cursor:"default"}},n.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},n.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},n.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${D.label}`]:{[`&.${D.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),uo=B.forwardRef(function(n,r){var l;const t=ae({props:n,name:"MuiFormControlLabel"}),{className:a,componentsProps:C={},control:c,disabled:v,disableTypography:p,label:k,labelPlacement:y="end",slotProps:s={}}=t,f=O(t,lo),m=se();let i=v;typeof i>"u"&&typeof c.props.disabled<"u"&&(i=c.props.disabled),typeof i>"u"&&m&&(i=m.disabled);const x={disabled:i};["checked","name","onChange","value","inputRef"].forEach(b=>{typeof c.props[b]>"u"&&typeof t[b]<"u"&&(x[b]=t[b])});const F=Ee({props:t,muiFormControl:m,states:["error"]}),P=u({},t,{disabled:i,labelPlacement:y,error:F.error}),E=io(P),R=(l=s.typography)!=null?l:C.typography;let S=k;return S!=null&&S.type!==H&&!p&&(S=o(H,u({component:"span"},R,{className:N(E.label,R==null?void 0:R.className),children:S}))),h(co,u({className:N(E.root,a),ownerState:P,ref:r},f,{children:[B.cloneElement(c,x),S]}))}),po=uo;function mo(e,n,r="sdi=false"){return async l=>{l(me()),Pe.get(`${Ie.FATTURE}/${e}/${n}?${r}`).then(t=>{l(he(t.data))}).catch(t=>{let a="Errore";t.response?a=t.response.data:a="Errore",l(fe(a))})}}const $o=()=>{const{mode:e}=be(),n=Be(),r=ge(),{list:l}=J(s=>s.fatture),{selected:t}=J(s=>s.aziende),[a,C]=L.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,sdi:!1}),[c,v]=L.useState({anno:!1,mese:!1}),[p,k]=Ce({sdi:a.sdi.toString(),anno:a.anno.toString(),mese:a.mese.toString()}),y=s=>{const{name:f,value:m}=s.target;C({...a,[f]:m});const i=parseInt(m);f==="anno"&&v({...c,anno:i<1970||i>new Date().getFullYear()}),f==="mese"&&v({...c,mese:i<1||i>12})};return L.useEffect(()=>{k({anno:a.anno.toString(),mese:a.mese.toString(),sdi:a.sdi.toString()})},[a]),L.useEffect(()=>{_.isEmpty(t)||(e==="vendita"||e==="acquisto")&&n(mo(e,t.id,p.toString()))},[e,t,p]),e!=="acquisto"&&e!=="vendita"?o(ve,{message:"Pagina non trovata!"}):h(Z,{children:[o($,{mb:3,children:h(H,{variant:"h3",children:["Fatture ",e]})}),_.isEmpty(t)?o($,{mb:3,children:h(ee,{severity:"error",variant:"outlined",children:[o(Re,{children:"Devi selezionare un'azienda!"}),"Per visualizzare le fatture devi prima selezionare un'azienda! Clicca sull'icona in alto a sinistra ",o(ze,{})," per selezionarne una!"]})}):h(Z,{children:[o($,{mb:3,children:o(K,{children:o($,{p:2,children:h(T,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[o(T,{item:!0,xs:12,sm:6,children:o(oe,{label:"Anno",name:"anno",value:a.anno,error:c.anno,onChange:y,type:"number",inputProps:{step:1,min:1970,max:new Date().getFullYear()},fullWidth:!0})}),o(T,{item:!0,xs:12,sm:6,children:o(oe,{label:"Mese",name:"mese",value:a.mese,error:c.mese,onChange:y,type:"number",inputProps:{step:1,min:1,max:12},fullWidth:!0})}),o(T,{item:!0,xs:12,children:o(po,{value:"ordina per data sdi",control:o(ao,{onChange:s=>C({...a,sdi:s.target.checked})}),label:"ordina per data sdi"})})]})})})}),_.isEmpty(l)?o(ee,{severity:"info",variant:"outlined",children:"Non ci sono fatture, aggiungine una!"}):o($,{mb:3,children:o(K,{children:o($,{p:3,children:h(Le,{children:[o(De,{children:h(ne,{children:[o(d,{children:"Documento"}),o(d,{children:"Data"}),o(d,{children:"Data SDI"}),o(d,{children:e==="vendita"?"Committente":"Cedente"}),o(d,{children:"Numero"}),o(d,{sx:{width:50},align:"center",children:o(Ne,{})}),o(d,{sx:{width:50},align:"center",children:o(te,{})})]})}),o(Te,{children:l==null?void 0:l.map(s=>h(ne,{children:[o(d,{children:s.tipoDocumento.codice}),o(d,{children:s.data}),o(d,{children:s.dataSDI}),o(d,{children:e==="vendita"?s.committente.denominazione:s.cedente.denominazione}),o(d,{children:s.numero}),o(d,{children:s.evasa?o(Me,{color:ke[500]}):o(Ae,{color:ye[500]})}),o(d,{children:o(Fe,{color:"info",onClick:()=>r(`/docfisc/fatture/dettagli/${s.id}`),children:o(te,{})})})]},s.id))})]})})})}),o(xe,{onClick:()=>r("/docfisc/fatture/aggiungi")})]})]})};export{$o as default};
