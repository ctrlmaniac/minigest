import{bt as C,bu as E,bv as S,f as D,R as h,j as i,F as A,b as e,l as P,ak as $}from"./index-dde3673b.js";import{e as j,d as k,B as l,T as B,P as x}from"./hooks-7130ffbc.js";import{a as z,E as R,I as F}from"./index-d66aeadc.js";import{G as u}from"./Grid-b24fee49.js";import{T}from"./TextField-aace72da.js";import{L as Y}from"./LinearProgress-76e2ea80.js";import{A as G}from"./Alert-2c4007a0.js";import{T as L,a as v,b as r,c as M}from"./TableRow-78c1061a.js";import{T as N}from"./TableHead-dc59800b.js";import{I as y}from"./IconFile-37a1c6fe.js";import{I}from"./IconPencil-efd71dca.js";import"./Grow-615693cf.js";import"./useFormControl-eb3321df.js";import"./Portal-4dfce55f.js";import"./useControlled-f3a48e16.js";import"./createReactComponent-5c4cd964.js";function W(d){return async t=>{t(C()),z.get(`${R.FISCO}/f24?${d}`).then(a=>{t(E(a.data))}).catch(a=>{let o="Errore";a.response?o=a.response.data:o="Errore",t(S(o))})}}const ie=()=>{const d=j(),t=D(),{list:a,listing:o}=k(n=>n.f24),[s,w]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[c,f]=h.useState({anno:!1,mese:!1}),g=n=>{const{name:p,value:b}=n.target;w({...s,[p]:b});const m=parseInt(b);p==="anno"&&f({...c,anno:m<1970||m>new Date().getFullYear()}),p==="mese"&&f({...c,mese:m<1||m>12})};return h.useEffect(()=>{const n=`&anno=${s.anno}&mese=${s.mese}`;d(W(n))},[s]),i(A,{children:[e(l,{mb:3,children:e(B,{variant:"h3",children:"F24"})}),e(l,{mb:3,children:e(x,{children:i(l,{p:2,children:[i(u,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[e(u,{item:!0,xs:12,sm:6,children:e(T,{label:"Anno",name:"anno",value:s.anno,error:c.anno,onChange:g,type:"number",inputProps:{step:1,min:1970,max:new Date().getFullYear()},fullWidth:!0})}),e(u,{item:!0,xs:12,sm:6,children:e(T,{label:"Mese",name:"mese",value:s.mese,error:c.mese,onChange:g,type:"number",inputProps:{step:1,min:1,max:12},fullWidth:!0})})]}),o&&e(Y,{})]})})}),P.isEmpty(a)?e(G,{severity:"info",variant:"outlined",children:"Non ci sono F24 nel periodo da te selezionato"}):e(l,{children:e(x,{children:e(l,{p:2,children:i(L,{children:[e(N,{children:i(v,{children:[e(r,{children:"Data Scadenza"}),e(r,{children:"Totale"}),e(r,{sx:{width:50},align:"center",children:e(y,{})}),e(r,{sx:{width:50},align:"center",children:e(I,{})})]})}),e(M,{children:a==null?void 0:a.map(n=>i(v,{children:[e(r,{children:n.dataScadenza}),i(r,{children:["â‚¬ ",n.totale]}),e(r,{align:"center",children:e(F,{color:"primary",onClick:()=>t(`/fisco/f24/dettagli/${n.id}`),children:e(y,{})})}),e(r,{align:"center",children:e(F,{color:"warning",onClick:()=>t(`/fisco/f24/modifica/${n.id}`),children:e(I,{})})})]},n.id))})]})})})}),e($,{onClick:()=>t("/fisco/f24/aggiungi")})]})};export{ie as default};
