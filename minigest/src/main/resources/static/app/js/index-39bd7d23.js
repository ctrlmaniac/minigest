import{f as I,l as c,j as t,F as v,b as e,R as y,Z as G,$ as H,a0 as P,a1 as X,a2 as Z,a3 as _,a4 as J,a5 as K}from"./index-d882999b.js";import{d as g,P as T,B as f,T as h,e as B}from"./hooks-15d50f7a.js";import{A as p}from"./Alert-37711bff.js";import{A as E}from"./AlertTitle-01a85079.js";import{I as b}from"./IconBuildingWarehouse-4400a1c6.js";import{a as w,T as M}from"./TextField-3f0953ff.js";import{L as N,a as W}from"./ListItemText-cdc999fe.js";import{p as O}from"./post-016b768a.js";import{B as D}from"./Button-0c31dfc0.js";import{I as L}from"./IconBuildingStore-9d71ca7c.js";import{a as q,E as R,I as A}from"./index-26de8948.js";import{T as F,a as C,b as a,c as $}from"./TableRow-d1dbbd36.js";import{T as U}from"./TableHead-90aebb17.js";import{I as x}from"./IconFile-e0d50bc3.js";import{l as Q}from"./list-6629d5bc.js";import{I as Y,a as ee,b as ie}from"./IconInfoCircle-fe539a2c.js";import{G as z}from"./Grid-b855ca7a.js";import"./createReactComponent-ffa67357.js";import"./useFormControl-55db2a8e.js";import"./Portal-cac5f17a.js";import"./Grow-59285a38.js";import"./useControlled-de568f22.js";const re=()=>{var d;const o=I(),{selected:l}=g(r=>r.aziende),{dettagli:i}=g(r=>r.account);let n=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i==null?void 0:i.aziende)?n=e(h,{children:"Contatta il moderatore per farti aggiungere alla tua azienda!"}):n=t(v,{children:[c.isEmpty(l)&&t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}),e(w,{children:(d=i==null?void 0:i.aziende)==null?void 0:d.map(r=>e(N,{selected:!c.isEmpty(l)&&r.id===l.id,onClick:()=>o(`/aziende/dettagli/${r.id}`),children:e(W,{primary:r.denominazione})},r.id))})]}),e(T,{sx:{height:"100%"},children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Le tue aziende"}),n]})})},ne=()=>{const o=B(),l=I(),{selected:i}=g(u=>u.aziende),{selected:n}=g(u=>u.negozi),[d,r]=y.useState(""),[s,m]=y.useState(!0),j=u=>{const{value:k}=u.target;r(k),m(k.toString().length<1)},V=()=>{c.isEmpty(i)?alert("Errore!"):o(O({nome:d,azienda:i}))};let S=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i)?S=t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):c.isEmpty(i.negozi)?S=t(v,{children:[e(h,{children:"Devi aggiungere almeno un negozio!"}),t(h,{children:["Il negozio verrà aggiunto a ",i.denominazione]}),e(M,{label:"Nome negozio",fullWidth:!0,value:d,error:s,required:!0,margin:"normal",onChange:j}),e(D,{fullWidth:!0,variant:"contained",disabled:s,onClick:V,children:"Salva"})]}):S=t(v,{children:[c.isEmpty(n)&&t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}),e(w,{children:i.negozi.map(u=>e(N,{selected:!c.isEmpty(n)&&u.id===n.id,onClick:()=>l("/negozi"),children:e(W,{primary:u.nome})},u.id))})]}),e(T,{sx:{height:"100%"},children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"I tuoi negozi"}),S]})})};function te(o){return async l=>{l(G()),q.get(`${R.CHIUSURE_FISCALI}/last7?negozio=${o}`).then(i=>{l(H(i.data))}).catch(i=>{let n="Errore";i.response?n=i.response.data:n="Errore",l(P(n))})}}const ae=()=>{const o=I(),l=B(),{selected:i}=g(m=>m.negozi),{list:n,listError:d,response:r}=g(m=>m.chiusureFiscali);y.useEffect(()=>{c.isEmpty(i)||l(te(i.id))},[i]);let s=e(h,{children:"caricamento in corso..."});return c.isEmpty(i)?s=t(p,{severity:"error",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}):d?s=e(p,{severity:"error",variant:"outlined",children:r||"Errore di caricamento"}):c.isEmpty(n)?s=e(p,{severity:"info",variant:"outlined",children:"Non ci sono chiusure fiscali"}):s=t(F,{children:[e(U,{children:t(C,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F"}),e(a,{sx:{width:50},align:"center",children:e(A,{children:e(x,{})})})]})}),e($,{children:n.map(m=>t(C,{children:[e(a,{children:m.data}),t(a,{children:["€ ",m.totale]}),e(a,{children:m.numeroDocFisc}),e(a,{sx:{width:50},align:"center",children:e(A,{color:"info",onClick:()=>o(`/docfisc/chiusure-fiscali/dettagli/${m.id}`),children:e(x,{})})})]},m.id))})]}),e(v,{children:e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime chiusure fiscali"}),s,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/chiusure-fiscali"),children:"Vai alla lista"})})]})})})},le=()=>{const o=I(),l=B(),{listError:i,list:n,response:d}=g(s=>s.scadenzario);y.useEffect(()=>{l(Q())},[]);let r=e(h,{children:"caricamento in corso..."});return i?r=e(p,{severity:"error",variant:"outlined",children:d||"Errore di caricamento"}):c.isEmpty(n)?r=e(p,{severity:"success",variant:"outlined",children:"Non hai scadenze!"}):r=e(F,{children:e($,{children:n.map(s=>t(C,{children:[e(a,{sx:{width:50},align:"center",children:e(A,{color:"primary",onClick:()=>o(`/docfisc/fatture/dettagli/${s.fattura.id}`),children:e(x,{})})}),e(a,{children:s.data}),t(a,{align:"right",children:["€ ",s.importo]})]},s.id))})}),e(v,{children:e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Scadenzario"}),r,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/scadenzario"),children:"Vai allo scadenzario"})})]})})})};function oe(o){return async l=>{l(X()),q.get(`${R.FATTURE}/last10?committente=${o}`).then(i=>{l(Z(i.data))}).catch(i=>{let n="Errore";i.response?n=i.response.data:n="Errore",l(_(n))})}}const ce=()=>{const o=I(),l=B(),{selected:i}=g(r=>r.aziende),{list:n}=g(r=>r.fatture);y.useEffect(()=>{c.isEmpty(i)||l(oe(i.id))},[i]);let d=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i)?d=t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):c.isEmpty(n)?d=e(p,{severity:"info",variant:"outlined",children:"Non hai fatture acquisto! Aggiungine una per vederla qua!"}):d=t(v,{children:[e(f,{sx:{overflowX:"auto"},mb:2,children:t(F,{children:[e(U,{children:t(C,{children:[e(a,{align:"center",sx:{width:50},children:e(x,{})}),e(a,{children:"Doc."}),e(a,{children:"Data"}),e(a,{children:"Cedente"}),e(a,{align:"right",children:"Totale"}),e(a,{align:"center",sx:{width:50},children:e(Y,{})})]})}),e($,{children:n==null?void 0:n.map(r=>t(C,{children:[e(a,{align:"center",children:e(A,{color:"primary",onClick:()=>o("/docfisc/fatture/dettagli/"+r.id),children:e(x,{})})}),e(a,{sx:{width:100},children:r.tipoDocumento.codice}),e(a,{sx:{width:150},children:r.data}),e(a,{children:r.cedente.denominazione}),e(a,{align:"right",children:r.totale}),e(a,{align:"center",children:r.evasa?e(ee,{color:J[500]}):e(ie,{color:K[500]})})]},r.id))})]})}),e(f,{sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/fatture/acquisto"),children:"Vai alla lista"})})]}),e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime fatture acquisto"}),d]})})},$e=()=>{const{selected:o}=g(l=>l.aziende);return e(v,{children:t(z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"stretch",spacing:2,children:[e(z,{item:!0,xs:12,sm:6,children:e(ne,{})}),e(z,{item:!0,xs:12,sm:6,children:e(re,{})}),!c.isEmpty(o)&&e(z,{item:!0,xs:12,children:e(ae,{})}),e(z,{item:!0,xs:12,children:e(ce,{})}),e(z,{item:!0,xs:12,children:e(le,{})})]})})};export{$e as default};
