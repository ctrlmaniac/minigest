import{bk as u,bl as m,bm as f,f as h,R as g,j as c,F as b,b as a,l as E,b6 as S}from"./index-f9c8e367.js";import{f as x,E as C}from"./index-f2e41e9d.js";import{e as F,d as y,B as l,T as v,P as A}from"./hooks-03d118e0.js";import{B as T}from"./Button-da0d8d51.js";import{L as B}from"./LinearProgress-0a85971c.js";import{S as R}from"./Snackbar-d5653c9e.js";import{A as j}from"./Alert-495ade46.js";import"./Grow-34e8ce97.js";function k(n){return async e=>{e(u()),x.post(`${C.FATTURE}/upload`,n).then(t=>{e(m(t.data))}).catch(t=>{let o="Errore";t.response?o=t.response.data:o="Errore",e(f(o))})}}const I=()=>{const n=h(),e=F(),{uploading:t,uploadError:o,response:p,dettagli:D}=y(s=>s.fatture),[i,d]=g.useState();return c(b,{children:[a(l,{mb:3,children:a(v,{variant:"h3",children:"Carica Fattura"})}),a(l,{children:a(A,{children:c(l,{p:2,children:[a("input",{type:"file",name:"file",id:"file",onChange:s=>{const{files:r}=s.target;r&&d([...r])},multiple:!0,accept:"text/xml"}),a(T,{variant:"contained",onClick:()=>{if(i&&i.length>0){const s=new FormData;i.map(r=>s.append("file[]",r)),e(k(s)),o||setTimeout(()=>{n("/docfisc/fatture")},2e3)}},children:"Carica"}),t&&a(B,{})]})})}),a(R,{open:!E.isEmpty(p),autoHideDuration:2e3,onClose:()=>e(S()),children:a(j,{severity:"info",children:p})})]})};export{I as default};
