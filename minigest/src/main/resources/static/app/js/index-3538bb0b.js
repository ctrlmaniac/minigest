import{aH as H,aI as J,aJ as K,aK as V,aL as q,aM as Q,aN as U,R as d,j as r,F as T,b as e,l as s,ak as X,aO as I,aP as Y}from"./index-cdd6c92c.js";import{a as w,E as R,I as A}from"./index-2712c8cb.js";import{e as _,d as x,B as u,T as ee,P as ae}from"./hooks-7529384b.js";import{p as oe}from"./post-a7741ab9.js";import{A as m}from"./Alert-ed83c53c.js";import{A as B}from"./AlertTitle-70ba64f7.js";import{I as te}from"./IconBuildingWarehouse-a5a35164.js";import{T as ne,c as ie,a as re,b as h}from"./TableRow-e3e53320.js";import{I as se}from"./IconPencil-2d20305a.js";import{I as le}from"./IconTrash-4fca7695.js";import{a as D,b as k}from"./DialogContent-400f37f9.js";import{T as P}from"./TextField-c74aca9e.js";import{D as F}from"./DialogActions-6a6a63a2.js";import{B as M}from"./Button-e124f07a.js";import{L as W}from"./LinearProgress-633fc854.js";import{S as ce}from"./Snackbar-57b782e6.js";import"./createReactComponent-753876cd.js";import"./Grow-63e57ca1.js";import"./Portal-6e248c94.js";import"./useFormControl-745ed0b2.js";import"./useControlled-168d430d.js";function de(t){return async o=>{o(H()),w.delete(`${R.NEGOZI}/${t}`).then(n=>{o(J(n.data)),o(K(t))}).catch(n=>{let i="Errore";n.response?i=n.response.data:i="Errore",o(V(i))})}}function me(t){return async o=>{o(q()),w.put(`${R.NEGOZI}/${t.id}`,t).then(n=>{o(Q(n.data))}).catch(n=>{let i="Errore";n.response?i=n.response.data:i="Errore",o(U(i))})}}const Me=()=>{var N;const t=_(),{selected:o}=x(a=>a.aziende),{putting:n,putError:i,removeError:pe,posting:$,response:g}=x(a=>a.negozi),[f,v]=d.useState(!1),[z,E]=d.useState(!1),[l,p]=d.useState({id:void 0,nome:""}),[y,S]=d.useState(!1),C=a=>{p({...l,nome:a.target.value}),S(a.target.value.toString().length<1)},j=a=>{t(de(a)),setTimeout(()=>{t(I())},2e3)},L=a=>{p({...a}),v(!0)},O=()=>{p({id:void 0,nome:""}),S(!1)},c=()=>{v(!1),E(!1),O()},b=()=>{t(me(l)),c(),setTimeout(()=>{t(I()),t(Y(l))},1e3)},G=a=>{t(oe(a)),c()},Z=()=>{if(z){const a={azienda:o,nome:l.nome};G(a)}else f&&b()};return r(T,{children:[e(u,{mb:3,children:e(ee,{variant:"h3",gutterBottom:!0,children:"Negozi"})}),s.isEmpty(o)&&r(m,{variant:"outlined",severity:"error",children:[e(B,{children:"Non hai selezionato nessuna azienda!"}),"Prima di visualizzare la lista dei negozi, seleziona l'azienda a cui appartengono. Clicca su ",e(te,{})," in alto a destra per selezionare l'azienda!"]}),!s.isEmpty(o)&&s.isEmpty(o.negozi)&&r(m,{variant:"outlined",severity:"info",children:[e(B,{children:"Non hai nessun negozio"}),"Aggiungine uno!"]}),!s.isEmpty(o)&&!s.isEmpty(o.negozi)&&r(T,{children:[e(u,{mb:3,children:r(m,{variant:"outlined",severity:"info",children:["Stai visualizzando i negozi de ",o.denominazione]})}),e(ae,{children:e(u,{p:2,children:e(ne,{children:e(ie,{children:(N=o.negozi)==null?void 0:N.map(a=>r(re,{children:[e(h,{children:a.nome}),e(h,{sx:{width:50},align:"center",children:e(A,{color:"warning",onClick:()=>L(a),children:e(se,{})})}),e(h,{sx:{width:50},align:"center",onClick:()=>j(a.id),children:e(A,{color:"error",children:e(le,{})})})]},a.id))})})})})]}),r(D,{open:f,onClose:c,children:[e(k,{children:e(P,{fullWidth:!0,label:"Nome",value:l.nome,error:y,onChange:C})}),e(F,{children:e(M,{fullWidth:!0,variant:"contained",onClick:b,children:"salva"})}),n&&e(W,{})]}),r(D,{open:z,onClose:c,children:[e(k,{children:e(P,{fullWidth:!0,label:"Nome",value:l.nome,error:y,onChange:C})}),e(F,{children:e(M,{fullWidth:!0,variant:"contained",onClick:Z,children:"salva"})}),n&&e(W,{})]}),e(ce,{open:!s.isEmpty(g),children:e(m,{severity:"info",children:g})}),!s.isEmpty(o)&&e(X,{onClick:()=>E(!0),loading:$})]})};export{Me as default};
