import{bk as u,bl as f,bm as m,f as h,R as g,j as d,F as b,b as a,l as E,b6 as S}from"./index-b0edc525.js";import{f as C,E as F}from"./index-c1f533ec.js";import{e as y,d as v,B as n,T as x,P as A}from"./hooks-f9dc248c.js";import{B as T}from"./Button-5e2f45ca.js";import{L as B}from"./LinearProgress-112432e9.js";import{S as R}from"./Snackbar-c1499bfb.js";import{A as j}from"./Alert-bf912103.js";import"./Grow-f5e1a89c.js";function k(r){return async e=>{e(u()),C.post(`${F.FATTURE}/upload`,r).then(t=>{e(f(t.data))}).catch(t=>{let o="Errore";t.response?o=t.response.data:o="Errore",e(m(o))})}}const I=()=>{const r=h(),e=y(),{uploading:t,uploadError:o,response:i,dettagli:D}=v(s=>s.fatture),[l,c]=g.useState();return d(b,{children:[a(n,{mb:3,children:a(x,{variant:"h3",children:"Carica Fattura"})}),a(n,{children:a(A,{children:d(n,{p:2,children:[a("input",{type:"file",name:"file",id:"file",onChange:s=>{const{files:p}=s.target;p&&c(p[0])}}),a(T,{variant:"contained",onClick:()=>{if(l){const s=new FormData;s.append("file",l),e(k(s)),o||setTimeout(()=>{r("/docfisc/fatture")},2e3)}},children:"Carica"}),t&&a(B,{})]})})}),a(R,{open:!E.isEmpty(i),autoHideDuration:2e3,onClose:()=>e(S()),children:a(j,{severity:"info",children:i})})]})};export{I as default};
