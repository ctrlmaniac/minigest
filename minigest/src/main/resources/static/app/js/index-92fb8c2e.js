import{i as I,l as c,d as t,F as v,j as e,R as y,Z as G,$ as H,a0 as P,a1 as X,a2 as Z,a3 as _,a4 as J,a5 as K}from"./index-6a75a5de.js";import{e as g,P as T,B as f,T as h,f as B}from"./hooks-8b6b3ce5.js";import{A as p}from"./Alert-863a23eb.js";import{A as E}from"./AlertTitle-c2d2966c.js";import{I as b}from"./IconBuildingWarehouse-bd7b1f29.js";import{a as w,T as M}from"./TextField-09f22a56.js";import{L as N,a as W}from"./ListItemText-a6041598.js";import{p as O}from"./post-5a7f8976.js";import{B as D}from"./Button-2bd02b9a.js";import{I as L}from"./IconBuildingStore-70e274f4.js";import{a as q,E as R,I as A}from"./index-db9e3c6a.js";import{T as F,a as C,b as a,c as $}from"./TableRow-c65b3546.js";import{T as U}from"./TableHead-40379dbf.js";import{I as x}from"./IconFile-95cab889.js";import{l as Q}from"./list-f5ac6ae5.js";import{I as Y,a as ee,b as ie}from"./IconInfoCircle-46578e76.js";import{G as z}from"./Grid-f0b91695.js";import"./createReactComponent-2662947b.js";import"./useFormControl-ec2a69e6.js";import"./Grow-234efcfb.js";const ne=()=>{var d;const o=I(),{selected:l}=g(n=>n.aziende),{dettagli:i}=g(n=>n.account);let r=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i==null?void 0:i.aziende)?r=e(h,{children:"Contatta il moderatore per farti aggiungere alla tua azienda!"}):r=t(v,{children:[c.isEmpty(l)&&t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}),e(w,{children:(d=i==null?void 0:i.aziende)==null?void 0:d.map(n=>e(N,{selected:!c.isEmpty(l)&&n.id===l.id,onClick:()=>o(`/aziende/dettagli/${n.id}`),children:e(W,{primary:n.denominazione})},n.id))})]}),e(T,{sx:{height:"100%"},children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Le tue aziende"}),r]})})},re=()=>{const o=B(),l=I(),{selected:i}=g(u=>u.aziende),{selected:r}=g(u=>u.negozi),[d,n]=y.useState(""),[s,m]=y.useState(!0),j=u=>{const{value:k}=u.target;n(k),m(k.toString().length<1)},V=()=>{c.isEmpty(i)?alert("Errore!"):o(O({nome:d,azienda:i}))};let S=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i)?S=t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):c.isEmpty(i.negozi)?S=t(v,{children:[e(h,{children:"Devi aggiungere almeno un negozio!"}),t(h,{children:["Il negozio verrà aggiunto a ",i.denominazione]}),e(M,{label:"Nome negozio",fullWidth:!0,value:d,error:s,required:!0,margin:"normal",onChange:j}),e(D,{fullWidth:!0,variant:"contained",disabled:s,onClick:V,children:"Salva"})]}):S=t(v,{children:[c.isEmpty(r)&&t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}),e(w,{children:i.negozi.map(u=>e(N,{selected:!c.isEmpty(r)&&u.id===r.id,onClick:()=>l("/negozi"),children:e(W,{primary:u.nome})},u.id))})]}),e(T,{sx:{height:"100%"},children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"I tuoi negozi"}),S]})})};function te(o){return async l=>{l(G()),q.get(`${R.CHIUSURE_FISCALI}/last7?negozio=${o}`).then(i=>{l(H(i.data))}).catch(i=>{let r="Errore";i.response?r=i.response.data:r="Errore",l(P(r))})}}const ae=()=>{const o=I(),l=B(),{selected:i}=g(m=>m.negozi),{list:r,listError:d,response:n}=g(m=>m.chiusureFiscali);y.useEffect(()=>{c.isEmpty(i)||l(te(i.id))},[i]);let s=e(h,{children:"caricamento in corso..."});return c.isEmpty(i)?s=t(p,{severity:"error",variant:"outlined",children:[e(E,{children:"Devi selezionare un negozio!"}),"Clicca su ",e(L,{})," per selezionarne uno!"]}):d?s=e(p,{severity:"error",variant:"outlined",children:n||"Errore di caricamento"}):c.isEmpty(r)?s=e(p,{severity:"info",variant:"outlined",children:"Non ci sono chiusure fiscali"}):s=t(F,{children:[e(U,{children:t(C,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F"}),e(a,{sx:{width:50},align:"center",children:e(A,{children:e(x,{})})})]})}),e($,{children:r.map(m=>t(C,{children:[e(a,{children:m.data}),t(a,{children:["€ ",m.totale]}),e(a,{children:m.numeroDocFisc}),e(a,{sx:{width:50},align:"center",children:e(A,{color:"info",onClick:()=>o(`/docfisc/chiusure-fiscali/dettagli/${m.id}`),children:e(x,{})})})]},m.id))})]}),e(v,{children:e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime chiusure fiscali"}),s,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/chiusure-fiscali"),children:"Vai alla lista"})})]})})})},le=()=>{const o=I(),l=B(),{listError:i,list:r,response:d}=g(s=>s.scadenzario);y.useEffect(()=>{l(Q())},[]);let n=e(h,{children:"caricamento in corso..."});return i?n=e(p,{severity:"error",variant:"outlined",children:d||"Errore di caricamento"}):c.isEmpty(r)?n=e(p,{severity:"success",variant:"outlined",children:"Non hai scadenze!"}):n=e(F,{children:e($,{children:r.map(s=>t(C,{children:[e(a,{sx:{width:50},align:"center",children:e(A,{color:"primary",onClick:()=>o(`/docfisc/fatture/dettagli/${s.fattura.id}`),children:e(x,{})})}),e(a,{children:s.data}),t(a,{align:"right",children:["€ ",s.importo]})]},s.id))})}),e(v,{children:e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Scadenzario"}),n,e(f,{mt:2,sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/scadenzario"),children:"Vai allo scadenzario"})})]})})})};function oe(o){return async l=>{l(X()),q.get(`${R.FATTURE}/last10?committente=${o}`).then(i=>{l(Z(i.data))}).catch(i=>{let r="Errore";i.response?r=i.response.data:r="Errore",l(_(r))})}}const ce=()=>{const o=I(),l=B(),{selected:i}=g(n=>n.aziende),{list:r}=g(n=>n.fatture);y.useEffect(()=>{c.isEmpty(i)||l(oe(i.id))},[i]);let d=e(h,{children:"Caricamento in corso..."});return c.isEmpty(i)?d=t(p,{severity:"info",variant:"outlined",children:[e(E,{children:"Devi prima selezionare un'azienda!"}),"Clicca su ",e(b,{})," per selezionarne una!"]}):c.isEmpty(r)?d=e(p,{severity:"info",variant:"outlined",children:"Non hai fatture acquisto! Aggiungine una per vederla qua!"}):d=t(v,{children:[e(f,{sx:{overflowX:"auto"},mb:2,children:t(F,{children:[e(U,{children:t(C,{children:[e(a,{align:"center",sx:{width:50},children:e(x,{})}),e(a,{children:"Doc."}),e(a,{children:"Data"}),e(a,{children:"Cedente"}),e(a,{align:"right",children:"Totale"}),e(a,{align:"center",sx:{width:50},children:e(Y,{})})]})}),e($,{children:r==null?void 0:r.map(n=>t(C,{children:[e(a,{align:"center",children:e(A,{color:"primary",onClick:()=>o("/docfisc/fatture/dettagli/"+n.id),children:e(x,{})})}),e(a,{sx:{width:100},children:n.tipoDocumento.codice}),e(a,{sx:{width:150},children:n.data}),e(a,{children:n.cedente.denominazione}),e(a,{align:"right",children:n.totale}),e(a,{align:"center",children:n.evasa?e(ee,{color:J[500]}):e(ie,{color:K[500]})})]},n.id))})]})}),e(f,{sx:{textAlign:"right"},children:e(D,{onClick:()=>o("/docfisc/fatture/acquisto"),children:"Vai alla lista"})})]}),e(T,{children:t(f,{p:2,children:[e(h,{variant:"h6",gutterBottom:!0,children:"Ultime fatture acquisto"}),d]})})},be=()=>{const{selected:o}=g(l=>l.aziende);return e(v,{children:t(z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"stretch",spacing:2,children:[e(z,{item:!0,xs:12,sm:6,children:e(re,{})}),e(z,{item:!0,xs:12,sm:6,children:e(ne,{})}),!c.isEmpty(o)&&e(z,{item:!0,xs:12,children:e(ae,{})}),e(z,{item:!0,xs:12,children:e(ce,{})}),e(z,{item:!0,xs:12,children:e(le,{})})]})})};export{be as default};
