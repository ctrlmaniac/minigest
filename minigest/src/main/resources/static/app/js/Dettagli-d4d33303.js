import{b3 as x,b4 as B,b5 as C,at as R,i as A,R as S,l as s,j as e,B as N,V as E,d as i,F as w,a4 as z,a5 as j,au as P,b6 as y}from"./index-6a75a5de.js";import{g as $}from"./get-db5e0855.js";import{f as k,e as q,B as l,T as m,P as p}from"./hooks-8b6b3ce5.js";import{a as H,E as V}from"./index-db9e3c6a.js";import{A as h}from"./Alert-863a23eb.js";import{T as u,c as g,a as t,b as r}from"./TableRow-c65b3546.js";import{T as v}from"./TableHead-40379dbf.js";import{I as U,a as G,b as J}from"./IconInfoCircle-46578e76.js";import{S as K}from"./Snackbar-c915bc05.js";import"./createReactComponent-2662947b.js";import"./Grow-234efcfb.js";function L(d){return async o=>{o(x()),H.delete(`${V.FATTURE}/${d}`).then(c=>{o(B(c.data))}).catch(c=>{let n="Errore";c.response?n=c.response.data:n="Errore",o(C(n))})}}const ne=()=>{const{id:d}=R(),o=k(),c=A(),{dettagli:n,getting:D,getError:T,response:f,removing:I,removeError:b}=q(a=>a.fatture);S.useEffect(()=>{s.isEmpty(d)||o($(d))},[d]);const F=()=>{o(L(d)),setTimeout(()=>{y(),b||c(-1)},1e3)};return D?e(N,{}):T?e(E,{message:f||"Fattura non trovata"}):s.isEmpty(n)?e(E,{message:"Fattura non trovata"}):(console.log(n),i(w,{children:[e(l,{mb:3,children:e(m,{variant:"h3",children:"Dettagli Fattura"})}),e(l,{mb:3,children:e(h,{variant:"outlined",severity:n.evasa?"success":"error",children:n.evasa?"Fattura pagata":"Fattura da pagare"})}),e(l,{mb:3,children:e(p,{children:e(l,{p:2,children:e(u,{children:i(g,{children:[i(t,{children:[e(r,{sx:{width:50},children:n.tipoDocumento.codice}),e(r,{children:n.tipoDocumento.descrizione})]}),i(t,{children:[e(r,{children:"Cedente"}),e(r,{children:n.cedente.denominazione})]}),i(t,{children:[e(r,{children:"Committente"}),e(r,{children:n.committente.denominazione})]}),i(t,{children:[e(r,{children:"Data"}),e(r,{children:n.data})]}),i(t,{children:[e(r,{children:"Data SDI"}),e(r,{children:n.dataSDI})]}),i(t,{children:[e(r,{children:"Numero"}),e(r,{children:n.numero})]}),i(t,{children:[e(r,{children:"Totale"}),i(r,{children:["€ ",n.totale]})]})]})})})})}),e(l,{mb:3,children:s.isEmpty(n.reparti)?e(h,{variant:"outlined",severity:"error",children:"Non ci sono reparti!"}):e(p,{children:i(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo reparti"}),i(u,{children:[e(v,{children:i(t,{children:[e(r,{children:"Aliquota"}),e(r,{children:"Imponibile"}),e(r,{children:"Imposta"})]})}),e(g,{children:n.reparti.map(a=>i(t,{children:[i(r,{children:[a.aliquota," %"]}),i(r,{children:[a.imponibile," €"]}),i(r,{children:[a.imposta," €"]})]},a.id))})]})]})})}),e(l,{mb:3,children:s.isEmpty(n.scadenze)?e(h,{variant:"outlined",severity:"info",children:"Non ci sono scadenze!"}):e(p,{children:i(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo scadenze"}),i(u,{children:[e(v,{children:i(t,{children:[e(r,{children:"Data"}),e(r,{children:"Importo"}),e(r,{align:"center",sx:{width:50},children:e(U,{})})]})}),e(g,{children:n.scadenze.map(a=>i(t,{children:[e(r,{children:a.data}),i(r,{children:[a.importo," €"]}),e(r,{align:"center",sx:{width:50},children:a.pagato?e(G,{color:z[500]}):e(J,{color:j[500]})})]},a.id))})]})]})})}),e(l,{mb:3,children:s.isEmpty(n.pagamenti)?e(h,{variant:"outlined",severity:"info",children:"Non ci sono pagamenti!"}):e(p,{children:i(l,{p:2,children:[e(m,{variant:"h6",gutterBottom:!0,children:"Riepilogo pagamenti"}),i(u,{children:[e(v,{children:i(t,{children:[e(r,{children:"Data"}),e(r,{children:"Importo"})]})}),e(g,{children:n.pagamenti.map(a=>i(t,{children:[e(r,{children:a.data}),i(r,{children:[a.importo," €"]})]},a.id))})]})]})})}),e(P,{handleEdit:()=>c(`/docfisc/fatture/modifica/${n.id}`),handleDelete:F,loading:I}),e(K,{open:!s.isEmpty(f),autoHideDuration:2e3,onClose:()=>o(y()),children:e(h,{severity:b?"error":"success",children:f})})]}))};export{ne as default};
