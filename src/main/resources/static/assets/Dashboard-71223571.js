import{D as z,L as f,j as i,a as c,B as u,Z as F,$ as v,R as E,F as B}from"./index-735c612a.js";import{a as m,u as L}from"./hooks-534afcf2.js";import{L as I}from"./List-7f34e741.js";import{L as T,a as A}from"./ListItemText-6cf9c42d.js";import{P as y}from"./Paper-b7d15f06.js";import{T as l}from"./Typography-d0b266ea.js";import{A as g,I as b}from"./Alert-8bad4c57.js";import{E as D,a as N}from"./index-e540bbee.js";import{T as $,a as x,b as s,c as j}from"./TableRow-cbc80ead.js";import{T as w}from"./TableHead-ba26c009.js";import{I as C}from"./IconFile-93ae3b0c.js";import{B as R}from"./Button-0abed508.js";import{G as p}from"./Grid-369f5637.js";import"./ButtonBase-bb9f26cb.js";import"./listItemTextClasses-f9284eb8.js";import"./createSvgIcon-d57f16a2.js";import"./createReactComponent-f20aa3c3.js";import"./useTheme-8b37b6ae.js";const S=()=>{var d;const n=z(),{dettagli:t}=m(a=>a.account),{selected:r}=m(a=>a.aziende);let e=i(l,{children:"Caricamento in corso..."});return f.isEmpty(t==null?void 0:t.aziende)?e=i(l,{children:"Devi crearti un'azienda!"}):e=i(I,{children:(d=t==null?void 0:t.aziende)==null?void 0:d.map(a=>i(T,{selected:(r==null?void 0:r.id)===a.id,onClick:()=>n(`/app/aziende/dettagli/${a.id}`),children:a.denominazione},a.id))}),i(y,{children:c(u,{p:2,children:[i(l,{gutterBottom:!0,children:"Le tue aziende:"}),e]})})},k=()=>{const{listByAzienda:n,selected:t}=m(e=>e.negozi);let r=i(l,{children:"Caricamento in corso..."});return f.isEmpty(n)?r=i(g,{severity:"warning",children:"Non hai negozi, creane uno!"}):r=i(I,{children:n==null?void 0:n.map(e=>i(T,{selected:(t==null?void 0:t.id)===e.id,children:i(A,{primary:e.nome})},e.id))}),i(y,{children:c(u,{p:2,children:[i(l,{gutterBottom:!0,children:"I tuoi negozi:"}),r]})})};function U(n){return async t=>{let r=`${D.CHIUSURE_FISCALI}/last7?negozio=${n}`;N.get(r).then(e=>{t(F(e.data))}).catch(e=>{t(v(e.message))})}}const W=()=>{const n=L(),t=z(),{selected:r}=m(o=>o.negozi),{list:e,listError:d,listing:a}=m(o=>o.chiusureFiscali);E.useEffect(()=>{r&&n(U(r.id))},[r]);let h=i(l,{children:"Caricamento in corso..."});return d&&(h=i(g,{severity:"error",children:d})),f.isEmpty(e)?h=i(g,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):h=c($,{children:[i(w,{children:c(x,{children:[i(s,{children:"Data"}),i(s,{children:"Totale"}),i(s,{children:"N.D.F."}),i(s,{sx:{width:50},align:"center",children:i(C,{})})]})}),i(j,{children:e==null?void 0:e.map(o=>c(x,{children:[i(s,{children:o.data}),c(s,{children:["â‚¬ ",o.totale]}),i(s,{children:o.numeroDocFisc}),i(s,{children:i(b,{color:"info",onClick:()=>t(`/app/docfisc/chiusure-fiscali/dettagli/${o.id}`),children:i(C,{})})})]},o.id))})]}),i(B,{children:i(y,{children:c(u,{p:2,children:[i(l,{variant:"h6",gutterBottom:!0,children:"Ultime Chiusure Fiscali"}),h,i(u,{mt:2,sx:{textAlign:"right"},children:i(R,{onClick:()=>t("/app/docfisc/chiusure-fiscali"),children:"vai alla lista"})})]})})})},ni=()=>i(B,{children:c(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[i(p,{item:!0,xs:12,sm:6,children:i(S,{})}),i(p,{item:!0,xs:12,sm:6,children:i(k,{})}),i(p,{item:!0,xs:12,children:i(W,{})})]})});export{ni as default};
