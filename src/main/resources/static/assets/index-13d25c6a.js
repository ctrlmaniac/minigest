import{h as Q,k as ee,s as T,d as B,_ as p,r as h,i as O,e as M,j as r,f as A,g as F,n as Ae,B as te,a as g,D as Be,E as Ee,H as Me,I as Te,J as $e,K as Re,L as ce,M as Ne,N as we,O as Pe,R as E,P as Le,F as Se,Q as Oe}from"./index-f96e3560.js";import{P as de}from"./Paper-661358a8.js";import{I as K}from"./Alert-bac571b5.js";import{c as $}from"./createReactComponent-6e8dbf88.js";import{T as w}from"./Typography-4d9115c9.js";import{u as pe}from"./useTheme-935eac68.js";import{d as Fe,o as ue,M as Ue}from"./Modal-26427fd5.js";import{T as _e,r as Ge,g as ie}from"./utils-78862c06.js";import{u as We}from"./ButtonBase-2e279362.js";import{a as Ve,L as q}from"./List-22de0ac9.js";import{L as y,a as I}from"./ListItemText-42654c20.js";import{g as He}from"./listItemIconClasses-83355057.js";import{L as Ye}from"./ListSubheader-a34a186e.js";import{I as je}from"./IconFile-c9d7ab6c.js";import{u as oe,a as N}from"./hooks-9f30ad4b.js";import{a as Z,E as J}from"./index-e540bbee.js";import{E as Xe}from"./ErrorScreen-798cc366.js";import{D as qe,g as Ze,a as fe,b as ge}from"./DialogContent-d6752986.js";import{C as Je}from"./Container-8d72809c.js";import"./createSvgIcon-b6946a7a.js";import"./listItemTextClasses-0966e412.js";function Ke(t){return Q("MuiAppBar",t)}ee("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const Qe=["className","color","enableColorOnDark","position"],et=t=>{const{color:e,position:n,classes:o}=t,a={root:["root",`color${B(e)}`,`position${B(n)}`]};return F(a,Ke,o)},j=(t,e)=>`${t==null?void 0:t.replace(")","")}, ${e})`,tt=T(de,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${B(n.position)}`],e[`color${B(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return p({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&p({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&p({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&p({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:j(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:j(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:j(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:j(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),ot=h.forwardRef(function(e,n){const o=O({props:e,name:"MuiAppBar"}),{className:a,color:u="primary",enableColorOnDark:l=!1,position:i="fixed"}=o,s=M(o,Qe),c=p({},o,{color:u,position:i,enableColorOnDark:l}),f=et(c);return r(tt,p({square:!0,component:"header",ownerState:c,elevation:4,className:A(f.root,a,i==="fixed"&&"mui-fixed"),ref:n},s))}),rt=ot,nt=["className","id"],at=t=>{const{classes:e}=t;return F({root:["root"]},Ze,e)},it=T(w,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),st=h.forwardRef(function(e,n){const o=O({props:e,name:"MuiDialogTitle"}),{className:a,id:u}=o,l=M(o,nt),i=o,s=at(i),{titleId:c=u}=h.useContext(qe);return r(it,p({component:"h2",className:A(s.root,a),ownerState:i,ref:n,variant:"h6",id:c},l))}),he=st,lt=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ct(t,e,n){const o=e.getBoundingClientRect(),a=n&&n.getBoundingClientRect(),u=ue(e);let l;if(e.fakeTransform)l=e.fakeTransform;else{const c=u.getComputedStyle(e);l=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let i=0,s=0;if(l&&l!=="none"&&typeof l=="string"){const c=l.split("(")[1].split(")")[0].split(",");i=parseInt(c[4],10),s=parseInt(c[5],10)}return t==="left"?a?`translateX(${a.right+i-o.left}px)`:`translateX(${u.innerWidth+i-o.left}px)`:t==="right"?a?`translateX(-${o.right-a.left-i}px)`:`translateX(-${o.left+o.width-i}px)`:t==="up"?a?`translateY(${a.bottom+s-o.top}px)`:`translateY(${u.innerHeight+s-o.top}px)`:a?`translateY(-${o.top-a.top+o.height-s}px)`:`translateY(-${o.top+o.height-s}px)`}function dt(t){return typeof t=="function"?t():t}function X(t,e,n){const o=dt(n),a=ct(t,e,o);a&&(e.style.webkitTransform=a,e.style.transform=a)}const pt=h.forwardRef(function(e,n){const o=pe(),a={enter:o.transitions.easing.easeOut,exit:o.transitions.easing.sharp},u={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:l,appear:i=!0,children:s,container:c,direction:f="down",easing:C=a,in:m,onEnter:U,onEntered:P,onEntering:L,onExit:_,onExited:G,onExiting:W,style:D,timeout:S=u,TransitionComponent:R=_e}=e,V=M(e,lt),k=h.useRef(null),re=We(s.ref,k,n),x=d=>v=>{d&&(v===void 0?d(k.current):d(k.current,v))},b=x((d,v)=>{X(f,d,c),Ge(d),U&&U(d,v)}),H=x((d,v)=>{const ae=ie({timeout:S,style:D,easing:C},{mode:"enter"});d.style.webkitTransition=o.transitions.create("-webkit-transform",p({},ae)),d.style.transition=o.transitions.create("transform",p({},ae)),d.style.webkitTransform="none",d.style.transform="none",L&&L(d,v)}),Y=x(P),Ce=x(W),De=x(d=>{const v=ie({timeout:S,style:D,easing:C},{mode:"exit"});d.style.webkitTransition=o.transitions.create("-webkit-transform",v),d.style.transition=o.transitions.create("transform",v),X(f,d,c),_&&_(d)}),Ie=x(d=>{d.style.webkitTransition="",d.style.transition="",G&&G(d)}),ze=d=>{l&&l(k.current,d)},ne=h.useCallback(()=>{k.current&&X(f,k.current,c)},[f,c]);return h.useEffect(()=>{if(m||f==="down"||f==="right")return;const d=Fe(()=>{k.current&&X(f,k.current,c)}),v=ue(k.current);return v.addEventListener("resize",d),()=>{d.clear(),v.removeEventListener("resize",d)}},[f,m,c]),h.useEffect(()=>{m||ne()},[m,ne]),r(R,p({nodeRef:k,onEnter:b,onEntered:Y,onEntering:H,onExit:De,onExited:Ie,onExiting:Ce,addEndListener:ze,appear:i,in:m,timeout:S},V,{children:(d,v)=>h.cloneElement(s,p({ref:re,style:p({visibility:d==="exited"&&!m?"hidden":void 0},D,s.props.style)},v))}))}),ut=pt;function ft(t){return Q("MuiDrawer",t)}ee("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const gt=["BackdropProps"],ht=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],me=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},mt=t=>{const{classes:e,anchor:n,variant:o}=t,a={root:["root"],docked:[(o==="permanent"||o==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${B(n)}`,o!=="temporary"&&`paperAnchorDocked${B(n)}`]};return F(a,ft,e)},vt=T(Ue,{name:"MuiDrawer",slot:"Root",overridesResolver:me})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),se=T("div",{shouldForwardProp:Ae,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:me})({flex:"0 0 auto"}),kt=T(de,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${B(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${B(n.anchor)}`]]}})(({theme:t,ownerState:e})=>p({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),ve={left:"right",right:"left",top:"down",bottom:"up"};function xt(t){return["left","right"].indexOf(t)!==-1}function yt(t,e){return t.direction==="rtl"&&xt(e)?ve[e]:e}const bt=h.forwardRef(function(e,n){const o=O({props:e,name:"MuiDrawer"}),a=pe(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:i,children:s,className:c,elevation:f=16,hideBackdrop:C=!1,ModalProps:{BackdropProps:m}={},onClose:U,open:P=!1,PaperProps:L={},SlideProps:_,TransitionComponent:G=ut,transitionDuration:W=u,variant:D="temporary"}=o,S=M(o.ModalProps,gt),R=M(o,ht),V=h.useRef(!1);h.useEffect(()=>{V.current=!0},[]);const k=yt(a,l),x=p({},o,{anchor:l,elevation:f,open:P,variant:D},R),b=mt(x),H=r(kt,p({elevation:D==="temporary"?f:0,square:!0},L,{className:A(b.paper,L.className),ownerState:x,children:s}));if(D==="permanent")return r(se,p({className:A(b.root,b.docked,c),ownerState:x,ref:n},R,{children:H}));const Y=r(G,p({in:P,direction:ve[k],timeout:W,appear:V.current},_,{children:H}));return D==="persistent"?r(se,p({className:A(b.root,b.docked,c),ownerState:x,ref:n},R,{children:Y})):r(vt,p({BackdropProps:p({},i,m,{transitionDuration:W}),className:A(b.root,b.modal,c),open:P,ownerState:x,onClose:U,hideBackdrop:C,ref:n},R,S,{children:Y}))}),Ct=bt,Dt=["className"],It=t=>{const{alignItems:e,classes:n}=t;return F({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},He,n)},zt=T("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>p({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),At=h.forwardRef(function(e,n){const o=O({props:e,name:"MuiListItemIcon"}),{className:a}=o,u=M(o,Dt),l=h.useContext(Ve),i=p({},o,{alignItems:l.alignItems}),s=It(i);return r(zt,p({className:A(s.root,a),ownerState:i,ref:n},u))}),z=At;function Bt(t){return Q("MuiToolbar",t)}ee("MuiToolbar",["root","gutters","regular","dense"]);const Et=["className","component","disableGutters","variant"],Mt=t=>{const{classes:e,disableGutters:n,variant:o}=t;return F({root:["root",!n&&"gutters",o]},Bt,e)},Tt=T("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>p({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),$t=h.forwardRef(function(e,n){const o=O({props:e,name:"MuiToolbar"}),{className:a,component:u="div",disableGutters:l=!1,variant:i="regular"}=o,s=M(o,Et),c=p({},o,{component:u,disableGutters:l,variant:i}),f=Mt(c);return r(Tt,p({as:u,className:A(f.root,a),ref:n,ownerState:c},s))}),Rt=$t;var ke=$("building-store","IconBuildingStore",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M3 7v1a3 3 0 0 0 6 0v-1m0 1a3 3 0 0 0 6 0v-1m0 1a3 3 0 0 0 6 0v-1h-18l2 -4h14l2 4",key:"svg-1"}],["path",{d:"M5 21l0 -10.15",key:"svg-2"}],["path",{d:"M19 21l0 -10.15",key:"svg-3"}],["path",{d:"M9 21v-4a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v4",key:"svg-4"}]]),xe=$("building-warehouse","IconBuildingWarehouse",[["path",{d:"M3 21v-13l9 -4l9 4v13",key:"svg-0"}],["path",{d:"M13 13h4v8h-10v-6h6",key:"svg-1"}],["path",{d:"M13 21v-9a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v3",key:"svg-2"}]]),le=$("file-description","IconFileDescription",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17h6",key:"svg-2"}],["path",{d:"M9 13h6",key:"svg-3"}]]),Nt=$("files","IconFiles",[["path",{d:"M15 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-2"}]]),wt=$("layout-dashboard","IconLayoutDashboard",[["path",{d:"M4 4h6v8h-6z",key:"svg-0"}],["path",{d:"M4 16h6v4h-6z",key:"svg-1"}],["path",{d:"M14 12h6v8h-6z",key:"svg-2"}],["path",{d:"M14 4h6v4h-6z",key:"svg-3"}]]),Pt=$("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),Lt=$("user","IconUser",[["path",{d:"M12 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);const St=t=>r(te,{sx:{flexGrow:1},children:r(rt,{position:"fixed",children:g(Rt,{children:[r(K,{onClick:()=>t.handleDrawerOpen(!0),sx:{mr:2},children:r(Pt,{})}),r(w,{variant:"h6",sx:{flexGrow:1},children:"minigest"}),r(K,{onClick:()=>t.handleNegoziDialogOpen(!0),children:r(ke,{})}),r(K,{onClick:()=>t.handleAziendeDialogOpen(!0),children:r(xe,{})})]})})}),Ot=({open:t,handleOpen:e})=>{const n=Be(),o=a=>{n(`/app${a}`),e(!1)};return r(Ct,{anchor:"left",open:t,onClose:()=>e(!1),children:g(te,{sx:{width:250},children:[g(q,{children:[g(y,{onClick:()=>o("/"),children:[r(z,{children:r(wt,{})}),r(I,{primary:"Dashboard"})]}),g(y,{onClick:()=>o("/account"),children:[r(z,{children:r(Lt,{})}),r(I,{primary:"Account"})]}),g(y,{onClick:()=>o("/aziende"),children:[r(z,{children:r(xe,{})}),r(I,{primary:"Aziende"})]}),g(y,{onClick:()=>o("/negozi"),children:[r(z,{children:r(ke,{})}),r(I,{primary:"Negozi"})]})]}),g(q,{subheader:r(Ye,{children:"Documenti Fiscali"}),children:[g(y,{onClick:()=>o("/docfisc/tipi"),children:[r(z,{children:r(je,{})}),r(I,{primary:"Tipi di Doc. Fisc."})]}),g(y,{onClick:()=>o("/docfisc/chiusure-fiscali"),children:[r(z,{children:r(Nt,{})}),r(I,{primary:"Chiusure Fiscali"})]}),g(y,{onClick:()=>o("/docfisc/fatture/vendita"),children:[r(z,{children:r(le,{})}),r(I,{primary:"Fatture Vendita"})]}),g(y,{onClick:()=>o("/docfisc/fatture/acquisto"),children:[r(z,{children:r(le,{})}),r(I,{primary:"Fatture Acquisto"})]})]})]})})};function Ft(){return async t=>{t(Ee()),Z.get(J.ACCOUNT).then(e=>{t(Me(e.data))}).catch(e=>{t(Te(e.message))})}}function ye(t){return async e=>{Z.get(`${J.AZIENDE}/${t}`).then(n=>{e($e(n.data))}).catch(n=>{e(Re(n.message))})}}const Ut=({open:t,handleOpen:e})=>{var i;const n=oe(),{dettagli:o}=N(s=>s.account),{selected:a}=N(s=>s.aziende),u=s=>{window.localStorage.setItem("azienda",s),n(ye(s)),e(!1)};let l=r(w,{children:"Caricamento in corso..."});return ce.isEmpty(o==null?void 0:o.aziende)?l=r(w,{children:"Devi aggiungere un'azienda!"}):l=r(q,{children:(i=o==null?void 0:o.aziende)==null?void 0:i.map(s=>r(y,{selected:s.id===(a==null?void 0:a.id),onClick:()=>u(s.id),children:s.denominazione},s.id))}),g(fe,{open:t,onClose:()=>e(!1),children:[r(he,{children:"Seleziona Azienda"}),r(ge,{children:l})]})};function _t(t){return async e=>{let n=`${J.NEGOZI}?azienda=${t}`;Z.get(n).then(o=>{e(Ne(o.data))}).catch(o=>{e(we(o.message))})}}function be(t){return async e=>{Z.get(`${J.NEGOZI}/${t}`).then(n=>{e(Pe(n.data))})}}const Gt=({open:t,handleOpen:e})=>{const n=oe(),{selected:o,listByAzienda:a}=N(i=>i.negozi),u=i=>{window.localStorage.setItem("negozio",i),n(be(i)),e(!1)};let l=r(w,{children:"Caricamento in corso..."});return ce.isEmpty(a)?l=r(w,{children:"Devi aggiungere un negozio!"}):l=r(q,{children:a==null?void 0:a.map(i=>r(y,{selected:i.id===(o==null?void 0:o.id),onClick:()=>u(i.id),children:i.nome},i.id))}),g(fe,{open:t,onClose:()=>e(!1),children:[r(he,{children:"Seleziona Negozio"}),r(ge,{children:l})]})},po=()=>{const t=oe(),[e,n]=E.useState(!1),[o,a]=E.useState(!1),[u,l]=E.useState(!1),{getting:i,getError:s,dettagli:c}=N(m=>m.account),{selected:f}=N(m=>m.aziende),{listByAzienda:C}=N(m=>m.negozi);return E.useEffect(()=>{t(Ft())},[]),E.useEffect(()=>{c!=null&&c.aziende&&t(ye(c.aziende[0].id))},[c]),E.useEffect(()=>{f&&t(_t(f.id))},[f]),E.useEffect(()=>{C&&t(be(C[0].id))},[C]),i?r(Le,{}):s?r(Xe,{message:s}):g(Se,{children:[r(St,{handleDrawerOpen:n,handleAziendeDialogOpen:a,handleNegoziDialogOpen:l}),r(Ot,{open:e,handleOpen:n}),r(Ut,{open:o,handleOpen:a}),r(Gt,{open:u,handleOpen:l}),r(te,{mt:12,mb:12,children:r(Je,{children:r(Oe,{})})})]})};export{po as default};
