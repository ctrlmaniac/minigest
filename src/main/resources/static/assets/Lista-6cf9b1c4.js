import{Z as L,$ as R,R as h,a2 as j,j as e,P as Y,a as t,F as $,B as l,L as G}from"./index-10c94bff.js";import{u as H,a as x}from"./hooks-9397b445.js";import{A as M}from"./AddFab-f2eb1248.js";import{E as N}from"./ErrorScreen-5eddfcdb.js";import{r as U}from"./remove-703a59b0.js";import{E as W,a as k}from"./index-e540bbee.js";import{T}from"./Typography-95a1612a.js";import{P as E}from"./Paper-46a58f5a.js";import{G as p}from"./Grid-d41e33d5.js";import{T as C}from"./TextField-eb3a3c5b.js";import{A as z,I as f}from"./Alert-19648b22.js";import{T as V,a as v,b as a,c as Z}from"./TableRow-ea5ae3c9.js";import{T as _}from"./TableHead-3cc55543.js";import{I as w}from"./IconFile-d8a454f5.js";import{I as y}from"./IconEdit-fc7f1803.js";import{I as A}from"./IconTrash-f0f1451c.js";import"./Container-bd6f4fdc.js";import"./Fab-f0961ac3.js";import"./ButtonBase-6e0e1411.js";import"./createReactComponent-ad886392.js";import"./useTheme-75ea811f.js";import"./Grow-0fe9c25b.js";import"./utils-b32b3a94.js";import"./Modal-2991f9ad.js";import"./List-b82d4e7d.js";import"./createSvgIcon-46abf9a7.js";function q(c){return async r=>{let s=`${W.CHIUSURE_FISCALI}?${c}`;k.get(s).then(o=>{r(L(o.data))}).catch(o=>{r(R(o.message))})}}const xe=()=>{const c=H(),{selected:r}=x(n=>n.negozi),{list:s,listing:o,listError:g}=x(n=>n.chiusureFiscali),D=n=>{c(U(n))},[i,P]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,B]=j({negozio:r==null?void 0:r.id,anno:i.anno.toString(),mese:i.mese.toString()});const I=n=>{const{name:u,value:b}=n.target;P({...i,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{B({negozio:r==null?void 0:r.id,anno:i.anno.toString(),mese:i.mese.toString()})},[r,i]),h.useEffect(()=>{c(q(S.toString()))},[S]),o?e(Y,{}):g?e(N,{message:g}):t($,{children:[t(l,{mb:3,children:[e(T,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),t(T,{children:["Stai visualizzando le chiusure fiscali del negozio: ",r==null?void 0:r.nome]})]}),e(l,{mb:3,children:e(E,{children:e(l,{p:2,children:t(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:i.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:i.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),G.isEmpty(s)?e(z,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(E,{children:e(l,{p:2,children:t(V,{children:[e(_,{children:t(v,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F."}),e(a,{sx:{width:50},align:"center",children:e(w,{})}),e(a,{sx:{width:50},align:"center",children:e(y,{})}),e(a,{sx:{width:50},align:"center",children:e(A,{})})]})}),e(Z,{children:s==null?void 0:s.map(n=>t(v,{children:[e(a,{children:n.data}),e(a,{children:n.totale}),e(a,{children:n.numeroDocFisc}),e(a,{children:e(f,{color:"info",children:e(w,{})})}),e(a,{children:e(f,{color:"warning",children:e(y,{})})}),e(a,{children:e(f,{color:"error",onClick:()=>D(n.id),children:e(A,{})})})]},n.id))})]})})})}),e(M,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{xe as default};
