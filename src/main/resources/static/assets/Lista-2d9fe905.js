import{aH as w,aI as j,D as B,R as m,a2 as L,j as e,P as M,a as i,F as R,B as l,L as V}from"./index-10c94bff.js";import{A as $}from"./AddFab-f2eb1248.js";import{E as z}from"./ErrorScreen-5eddfcdb.js";import{a as N,E as O}from"./index-e540bbee.js";import{u as W,a as T}from"./hooks-9397b445.js";import{T as Y}from"./Typography-95a1612a.js";import{P as v}from"./Paper-46a58f5a.js";import{G as h}from"./Grid-d41e33d5.js";import{T as F,F as G,I as H,S as k}from"./TextField-eb3a3c5b.js";import{M as x}from"./MenuItem-30733974.js";import{A as U,I as q}from"./Alert-19648b22.js";import{T as J,a as E,b as r,c as K}from"./TableRow-ea5ae3c9.js";import{T as Q}from"./TableHead-3cc55543.js";import{I as C}from"./IconFile-d8a454f5.js";import"./Container-bd6f4fdc.js";import"./Fab-f0961ac3.js";import"./ButtonBase-6e0e1411.js";import"./createReactComponent-ad886392.js";import"./useTheme-75ea811f.js";import"./Grow-0fe9c25b.js";import"./utils-b32b3a94.js";import"./Modal-2991f9ad.js";import"./List-b82d4e7d.js";import"./createSvgIcon-46abf9a7.js";import"./listItemIconClasses-1fb8fa72.js";import"./listItemTextClasses-6f2959c9.js";function X(p,u){return async o=>{N.get(`${O.FATTURE}/vendita/${p}?${u}`).then(n=>o(w(n.data))).catch(n=>o(j(n.message)))}}const xe=()=>{const p=W(),u=B(),{selected:o}=T(a=>a.aziende),{list:n,listError:g,listing:y}=T(a=>a.fatture),[t,f]=m.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,order:"data"}),[d,S]=m.useState({anno:!1,mese:!1});let[D,A]=L({anno:t.anno.toString(),mese:t.mese.toString(),order:"data"});const I=a=>{const{name:s,value:b}=a.target;f({...t,[s]:b});const c=parseInt(b);s==="anno"&&S({...d,anno:c<1970||c>new Date().getFullYear()}),s==="mese"&&S({...d,mese:c<1||c>12})},P=a=>{const{value:s}=a.target;f({...t,order:s})};return m.useEffect(()=>{A({anno:t.anno.toString(),mese:t.mese.toString(),order:t.order})},[o,t]),m.useEffect(()=>{o&&p(X(o.id,D.toString()))},[o,D]),y?e(M,{}):g?e(z,{message:g}):i(R,{children:[e(l,{mb:3,children:e(Y,{variant:"h3",children:"Fatture Vendita"})}),e(l,{mb:3,children:e(v,{children:e(l,{p:2,children:i(h,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(h,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:d.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(h,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:d.mese,onChange:I,inputProps:{min:1,max:12}})}),e(h,{item:!0,xs:12,sm:6,children:i(G,{fullWidth:!0,children:[e(H,{children:"Ordina per data/data SDI"}),i(k,{value:t.order,label:"Ordina per data/data SDI",name:"order",onChange:P,children:[e(x,{value:"data",children:"Data fattura"}),e(x,{value:"sdi",children:"Data SDI"})]})]})})]})})})}),e(l,{children:e(v,{children:e(l,{p:2,children:V.isEmpty(n)?e(U,{severity:"info",children:"Non ci sono fatture, aggiunge una!"}):i(J,{children:[e(Q,{children:i(E,{children:[e(r,{children:"Tipo"}),e(r,{children:"Data"}),e(r,{children:"Data SDI"}),e(r,{children:"Committente"}),e(r,{children:"Numero"}),e(r,{children:"Totale"}),e(r,{sx:{width:50},align:"center",children:e(C,{})})]})}),e(K,{children:n==null?void 0:n.map(a=>i(E,{children:[e(r,{children:a.tipoDocumento.codice}),e(r,{children:a.data}),e(r,{children:a.dataSDI}),e(r,{children:a.committente.denominazione}),e(r,{children:a.numero}),i(r,{children:["â‚¬ ",a.totale]}),e(r,{align:"center",children:e(q,{color:"info",onClick:()=>u(`/app/docfisc/fatture/dettagli/${a.id}`),children:e(C,{})})})]},a.id))})]})})})}),e($,{href:"/app/docfisc/fatture/aggiungi"})]})};export{xe as default};
