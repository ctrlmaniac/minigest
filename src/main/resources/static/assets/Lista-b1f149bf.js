import{Z as R,$,D as j,R as h,a4 as k,j as e,P as N,a as s,F as Y,B as l,L as G}from"./index-761b4989.js";import{u as H,a as x}from"./hooks-9000e4c8.js";import{A as M}from"./AddFab-736de467.js";import{E as U}from"./ErrorScreen-83758a8b.js";import{r as W}from"./remove-e5732f81.js";import{E as z,a as V}from"./index-30e337fd.js";import{T as C}from"./Typography-4033f764.js";import{P as T}from"./Paper-1026d494.js";import{G as p}from"./Grid-c7d0a2fe.js";import{T as v}from"./TextField-294b3173.js";import{A as Z,I as f}from"./Alert-caf42b59.js";import{T as _,a as E,b as a,c as q}from"./TableRow-f3e30aef.js";import{T as J}from"./TableHead-7c58f24d.js";import{I as w}from"./IconFile-fd1b92d0.js";import{I as y}from"./IconEdit-1ec91f0e.js";import{I as D}from"./IconTrash-7b2f8fcb.js";import"./Container-e078e984.js";import"./Fab-0c52d3ca.js";import"./ButtonBase-242e16e9.js";import"./createReactComponent-62a25815.js";import"./useTheme-167c9bfa.js";import"./Grow-3595db16.js";import"./utils-b42c4e0c.js";import"./Modal-c33af6cc.js";import"./List-ff5ffe2c.js";import"./createSvgIcon-1320d625.js";function K(c){return async o=>{let i=`${z.CHIUSURE_FISCALI}?${c}`;V.get(i).then(n=>{o(R(n.data))}).catch(n=>{o($(n.message))})}}const Te=()=>{const c=H(),o=j(),{selected:i}=x(r=>r.negozi),{list:n,listing:A,listError:g}=x(r=>r.chiusureFiscali),P=r=>{c(W(r))},[t,B]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,L]=k({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()});const I=r=>{const{name:u,value:b}=r.target;B({...t,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{L({negozio:i==null?void 0:i.id,anno:t.anno.toString(),mese:t.mese.toString()})},[i,t]),h.useEffect(()=>{c(K(S.toString()))},[S]),A?e(N,{}):g?e(U,{message:g}):s(Y,{children:[s(l,{mb:3,children:[e(C,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),s(C,{children:["Stai visualizzando le chiusure fiscali del negozio: ",i==null?void 0:i.nome]})]}),e(l,{mb:3,children:e(T,{children:e(l,{p:2,children:s(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(v,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),G.isEmpty(n)?e(Z,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(T,{children:e(l,{p:2,children:s(_,{children:[e(J,{children:s(E,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F."}),e(a,{sx:{width:50},align:"center",children:e(w,{})}),e(a,{sx:{width:50},align:"center",children:e(y,{})}),e(a,{sx:{width:50},align:"center",children:e(D,{})})]})}),e(q,{children:n==null?void 0:n.map(r=>s(E,{children:[e(a,{children:r.data}),e(a,{children:r.totale}),e(a,{children:r.numeroDocFisc}),e(a,{children:e(f,{color:"info",onClick:()=>o(`/app/docfisc/chiusure-fiscali/dettagli/${r.id}`),children:e(w,{})})}),e(a,{children:e(f,{color:"warning",onClick:()=>o(`/app/docfisc/chiusure-fiscali/modifica/${r.id}`),children:e(y,{})})}),e(a,{children:e(f,{color:"error",onClick:()=>P(r.id),children:e(D,{})})})]},r.id))})]})})})}),e(M,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{Te as default};
