import{Z as L,$ as R,R as h,a2 as j,j as e,P as Y,a as t,F as $,B as l,L as G}from"./index-f96e3560.js";import{u as H,a as x}from"./hooks-9f30ad4b.js";import{A as M}from"./AddFab-5e11b3b7.js";import{E as N}from"./ErrorScreen-798cc366.js";import{r as U}from"./remove-ab62a61b.js";import{E as W,a as k}from"./index-e540bbee.js";import{T}from"./Typography-4d9115c9.js";import{P as E}from"./Paper-661358a8.js";import{G as p}from"./Grid-544d987d.js";import{T as C}from"./TextField-b06cea5a.js";import{A as z,I as f}from"./Alert-bac571b5.js";import{T as V,a as v,b as a,c as Z}from"./TableRow-3feee7d7.js";import{T as _}from"./TableHead-fa078fde.js";import{I as w}from"./IconFile-c9d7ab6c.js";import{I as y}from"./IconEdit-546851a2.js";import{I as A}from"./IconTrash-0d016c1d.js";import"./Container-8d72809c.js";import"./Fab-443a133d.js";import"./ButtonBase-2e279362.js";import"./createReactComponent-6e8dbf88.js";import"./useTheme-935eac68.js";import"./Grow-214d7052.js";import"./utils-78862c06.js";import"./Modal-26427fd5.js";import"./List-22de0ac9.js";import"./createSvgIcon-b6946a7a.js";function q(c){return async r=>{let s=`${W.CHIUSURE_FISCALI}?${c}`;k.get(s).then(o=>{r(L(o.data))}).catch(o=>{r(R(o.message))})}}const xe=()=>{const c=H(),{selected:r}=x(n=>n.negozi),{list:s,listing:o,listError:g}=x(n=>n.chiusureFiscali),D=n=>{c(U(n))},[i,P]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,B]=j({negozio:r==null?void 0:r.id,anno:i.anno.toString(),mese:i.mese.toString()});const I=n=>{const{name:u,value:b}=n.target;P({...i,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{B({negozio:r==null?void 0:r.id,anno:i.anno.toString(),mese:i.mese.toString()})},[r,i]),h.useEffect(()=>{c(q(S.toString()))},[S]),o?e(Y,{}):g?e(N,{message:g}):t($,{children:[t(l,{mb:3,children:[e(T,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),t(T,{children:["Stai visualizzando le chiusure fiscali del negozio: ",r==null?void 0:r.nome]})]}),e(l,{mb:3,children:e(E,{children:e(l,{p:2,children:t(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:i.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:i.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),G.isEmpty(s)?e(z,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(E,{children:e(l,{p:2,children:t(V,{children:[e(_,{children:t(v,{children:[e(a,{children:"Data"}),e(a,{children:"Totale"}),e(a,{children:"N.D.F."}),e(a,{sx:{width:50},align:"center",children:e(w,{})}),e(a,{sx:{width:50},align:"center",children:e(y,{})}),e(a,{sx:{width:50},align:"center",children:e(A,{})})]})}),e(Z,{children:s==null?void 0:s.map(n=>t(v,{children:[e(a,{children:n.data}),e(a,{children:n.totale}),e(a,{children:n.numeroDocFisc}),e(a,{children:e(f,{color:"info",children:e(w,{})})}),e(a,{children:e(f,{color:"warning",children:e(y,{})})}),e(a,{children:e(f,{color:"error",onClick:()=>D(n.id),children:e(A,{})})})]},n.id))})]})})})}),e(M,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{xe as default};
