import{aI as P,aJ as j,H as B,R as m,a3 as L,j as e,a as i,F as M,N}from"./index-f45c03a1.js";import{A as R}from"./AddFab-be69f3bd.js";import{E as V}from"./ErrorScreen-23109fc3.js";import{L as $}from"./LoadingScreen-7795ebdd.js";import{a as z,E as O}from"./index-e540bbee.js";import{u as W,a as T}from"./hooks-71074923.js";import{B as l,T as Y}from"./Box-3112786e.js";import{P as v}from"./Paper-c542b63c.js";import{G as p}from"./Grid-656ee9be.js";import{T as F,F as G,I as H,S as k}from"./TextField-2a8b6e79.js";import{M as x}from"./MenuItem-08cfbb6d.js";import{A as J,I as U}from"./Alert-9ab8b305.js";import{T as q,a as E,b as a,c as K}from"./TableRow-aa552d5a.js";import{T as Q}from"./TableHead-f12ffb5d.js";import{I as C}from"./IconFile-7c362032.js";import"./Container-b2c8bae1.js";import"./Fab-8a5b0f7e.js";import"./ButtonBase-07c320ab.js";import"./createReactComponent-19830811.js";import"./Splash-c0a4ca1f.js";import"./useTheme-7ac3100d.js";import"./Grow-46dd7ada.js";import"./utils-856da27c.js";import"./Modal-6c34c1a4.js";import"./List-cc96011b.js";import"./createSvgIcon-5f7bcaef.js";import"./listItemIconClasses-16019409.js";import"./listItemTextClasses-9f6b945d.js";function X(h,u){return async o=>{z.get(`${O.FATTURE}/vendita/${h}?${u}`).then(n=>o(P(n.data))).catch(n=>o(j(n.message)))}}const Ce=()=>{const h=W(),u=B(),{selected:o}=T(r=>r.aziende),{list:n,listError:g,listing:y}=T(r=>r.fatture),[t,f]=m.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1,order:"data"}),[d,S]=m.useState({anno:!1,mese:!1});let[I,A]=L({anno:t.anno.toString(),mese:t.mese.toString(),order:"data"});const b=r=>{const{name:s,value:D}=r.target;f({...t,[s]:D});const c=parseInt(D);s==="anno"&&S({...d,anno:c<1970||c>new Date().getFullYear()}),s==="mese"&&S({...d,mese:c<1||c>12})},w=r=>{const{value:s}=r.target;f({...t,order:s})};return m.useEffect(()=>{A({anno:t.anno.toString(),mese:t.mese.toString(),order:t.order})},[o,t]),m.useEffect(()=>{o&&h(X(o.id,I.toString()))},[o,I]),y?e($,{}):g?e(V,{message:g}):i(M,{children:[e(l,{mb:3,children:e(Y,{variant:"h3",children:"Fatture Vendita"})}),e(l,{mb:3,children:e(v,{children:e(l,{p:2,children:i(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:t.anno,error:d.anno,onChange:b,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(F,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:t.mese,error:d.mese,onChange:b,inputProps:{min:1,max:12}})}),e(p,{item:!0,xs:12,sm:6,children:i(G,{fullWidth:!0,children:[e(H,{children:"Ordina per data/data SDI"}),i(k,{value:t.order,label:"Ordina per data/data SDI",name:"order",onChange:w,children:[e(x,{value:"data",children:"Data fattura"}),e(x,{value:"sdi",children:"Data SDI"})]})]})})]})})})}),e(l,{children:e(v,{children:e(l,{p:2,children:N.isEmpty(n)?e(J,{severity:"info",children:"Non ci sono fatture, aggiunge una!"}):i(q,{children:[e(Q,{children:i(E,{children:[e(a,{children:"Tipo"}),e(a,{children:"Data"}),e(a,{children:"Data SDI"}),e(a,{children:"Committente"}),e(a,{children:"Numero"}),e(a,{children:"Totale"}),e(a,{sx:{width:50},align:"center",children:e(C,{})})]})}),e(K,{children:n==null?void 0:n.map(r=>i(E,{children:[e(a,{children:r.tipoDocumento.codice}),e(a,{children:r.data}),e(a,{children:r.dataSDI}),e(a,{children:r.committente.denominazione}),e(a,{children:r.numero}),i(a,{children:["â‚¬ ",r.totale]}),e(a,{align:"center",children:e(U,{color:"info",onClick:()=>u(`/app/docfisc/fatture/dettagli/${r.id}`),children:e(C,{})})})]},r.id))})]})})})}),e(R,{href:"/app/docfisc/fatture/aggiungi"})]})};export{Ce as default};
