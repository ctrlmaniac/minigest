import{H as z,N as f,j as i,a as c,$ as F,a0 as v,R as E,F as B}from"./index-f45c03a1.js";import{a as m,u as A}from"./hooks-71074923.js";import{L as I}from"./List-cc96011b.js";import{L as T,a as L}from"./ListItemText-ef5a898c.js";import{P as y}from"./Paper-c542b63c.js";import{B as u,T as l}from"./Box-3112786e.js";import{A as g,I as b}from"./Alert-9ab8b305.js";import{E as D,a as N}from"./index-e540bbee.js";import{T as $,a as x,b as s,c as j}from"./TableRow-aa552d5a.js";import{T as w}from"./TableHead-f12ffb5d.js";import{I as C}from"./IconFile-7c362032.js";import{B as R}from"./Button-0977364e.js";import{G as p}from"./Grid-656ee9be.js";import"./ButtonBase-07c320ab.js";import"./listItemTextClasses-9f6b945d.js";import"./createSvgIcon-5f7bcaef.js";import"./createReactComponent-19830811.js";import"./useTheme-7ac3100d.js";const S=()=>{var d;const n=z(),{dettagli:t}=m(a=>a.account),{selected:r}=m(a=>a.aziende);let e=i(l,{children:"Caricamento in corso..."});return f.isEmpty(t==null?void 0:t.aziende)?e=i(l,{children:"Devi crearti un'azienda!"}):e=i(I,{children:(d=t==null?void 0:t.aziende)==null?void 0:d.map(a=>i(T,{selected:(r==null?void 0:r.id)===a.id,onClick:()=>n(`/app/aziende/dettagli/${a.id}`),children:a.denominazione},a.id))}),i(y,{children:c(u,{p:2,children:[i(l,{gutterBottom:!0,children:"Le tue aziende:"}),e]})})},k=()=>{const{listByAzienda:n,selected:t}=m(e=>e.negozi);let r=i(l,{children:"Caricamento in corso..."});return f.isEmpty(n)?r=i(g,{severity:"warning",children:"Non hai negozi, creane uno!"}):r=i(I,{children:n==null?void 0:n.map(e=>i(T,{selected:(t==null?void 0:t.id)===e.id,children:i(L,{primary:e.nome})},e.id))}),i(y,{children:c(u,{p:2,children:[i(l,{gutterBottom:!0,children:"I tuoi negozi:"}),r]})})};function H(n){return async t=>{let r=`${D.CHIUSURE_FISCALI}/last7?negozio=${n}`;N.get(r).then(e=>{t(F(e.data))}).catch(e=>{t(v(e.message))})}}const U=()=>{const n=A(),t=z(),{selected:r}=m(o=>o.negozi),{list:e,listError:d,listing:a}=m(o=>o.chiusureFiscali);E.useEffect(()=>{r&&n(H(r.id))},[r]);let h=i(l,{children:"Caricamento in corso..."});return d&&(h=i(g,{severity:"error",children:d})),f.isEmpty(e)?h=i(g,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):h=c($,{children:[i(w,{children:c(x,{children:[i(s,{children:"Data"}),i(s,{children:"Totale"}),i(s,{children:"N.D.F."}),i(s,{sx:{width:50},align:"center",children:i(C,{})})]})}),i(j,{children:e==null?void 0:e.map(o=>c(x,{children:[i(s,{children:o.data}),c(s,{children:["â‚¬ ",o.totale]}),i(s,{children:o.numeroDocFisc}),i(s,{children:i(b,{color:"info",onClick:()=>t(`/app/docfisc/chiusure-fiscali/dettagli/${o.id}`),children:i(C,{})})})]},o.id))})]}),i(B,{children:i(y,{children:c(u,{p:2,children:[i(l,{variant:"h6",gutterBottom:!0,children:"Ultime Chiusure Fiscali"}),h,i(u,{mt:2,sx:{textAlign:"right"},children:i(R,{onClick:()=>t("/app/docfisc/chiusure-fiscali"),children:"vai alla lista"})})]})})})},ni=()=>i(B,{children:c(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[i(p,{item:!0,xs:12,sm:6,children:i(S,{})}),i(p,{item:!0,xs:12,sm:6,children:i(k,{})}),i(p,{item:!0,xs:12,children:i(U,{})})]})});export{ni as default};
