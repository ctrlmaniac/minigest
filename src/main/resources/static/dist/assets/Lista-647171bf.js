import{$ as L,a0 as R,R as h,a3 as j,j as e,a as t,F as N,N as Y}from"./index-f45c03a1.js";import{u as $,a as x}from"./hooks-71074923.js";import{A as G}from"./AddFab-be69f3bd.js";import{E as H}from"./ErrorScreen-23109fc3.js";import{L as M}from"./LoadingScreen-7795ebdd.js";import{r as U}from"./remove-8084d40d.js";import{E as W,a as k}from"./index-e540bbee.js";import{B as l,T}from"./Box-3112786e.js";import{P as E}from"./Paper-c542b63c.js";import{G as p}from"./Grid-656ee9be.js";import{T as C}from"./TextField-2a8b6e79.js";import{A as z,I as f}from"./Alert-9ab8b305.js";import{T as V,a as v,b as i,c as _}from"./TableRow-aa552d5a.js";import{T as q}from"./TableHead-f12ffb5d.js";import{I as w}from"./IconFile-7c362032.js";import{I as y}from"./IconEdit-c01d4a18.js";import{I as A}from"./IconTrash-34d4add2.js";import"./Container-b2c8bae1.js";import"./Fab-8a5b0f7e.js";import"./ButtonBase-07c320ab.js";import"./createReactComponent-19830811.js";import"./Splash-c0a4ca1f.js";import"./useTheme-7ac3100d.js";import"./Grow-46dd7ada.js";import"./utils-856da27c.js";import"./Modal-6c34c1a4.js";import"./List-cc96011b.js";import"./createSvgIcon-5f7bcaef.js";function J(c){return async r=>{let s=`${W.CHIUSURE_FISCALI}?${c}`;k.get(s).then(o=>{r(L(o.data))}).catch(o=>{r(R(o.message))})}}const Ee=()=>{const c=$(),{selected:r}=x(a=>a.negozi),{list:s,listing:o,listError:g}=x(a=>a.chiusureFiscali),D=a=>{c(U(a))},[n,P]=h.useState({anno:new Date().getFullYear(),mese:new Date().getMonth()+1}),[m,F]=h.useState({anno:!1,mese:!1});let[S,B]=j({negozio:r==null?void 0:r.id,anno:n.anno.toString(),mese:n.mese.toString()});const I=a=>{const{name:u,value:b}=a.target;P({...n,[u]:b});const d=parseInt(b);u==="anno"&&F({...m,anno:d<1970||d>new Date().getFullYear()}),u==="mese"&&F({...m,mese:d<1||d>12})};return h.useEffect(()=>{B({negozio:r==null?void 0:r.id,anno:n.anno.toString(),mese:n.mese.toString()})},[r,n]),h.useEffect(()=>{c(J(S.toString()))},[S]),o?e(M,{}):g?e(H,{message:g}):t(N,{children:[t(l,{mb:3,children:[e(T,{variant:"h3",gutterBottom:!0,children:"Lista Chiusure Fiscali"}),t(T,{children:["Stai visualizzando le chiusure fiscali del negozio: ",r==null?void 0:r.nome]})]}),e(l,{mb:3,children:e(E,{children:e(l,{p:2,children:t(p,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Anno",name:"anno",value:n.anno,error:m.anno,onChange:I,inputProps:{max:new Date().getFullYear()}})}),e(p,{item:!0,xs:12,sm:6,children:e(C,{fullWidth:!0,type:"number",label:"Mese",name:"mese",value:n.mese,error:m.mese,onChange:I,inputProps:{min:1,max:12}})})]})})})}),Y.isEmpty(s)?e(z,{severity:"info",children:"Non ci sono chiusure, aggiungine una!"}):e(l,{children:e(E,{children:e(l,{p:2,children:t(V,{children:[e(q,{children:t(v,{children:[e(i,{children:"Data"}),e(i,{children:"Totale"}),e(i,{children:"N.D.F."}),e(i,{sx:{width:50},align:"center",children:e(w,{})}),e(i,{sx:{width:50},align:"center",children:e(y,{})}),e(i,{sx:{width:50},align:"center",children:e(A,{})})]})}),e(_,{children:s==null?void 0:s.map(a=>t(v,{children:[e(i,{children:a.data}),e(i,{children:a.totale}),e(i,{children:a.numeroDocFisc}),e(i,{children:e(f,{color:"info",children:e(w,{})})}),e(i,{children:e(f,{color:"warning",children:e(y,{})})}),e(i,{children:e(f,{color:"error",onClick:()=>D(a.id),children:e(A,{})})})]},a.id))})]})})})}),e(G,{href:"/app/docfisc/chiusure-fiscali/aggiungi"})]})};export{Ee as default};
